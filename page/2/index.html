<!DOCTYPE html>
<html lang=ja>
<head>
    <meta charset="utf-8">
    
    <title>memo-blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="This is just a memo">
<meta property="og:type" content="website">
<meta property="og:title" content="memo-blog">
<meta property="og:url" content="https://dobachi.github.io/memo-blog/page/2/index.html">
<meta property="og:site_name" content="memo-blog">
<meta property="og:description" content="This is just a memo">
<meta property="og:locale" content="ja">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="memo-blog">
<meta name="twitter:description" content="This is just a memo">
    

    
        <link rel="alternate" href="/" title="memo-blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/memo-blog/libs/font-awesome5/css/fontawesome.min.css">
    <link rel="stylesheet" href="/memo-blog/libs/font-awesome5/css/fa-brands.min.css">
    <link rel="stylesheet" href="/memo-blog/libs/font-awesome5/css/fa-solid.min.css">
    <link rel="stylesheet" href="/memo-blog/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/memo-blog/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/memo-blog/css/style.css">

    <script src="/memo-blog/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/memo-blog/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/memo-blog/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-155235180-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/memo-blog/" id="logo">
                <i class="logo"></i>
                <span class="site-title">memo-blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/memo-blog/.">Home</a>
                
                    <a class="main-nav-link" href="/memo-blog/archives">Archives</a>
                
                    <a class="main-nav-link" href="/memo-blog/categories">Categories</a>
                
                    <a class="main-nav-link" href="/memo-blog/tags">Tags</a>
                
                    <a class="main-nav-link" href="/memo-blog/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/memo-blog/css/images/avatar.png" />
                            <i class="fas fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="検索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '投稿',
            PAGES: 'Pages',
            CATEGORIES: 'カテゴリ',
            TAGS: 'タグ',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/memo-blog/',
        CONTENT_URL: '/memo-blog/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/memo-blog/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/memo-blog/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="検索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/memo-blog/css/images/avatar.png" />
            <h2 id="name">dobachi</h2>
            <h3 id="title">man of leisure</h3>
            <span id="location"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>Tokyo, Japan</span>
            <a id="follow" target="_blank" href="https://github.com/dobachi">フォローする</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                209
                <span>投稿</span>
            </div>
            <div class="article-info-block">
                229
                <span>タグ</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/dobachi" target="_blank" title="github" class=tooltip>
                            <i class="fab fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/memo-blog/" target="_blank" title="rss" class=tooltip>
                            <i class="fab fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-Error-about-the-memory-configuration-of-Minikube" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2022/01/10/Error-about-the-memory-configuration-of-Minikube/">Error about the memory configuration of Minikube</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2022/01/10/Error-about-the-memory-configuration-of-Minikube/">
            <time datetime="2022-01-10T13:43:27.000Z" itemprop="datePublished">2022-01-10</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Kubernetes/">Kubernetes</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Kubernetes/">Kubernetes</a>, <a class="tag-link" href="/memo-blog/tags/Minikube/">Minikube</a>, <a class="tag-link" href="/memo-blog/tags/Troubleshoot/">Troubleshoot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#現状の結論2022110時点" id="toc-現状の結論2022110時点">現状の結論（2022/1/10時点）</a></li>
<li><a href="#雑記" id="toc-雑記">雑記</a></li>
</ul></li>
<li><a href="#参考" id="toc-参考">参考</a></li>
</ul>
</div>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="現状の結論2022110時点">現状の結論（2022/1/10時点）</span></h2>
<p>解決まで至ってはいなく、状況整理したのみ。</p>
<h2><span id="雑記">雑記</span></h2>
<p><a href="https://github.com/kubernetes/minikube/issues/12842" target="_blank" rel="noopener">minikube 1.23
Your cgroup does not allow setting memory #12842</a>
にも記載されているエラーが以下の環境で生じた。</p>
<p>環境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dobachi@ubu18:~$ minikube version</span><br><span class="line">minikube version: v1.24.0</span><br><span class="line">commit: 76b94fb3c4e8ac5062daf70d60cf03ddcc0a741b</span><br><span class="line"></span><br><span class="line">dobachi@ubu18:~$ cat /etc/lsb-release</span><br><span class="line">DISTRIB_ID=Ubuntu</span><br><span class="line">DISTRIB_RELEASE=18.04</span><br><span class="line">DISTRIB_CODENAME=bionic</span><br><span class="line">DISTRIB_DESCRIPTION="Ubuntu 18.04.6 LTS"</span><br><span class="line"></span><br><span class="line">dobachi@ubu18:~$ uname -a</span><br><span class="line">Linux ubu18 5.4.0-92-generic #103~18.04.2-Ubuntu SMP Wed Dec 1 16:50:36 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line"></span><br><span class="line">dobachi@ubu18:~$ grep cgroup /proc/filesystems</span><br><span class="line">nodev   cgroup</span><br><span class="line">nodev   cgroup2</span><br></pre></td></tr></table></figure>
<p>上記のIssueに記載されている通り、Minikubeでは、cgroupでメモリリミットを設定できるかどうかを確認する際、
以下のような関数を利用する。</p>
<p><a href="https://github.com/kubernetes/minikube/blob/25d17c2dde4920c00b4fe6f42aece999ce92cd5c/pkg/drivers/kic/oci/oci.go#L111-L124" target="_blank" rel="noopener">oci.go#L111-L124</a></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HasMemoryCgroup</span><span class="params">()</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	memcg := <span class="literal">true</span></span><br><span class="line">	<span class="keyword">if</span> runtime.GOOS == <span class="string">"linux"</span> &#123;</span><br><span class="line">		<span class="keyword">var</span> memory <span class="keyword">string</span></span><br><span class="line">		<span class="keyword">if</span> cgroup2, err := IsCgroup2UnifiedMode(); err == <span class="literal">nil</span> &amp;&amp; cgroup2 &#123;</span><br><span class="line">			memory = <span class="string">"/sys/fs/cgroup/memory/memsw.limit_in_bytes"</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> _, err := os.Stat(memory); os.IsNotExist(err) &#123;</span><br><span class="line">			klog.Warning(<span class="string">"Your kernel does not support memory limit capabilities or the cgroup is not mounted."</span>)</span><br><span class="line">			memcg = <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> memcg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以下のファイルをstatしているのだが…</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">memory = <span class="string">"/sys/fs/cgroup/memory/memsw.limit_in_bytes"</span></span><br></pre></td></tr></table></figure>
<p>これは上記環境では存在しない。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dobachi@ubu18:~$ sudo stat /sys/fs/cgroup/memory/memsw.limit_in_bytes</span><br><span class="line">stat: '/sys/fs/cgroup/memory/memsw.limit_in_bytes' を stat できません: そのようなファイルやディレクトリはありません</span><br></pre></td></tr></table></figure>
<p>一方、 <code>/sys/fs/cgroup/memory/memory.soft_limit_in_bytes</code>
なら存在する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dobachi@ubu18:~$ sudo stat /sys/fs/cgroup/memory/memory.soft_limit_in_bytes</span><br><span class="line">  File: /sys/fs/cgroup/memory/memory.soft_limit_in_bytes</span><br><span class="line">  Size: 0               Blocks: 0          IO Block: 4096   通常の空ファイル</span><br><span class="line">Device: 23h/35d Inode: 11          Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2022-01-10 21:39:31.409626300 +0900</span><br><span class="line">Modify: 2022-01-10 21:39:31.409626300 +0900</span><br><span class="line">Change: 2022-01-10 21:39:31.409626300 +0900</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>
<p>なお、 エラーメッセージにある通り、 <a href="https://docs.docker.com/engine/install/linux-postinstall/#your-kernel-does-not-support-cgroup-swap-limit-capabilities" target="_blank" rel="noopener">Your
kernel does not support cgroup swap limit capabilities</a>
にしたがってGRUP設定を変更・反映し、リブートしても状況は変わらない。</p>
<p>PodmanのIssueではあるが、関連する議論が <a href="https://github.com/containers/podman/issues/6365" target="_blank" rel="noopener">podman unable to
limit memory (-m flag) on Ubuntu/Debian distros #6365</a>
に記載されている。</p>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://github.com/kubernetes/minikube/issues/12842" target="_blank" rel="noopener">minikube 1.23
Your cgroup does not allow setting memory #12842</a></li>
<li><a href="https://github.com/kubernetes/minikube/blob/25d17c2dde4920c00b4fe6f42aece999ce92cd5c/pkg/drivers/kic/oci/oci.go#L111-L124" target="_blank" rel="noopener">oci.go#L111-L124</a></li>
<li><a href="https://docs.docker.com/engine/install/linux-postinstall/#your-kernel-does-not-support-cgroup-swap-limit-capabilities" target="_blank" rel="noopener">Your
kernel does not support cgroup swap limit capabilities</a></li>
<li><a href="https://stackoverflow.com/questions/65646317/sys-fs-cgroup-memory-memory-limit-in-bytes-not-present-in-fedora-33" target="_blank" rel="noopener">/sys/fs/cgroup/memory/memory.limit_in_bytes
not present in Fedora 33</a></li>
<li><a href="https://github.com/containers/podman/issues/6365" target="_blank" rel="noopener">podman
unable to limit memory (-m flag) on Ubuntu/Debian distros #6365</a></li>
</ul>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2022/01/10/Error-about-the-memory-configuration-of-Minikube/" data-id="clmdqphbl00b51ws6eezjjawx" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Blogs-about-the-portability-of-kubernetes" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2022/01/07/Blogs-about-the-portability-of-kubernetes/">Blogs about the portability of kubernetes </a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2022/01/07/Blogs-about-the-portability-of-kubernetes/">
            <time datetime="2022-01-07T01:48:03.000Z" itemprop="datePublished">2022-01-07</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Kubernetes/">Kubernetes</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Kubernetes/">Kubernetes</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#kubernetes-を本番環境に適用するための-tips" id="toc-kubernetes-を本番環境に適用するための-tips">Kubernetes
を本番環境に適用するための Tips</a></li>
<li><a href="#kubernetes-8-factors---kubernetes-クラスタの移行から学んだクラスタのポータビリティの重要性と条件" id="toc-kubernetes-8-factors---kubernetes-クラスタの移行から学んだクラスタのポータビリティの重要性と条件">Kubernetes
8 Factors - Kubernetes
クラスタの移行から学んだクラスタのポータビリティの重要性と条件</a></li>
<li><a href="#twelve-factor-app" id="toc-twelve-factor-app">Twelve-Factor App</a></li>
<li><a href="#kubernetesを採用するべき１２の理由" id="toc-kubernetesを採用するべき１２の理由">Kubernetesを採用するべき１２の理由</a></li>
<li><a href="#kubernetesやめました" id="toc-kubernetesやめました">Kubernetes、やめました</a></li>
<li><a href="#多分あなたにkubernetesは必要ない" id="toc-多分あなたにkubernetesは必要ない">多分あなたにKubernetesは必要ない</a></li>
<li><a href="#あなたにkubernetesは必要ですかをkubernetes-meetup-tokyoのコアメンバーが議論" id="toc-あなたにkubernetesは必要ですかをkubernetes-meetup-tokyoのコアメンバーが議論">「あなたにKubernetesは必要ですか？」を、Kubernetes
Meetup Tokyoのコアメンバーが議論</a></li>
<li><a href="#cndo2021kubernetesがない世界とある世界の違いをインフラエンジニアが解説" id="toc-cndo2021kubernetesがない世界とある世界の違いをインフラエンジニアが解説">CNDO2021、Kubernetesがない世界とある世界の違いをインフラエンジニアが解説</a></li>
</ul></li>
<li><a href="#参考" id="toc-参考">参考</a></li>
</ul>
</div>
<h1><span id="メモ">メモ</span></h1>
<p>このメモは、Kubernetesを利用することで以下のポータビリティを得られるのではないか、という点に関する議論を列挙したものである。</p>
<ul>
<li>アプリケーションのポータビリティ
<ul>
<li>あるKubernetesクラスタ上にデプロイした or
可能なアプリケーションを異なるKubernetes環境で実行する</li>
</ul></li>
<li>Kubernetesクラスタのポータビリティ
<ul>
<li>Kubernetesクラスタを様々な環境で実行する</li>
</ul></li>
</ul>
<h2><span id="kubernetesを本番環境に適用するための-tips">Kubernetes
を本番環境に適用するための Tips</span></h2>
<p><a href="https://yoshio3.com/2018/12/06/kubernetes-tips-for-production/" target="_blank" rel="noopener">Kubernetes
を本番環境に適用するための Tips</a>
の中に、アプリケーションのポータビリティに関する議論が含まれている。
具体的には、</p>
<ul>
<li>Kubernetes環境の違い</li>
<li>Kubernetesが同じバージョンでも機能の有効・無効、使える・使えないが異なる</li>
<li>Kubernetesのバージョンが異なると設定ファイルの書き方が同一である保証がない</li>
<li>具体例として、LoadBalancerやVolumeが環境によって異なる</li>
</ul>
<p>ことが挙げられた。</p>
<h2><span id="kubernetes8-factors-kubernetesクラスタの移行から学んだクラスタのポータビリティの重要性と条件">Kubernetes
8 Factors - Kubernetes
クラスタの移行から学んだクラスタのポータビリティの重要性と条件</span></h2>
<p><a href="https://www.wantedly.com/companies/wantedly/post_articles/222009#_=_" target="_blank" rel="noopener">Kubernetes
8 Factors - Kubernetes
クラスタの移行から学んだクラスタのポータビリティの重要性と条件</a>
では、 KubernetesのBreaking Changeに関して言及されていた。
（アプリケーションのポータビリティの話もあるが、Kubernetesクラスタの運用に関する点が言及された記事）</p>
<p>そこそこの頻度（マイナーバージョンアップにおいても、という意味）でも、Breaking
Changeが生じるため、アップデートしていくのが大変だ、と。
小さな規模だったらクラスタ丸ごとデプロイしなおす（※）、という対応も可能だったが、様々な業務が載ってくるとそれも大変、と。</p>
<p>※小さな規模でクラスタ丸ごと都度デプロイしなおす、ということだと、Kubernetesで抽象化する意味が…？ということも考えうるか？</p>
<h2><span id="twelve-factor-app">Twelve-Factor App</span></h2>
<p><a href="https://12factor.net/ja/" target="_blank" rel="noopener">Twelve-Factor App</a>
にはアプリケーションのポータビリティの考えを含む、以下のような「Software
as a Service 」を実現するにあたってのポイントが提言されている。</p>
<ul>
<li>セットアップ自動化のために 宣言的な
フォーマットを使い、プロジェクトに新しく加わった開発者が要する時間とコストを最小化する。</li>
<li>下層のOSへの 依存関係を明確化 し、実行環境間での 移植性を最大化
する。</li>
<li>モダンな クラウドプラットフォーム 上への デプロイ
に適しており、サーバー管理やシステム管理を不要なものにする。</li>
<li>開発環境と本番環境の 差異を最小限 にし、アジリティを最大化する
継続的デプロイ を可能にする。</li>
<li>ツール、アーキテクチャ、開発プラクティスを大幅に変更することなく
スケールアップ できる。</li>
</ul>
<h2><span id="kubernetesを採用するべき12の理由">Kubernetesを採用するべき１２の理由</span></h2>
<p><a href="https://qiita.com/MahoTakara/items/39ed37449e6f0f8f65a7" target="_blank" rel="noopener">Kubernetesを採用するべき１２の理由</a>
にはアプリケーションのポータビリティに関連するKubernetesの利点が記載されている。
一部、Kubernetesクラスタのポータビリティと考えてもよい内容もある。</p>
<blockquote>
<p>理由4
仮想サーバーやベアメタルとハイブリッド構成可能な柔軟な運用基盤</p>
</blockquote>
<blockquote>
<p>理由6 オンプレとクラウドの両方で利用できる運用基盤</p>
</blockquote>
<h2><span id="kubernetes-やめました">Kubernetes、やめました</span></h2>
<p>ポータビリティの直接的な議論ではないが、<a href="http://blog.father.gedow.net/2020/06/03/goodbye-kubernetes/" target="_blank" rel="noopener">Kubernetes、やめました</a>
にはKubernetesを採用しなかったケースの話が記載されている。
Kubernetesの学習コストと効果を天秤にかけた結果、他の技術で目的は達成できるはず、ということ。</p>
<h2><span id="多分あなたにkubernetesは必要ない">多分あなたにKubernetesは必要ない</span></h2>
<p><a href="https://yakst.com/ja/posts/5455" target="_blank" rel="noopener">多分あなたにKubernetesは必要ない</a>
では、KubernetesではなくNomadを利用することにした経緯が記載されている。
Nomadは「オーケストレータ」だがそれで用が足りた、ということのようだ。</p>
<blockquote>
<p>もしあなたが大規模インフラ上に同一サービス群をデプロイする計画をしているのであれば、Kubernetesという道を選んで良いでしょう。ただ、複雑性や運用コストが増えることを肝に命じてください。そしてこういったコストの一部は、Google
Kubernetes EngineやAmazon
EKSのようなマネージドKubernetes環境を利用することで省くことができます。</p>
</blockquote>
<h2><span id="あなたにkubernetesは必要ですかを-kubernetesmeetup-tokyoのコアメンバーが議論">「あなたにKubernetesは必要ですか？」を、Kubernetes
Meetup Tokyoのコアメンバーが議論</span></h2>
<p><a href="https://atmarkit.itmedia.co.jp/ait/articles/1907/23/news120.html" target="_blank" rel="noopener">「あなたにKubernetesは必要ですか？」を、Kubernetes
Meetup Tokyoのコアメンバーが議論</a> では、 <a href="https://yakst.com/ja/posts/5455" target="_blank" rel="noopener">多分あなたにKubernetesは必要ない</a>
の記事を受けて行われた、
日本でKubernetesを本格運用している企業の著名エンジニアによるパネルディスカッションの様子が記載されている。</p>
<p>なお、個人的に気になったのは以下の下り。</p>
<blockquote>
<p>青山氏は、Kubernetesでも、CI/CDツールなどとうまく組み合わせることで、カスタマイズできるPaaSに近い環境を作ることができるとした。また、五十嵐氏は、「開発者と運用支援担当が別チームとして役割分担しやすい」というKubernetesの特徴を生かせれば、開発者が最小限の設定で使えるようにできると話した。</p>
</blockquote>
<blockquote>
<p>ルイス氏は、Kubernetes上でPaaSやFaaSが稼働するような動きが今後進むことで、一部の懸念は解消に向かうのではないかとしている。</p>
</blockquote>
<p>PaaSやFaaSを実現する基盤技術は、単体でクラスタ構成可能なものもあるため、Kubernetes上に載せることで「抽象化の層」が増えることになる。
抽象化の恩恵と複雑性増加の辛さを天秤にかけることになるだろう。</p>
<h2><span id="cndo2021-kubernetesがない世界とある世界の違いをインフラエンジニアが解説">CNDO2021、Kubernetesがない世界とある世界の違いをインフラエンジニアが解説</span></h2>
<p>ポータビリティはあまり関係ない。</p>
<p><a href="https://thinkit.co.jp/article/18557" target="_blank" rel="noopener">CNDO2021、Kubernetesがない世界とある世界の違いをインフラエンジニアが解説</a>
では、
「CI/CDまではできているがKubernetesがない」場合と、Kubernetesがある場合を比較し、
「Kubernetesがなくてもクラウドネイティブ化の目的は達成できうるが、結局はKubernetesらが実現していることを自分でやらないといけない」とした。</p>
<p>なお、クラウドネイティブ化の目的については、CNCFの定義が引用されていた。</p>
<blockquote>
<p>素早く継続的にユーザーに価値を届ける</p>
</blockquote>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://yoshio3.com/2018/12/06/kubernetes-tips-for-production/" target="_blank" rel="noopener">Kubernetes
を本番環境に適用するための Tips</a></li>
<li><a href="https://www.wantedly.com/companies/wantedly/post_articles/222009#_=_" target="_blank" rel="noopener">Kubernetes
8 Factors - Kubernetes
クラスタの移行から学んだクラスタのポータビリティの重要性と条件</a></li>
<li><a href="https://12factor.net/ja/" target="_blank" rel="noopener">Twelve-Factor App</a></li>
<li><a href="https://qiita.com/MahoTakara/items/39ed37449e6f0f8f65a7" target="_blank" rel="noopener">Kubernetesを採用するべき１２の理由</a></li>
<li><a href="http://blog.father.gedow.net/2020/06/03/goodbye-kubernetes/" target="_blank" rel="noopener">Kubernetes、やめました</a></li>
<li><a href="https://yakst.com/ja/posts/5455" target="_blank" rel="noopener">多分あなたにKubernetesは必要ない</a></li>
<li><a href="https://atmarkit.itmedia.co.jp/ait/articles/1907/23/news120.html" target="_blank" rel="noopener">「あなたにKubernetesは必要ですか？」を、Kubernetes
Meetup Tokyoのコアメンバーが議論</a></li>
<li><a href="https://thinkit.co.jp/article/18557" target="_blank" rel="noopener">CNDO2021、Kubernetesがない世界とある世界の違いをインフラエンジニアが解説</a></li>
</ul>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2022/01/07/Blogs-about-the-portability-of-kubernetes/" data-id="clmdqphlp01661ws6obavdnms" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Getting-started-Spark-on-k8s" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2022/01/07/Getting-started-Spark-on-k8s/">Getting started Spark on k8s</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2022/01/07/Getting-started-Spark-on-k8s/">
            <time datetime="2022-01-07T01:20:58.000Z" itemprop="datePublished">2022-01-07</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Spark/">Spark</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Apache-Spark/">Apache Spark</a>, <a class="tag-link" href="/memo-blog/tags/Kubernetes/">Kubernetes</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#基本的な流れ" id="toc-基本的な流れ">基本的な流れ</a>
<ul>
<li><a href="#ビルド" id="toc-ビルド">ビルド</a></li>
<li><a href="#実行" id="toc-実行">実行</a></li>
<li><a href="#補足ビルドされたイメージを起動して内容確認" id="toc-補足ビルドされたイメージを起動して内容確認">（補足）ビルドされたイメージを起動して内容確認</a></li>
<li><a href="#補足minikube使う場合のリソース設定についての注意事項" id="toc-補足minikube使う場合のリソース設定についての注意事項">（補足）Minikube使う場合のリソース設定についての注意事項</a></li>
</ul></li>
<li><a href="#補足kubernetes環境" id="toc-補足kubernetes環境">（補足）Kubernetes環境</a></li>
<li><a href="#補足ボリュームのマウントについて" id="toc-補足ボリュームのマウントについて">（補足）ボリュームのマウントについて</a></li>
<li><a href="#補足上記例ではサービスアカウントを作成しているが" id="toc-補足上記例ではサービスアカウントを作成しているが">（補足）上記例ではサービスアカウントを作成しているが・・・</a></li>
</ul></li>
<li><a href="#参考" id="toc-参考">参考</a></li>
</ul>
</div>
<h1><span id="メモ">メモ</span></h1>
<p>このメモは、Spark3.2.0をKubernetes上で動かすことを簡単に紹介するものである。
なお、日本語での説明としては、 <a href="https://www.slideshare.net/nttdata-tech/apache-spark-kubernetes-osc2021-online-hiroshima-nttdata" target="_blank" rel="noopener">Apache
Spark on Kubernetes入門（Open Source Conference 2021 Online Hiroshima
発表資料）</a> がとても分かりやすいので参考になる。</p>
<h2><span id="基本的な流れ">基本的な流れ</span></h2>
<p>公式の <a href="https://spark.apache.org/docs/latest/running-on-kubernetes.html" target="_blank" rel="noopener">Running
Spark on Kubernetes</a> の通りでよい。</p>
<h3><span id="ビルド">ビルド</span></h3>
<p>まずは、パッケージに含まれているDockerfileを利用して、Dockerイメージを自分でビルドする。
今回はMinikube環境で動かしているので <code>-m</code>
オプションを利用した。</p>
<p>簡易的な例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /opt/spark/default/bin/docker-image-tool.sh -m -t testing build</span></span><br></pre></td></tr></table></figure>
<p>Minikube内のDockerでイメージ一覧を確認すると以下の通り。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">eval</span> $(minikube -p minikube docker-env)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker images</span></span><br><span class="line">REPOSITORY                                TAG           IMAGE ID       CREATED          SIZE</span><br><span class="line">spark                                     testing       e19cebbf23e7   44 minutes ago   602MB</span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<h3><span id="実行">実行</span></h3>
<p>サービスアカウントを作る。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> minikube kubectl -- create serviceaccount spark</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> minikube kubectl -- create clusterrolebinding spark-role --clusterrole=edit --serviceaccount=default:spark --namespace=default</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> minikube kubectl -- get serviceaccount</span></span><br><span class="line">NAME      SECRETS   AGE</span><br><span class="line">default   1         179m</span><br><span class="line">spark     1         2m39s</span><br></pre></td></tr></table></figure>
<p>実行は以下の通り。先ほど作ったサービスアカウントを使用するようにする。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /opt/spark/default/bin/spark-submit --master k8s://https://192.168.49.2:8443 --deploy-mode cluster --name pi --class org.apache.spark.examples.SparkPi --conf spark.executor.instances=2 --conf spark.kubernetes.container.image=spark:testing --conf spark.kubernetes.authenticate.driver.serviceAccountName=spark <span class="built_in">local</span>:///opt/spark/examples/jars/spark-examples_2.12-3.2.0.jar</span></span><br></pre></td></tr></table></figure>
<p>なお、今回はMinikube上で実行しており、Jarファイルとして指定するのはMinikube内で起動したドライバのコンテナ内のローカルファイルシステムパスである。試しに、当該近店をアタッチして起動するとわかる。</p>
<p>ドライバのログを確認する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> minikube kubectl -- logs pi-43bff77e450bdba3-driver</span></span><br><span class="line">(snip)</span><br><span class="line">22/01/10 17:32:02 INFO TaskSchedulerImpl: Killing all running tasks in stage 0: Stage finished</span><br><span class="line">22/01/10 17:32:02 INFO DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 0.824388 s</span><br><span class="line">Pi is roughly 3.142475712378562</span><br><span class="line">22/01/10 17:32:02 INFO SparkUI: Stopped Spark web UI at http://pi-43bff77e450bdba3-driver-svc.default.svc:4040</span><br><span class="line">22/01/10 17:32:02 INFO KubernetesClusterSchedulerBackend: Shutting down all executors</span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p>pi計算の結果がログに出力されているのがわかる。</p>
<h3><span id="補足ビルドされたイメージを起動して内容確認">（補足）ビルドされたイメージを起動して内容確認</span></h3>
<p>以下は、MinikubeのDockerを利用しビルドしたイメージのコンテナを起動して、シェルをアタッチした例。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">eval</span> $(minikube -p minikube docker-env)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -it --rm spark:testing /bin/bash</span></span><br></pre></td></tr></table></figure>
<h3><span id="補足minikube使う場合のリソース設定についての注意事項">（補足）Minikube使う場合のリソース設定についての注意事項</span></h3>
<p><a href="https://spark.apache.org/docs/latest/running-on-kubernetes.html#prerequisites" target="_blank" rel="noopener">Prerequisites</a>
の通り、Minikube等を使うようであれば、リソースに対して注意がある。
以下、Minikube立ち上げ例。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> minikube start --memory=<span class="string">'4g'</span> --cpus=3</span></span><br></pre></td></tr></table></figure>
<h2><span id="補足kubernetes環境">（補足）Kubernetes環境</span></h2>
<p>動作確認のためには、Kubernetes環境が必要である。</p>
<p><a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener">minikube start</a>
あたりを参考に環境構築しておくこと。</p>
<h2><span id="補足ボリュームのマウントについて">（補足）ボリュームのマウントについて</span></h2>
<p><a href="https://spark.apache.org/docs/latest/running-on-kubernetes.html#volume-mounts" target="_blank" rel="noopener">volume-mounts</a>
の通り、DriverやExecutorのPodにボリュームをマウントできるのだが、
HostPathに関するリスクがあるようだ。 <a href="https://kubernetes.io/docs/concepts/storage/volumes/#hostpath" target="_blank" rel="noopener">KubernetesのhostPathについて</a>
を参照。</p>
<h2><span id="補足上記例ではサービスアカウントを作成しているが">（補足）上記例ではサービスアカウントを作成しているが・・・</span></h2>
<p>もし <code>default</code>
サービスアカウントを利用すると以下に記載されたのと同様のエラーを生じる。</p>
<p><a href="https://stackoverflow.com/questions/55498702/how-to-fix-forbiddenconfigured-service-account-doesnt-have-access-with-spark" target="_blank" rel="noopener">How
to fix "Forbidden!Configured service account doesn't have access" with
Spark on Kubernetes?</a></p>
<p>そこで、あらかじめサービスアカウントを作成して使うようにした。</p>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://spark.apache.org/docs/latest/running-on-kubernetes.html" target="_blank" rel="noopener">Running
Spark on Kubernetes</a></li>
<li><a href="https://spark.apache.org/docs/latest/running-on-kubernetes.html#volume-mounts" target="_blank" rel="noopener">volume-mounts</a></li>
<li><a href="https://kubernetes.io/docs/concepts/storage/volumes/#hostpath" target="_blank" rel="noopener">KubernetesのhostPathについて</a></li>
<li><a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener">minikube
start</a></li>
<li><a href="https://www.slideshare.net/nttdata-tech/apache-spark-kubernetes-osc2021-online-hiroshima-nttdata" target="_blank" rel="noopener">Apache
Spark on Kubernetes入門（Open Source Conference 2021 Online Hiroshima
発表資料）</a></li>
<li><a href="https://stackoverflow.com/questions/55498702/how-to-fix-forbiddenconfigured-service-account-doesnt-have-access-with-spark" target="_blank" rel="noopener">How
to fix "Forbidden!Configured service account doesn't have access" with
Spark on Kubernetes?</a></li>
</ul>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2022/01/07/Getting-started-Spark-on-k8s/" data-id="clmdqphc200c11ws6s03jtaee" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Delta-Sharing-with-MinIO" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2021/10/22/Delta-Sharing-with-MinIO/">Delta Sharing with MinIO</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2021/10/22/Delta-Sharing-with-MinIO/">
            <time datetime="2021-10-22T02:19:39.000Z" itemprop="datePublished">2021-10-22</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/Delta-Sharing/">Delta Sharing</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Delta-Sharing/">Delta Sharing</a>, <a class="tag-link" href="/memo-blog/tags/Minio/">Minio</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#minioの起動" id="toc-minioの起動">MinIOの起動</a></li>
<li><a href="#delta-sharingサーバの起動" id="toc-delta-sharingサーバの起動">Delta Sharingサーバの起動</a>
<ul>
<li><a href="#リリースされたパッケージを利用する場合" id="toc-リリースされたパッケージを利用する場合">リリースされたパッケージを利用する場合</a></li>
<li><a href="#現在のmainブランチを利用する場合" id="toc-現在のmainブランチを利用する場合">現在のmainブランチを利用する場合</a></li>
<li><a href="#設定ファイルの作成" id="toc-設定ファイルの作成">設定ファイルの作成</a></li>
<li><a href="#delta-sharingサーバの起動-1" id="toc-delta-sharingサーバの起動-1">Delta Sharingサーバの起動</a></li>
<li><a href="#delta-sharingのpythonクライアントを利用してアクセスする" id="toc-delta-sharingのpythonクライアントを利用してアクセスする">Delta
SharingのPythonクライアントを利用してアクセスする。</a></li>
</ul></li>
<li><a href="#トラブルシュート" id="toc-トラブルシュート">トラブルシュート</a>
<ul>
<li><a href="#パス指定方法の誤り" id="toc-パス指定方法の誤り">パス指定方法の誤り</a></li>
</ul></li>
</ul></li>
<li><a href="#参考" id="toc-参考">参考</a>
<ul>
<li><a href="#minio" id="toc-minio">MinIO</a></li>
<li><a href="#delta-sharing" id="toc-delta-sharing">Delta
Sharing</a></li>
<li><a href="#sample-code" id="toc-sample-code">Sample code</a></li>
</ul></li>
</ul>
</div>
<h1><span id="メモ">メモ</span></h1>
<p>Delta SharingはAWS S3、Azure Blob Storage、Azure Data Lake Storage
Gen2に対応している。 そこで、AWS
S3互換のストレージソフトウェアだったら使えるのではないか、ということで、
<a href="https://min.io/" target="_blank" rel="noopener">MinIO</a> を利用してみることにする。</p>
<p>もろもろのサンプルコードは <a href="https://github.com/dobachi/DeltaSharingMinioExample" target="_blank" rel="noopener">dobachi
DeltaSharingMinioExample</a> にある。</p>
<h2><span id="minioの起動">MinIOの起動</span></h2>
<p><a href="https://docs.min.io/docs/minio-quickstart-guide.html" target="_blank" rel="noopener">MinIO
Quickstart Guide</a> を参考に、手元でMinIOサーバを構成する。
以下は手順の一例。</p>
<p>バイナリをダウンロードし、データ保存ディレクトリを作って立ち上げる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p ~/Minio</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/Minio</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://dl.min.io/server/minio/release/linux-amd64/minio</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p data</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod +x minio</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./minio server data</span></span><br></pre></td></tr></table></figure>
<p>コンソールにメッセージが色々出る。
今回はテスト用なので特段指定しなかったが、Rootユーザの名称、パスワードが表示されているはずである。
これは後ほど、AWS
S3プロトコルでMinIOサービスにアクセスする際のID、シークレットキーとしても利用する。</p>
<p>MinIOのクライアントをダウンロードし、エイリアスを設定する。
別のターミナルを開く。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/Minio</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://dl.min.io/client/mc/release/linux-amd64/mc</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod +x mc</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./mc <span class="built_in">alias</span> <span class="built_in">set</span> myminio http://your_host:9000 minioadmin minioadmin</span></span><br></pre></td></tr></table></figure>
<p><code>your_host</code>のところは各自の環境に合わせて変更してほしい。
これにより、<code>myminio</code>
という名前でエイリアスが作成された。</p>
<p>ちなみに、http://your_host:40915/ からアクセスできる。</p>
<p>なお、試しにAWS S3クライアントで接続してみることにする。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./mc mb data/test_bucket</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'test'</span> &gt; test.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> AWS_ACCESS_KEY_ID=minioadmin</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> AWS_SECRET_ACCESS_KEY=minioadmin</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> aws --endpoint-url http://localhost:9000 s3 ls</span></span><br><span class="line">2021-10-22 12:26:13 test_bucket</span><br><span class="line"><span class="meta">$</span><span class="bash"> aws --endpoint-url http://localhost:9000 s3 cp test.txt s3://test_bucket/test.txt</span></span><br></pre></td></tr></table></figure>
<p>ここで、今回はMinioを利用していることから、エンドポイントURLを指定していることに注意。</p>
<figure>
<img src="images/minio_test_bucket.png" alt="テストバケットに入ったデータ">
<figcaption aria-hidden="true">テストバケットに入ったデータ</figcaption>
</figure>
<h2><span id="delta-sharingサーバの起動">Delta Sharingサーバの起動</span></h2>
<p><a href="https://github.com/delta-io/delta-sharing#delta-sharing-reference-server" target="_blank" rel="noopener">Delta
Sharing Reference Server</a> を参考に、サーバを起動する。</p>
<h3><span id="リリースされたパッケージを利用する場合">リリースされたパッケージを利用する場合</span></h3>
<p>パッケージを公式リリースからダウンロードして展開する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p ~/DeltaSharing</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/DeltaSharing</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://github.com/delta-io/delta-sharing/releases/download/v0.2.0/delta-sharing-server-0.2.0.zip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> unzip delta-sharing-server-0.2.0.zip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> delta-sharing-server-0.2.0</span></span><br></pre></td></tr></table></figure>
<h3><span id="現在のmainブランチを利用する場合">現在のmainブランチを利用する場合</span></h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p ~/Sources/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/Sources</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> git@github.com:delta-io/delta-sharing.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> delta-sharing </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./build/sbt server/universal:packageBin</span></span><br></pre></td></tr></table></figure>
<p><code>server/target/universal/delta-sharing-server-x.y.z-SNAPSHOT.zip</code>
にパッケージが保存される。
なお、<code>x.y.z</code>にはバージョン情報が入る。ここでは<code>0.3.0</code>とする。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cp server/target/universal/delta-sharing-server-x.y.z-SNAPSHOT.zip ~/DeltaSharing/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/DeltaSharing/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> unzip delta-sharing-server-0.3.0-SNAPSHOT.zip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> delta-sharing-server-0.3.0-SNAPSHOT</span></span><br></pre></td></tr></table></figure>
<h3><span id="設定ファイルの作成">設定ファイルの作成</span></h3>
<p>Delta
Sharingはデータストアのアクセスについて、間接的にHadoopライブラリに依存している。
そこで、AWS S3プロトコルでアクセスするためのHadoop設定ファイル
<code>core-site.xml</code> を作成する。</p>
<p>conf/core-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.s3a.endpoint<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.s3a.path.style.access<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ここではエンドポイントURL、パス指定方法の設定をしている。
なおパス指定方法の設定行わないと、Delta
SharingからMinIOサーバにリクエストを送る際に、 ホスト名が
<code>bucket_name.host</code> のような指定になってしまい、
<code>400 But Reuqest</code> エラーを生じてしまう。 詳しくは、
トラブルシュートの節を参照。</p>
<p>続いて、Delta Sharingサーバの設定ファイルを作成する。
以下は参考。</p>
<p>conf/delta-sharing-server.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The format version of this config file</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1</span></span><br><span class="line"><span class="comment"># Config shares/schemas/tables to share</span></span><br><span class="line"><span class="attr">shares:</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">"share1"</span></span><br><span class="line"><span class="attr">  schemas:</span></span><br><span class="line"><span class="attr">  - name:</span> <span class="string">"schema1"</span></span><br><span class="line"><span class="attr">    tables:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">"table1"</span></span><br><span class="line"><span class="attr">      location:</span> <span class="string">"s3a://test_bucket/delta_table"</span></span><br><span class="line"><span class="comment"># Set the host name that the server will use</span></span><br><span class="line"><span class="attr">host:</span> <span class="string">"localhost"</span></span><br><span class="line"><span class="comment"># Set the port that the server will listen on</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">18080</span></span><br><span class="line"><span class="comment"># Set the url prefix for the REST APIs</span></span><br><span class="line"><span class="attr">endpoint:</span> <span class="string">"/delta-sharing"</span></span><br><span class="line"><span class="comment"># Set the timeout of S3 presigned url in seconds</span></span><br><span class="line"><span class="attr">preSignedUrlTimeoutSeconds:</span> <span class="number">900</span></span><br><span class="line"><span class="comment"># How many tables to cache in the server</span></span><br><span class="line"><span class="attr">deltaTableCacheSize:</span> <span class="number">10</span></span><br><span class="line"><span class="comment"># Whether we can accept working with a stale version of the table. This is useful when sharing</span></span><br><span class="line"><span class="comment"># static tables that will never be changed.</span></span><br><span class="line"><span class="attr">stalenessAcceptable:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># Whether to evaluate user provided `predicateHints`</span></span><br><span class="line"><span class="attr">evaluatePredicateHints:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>ここで <code>s3a://test_bucket/delta_table</code>
に指定しているのがMinIO内のデータである。 ここでは予め Delta
Lakeフォーマットのデータを保存してあるものとする。</p>
<h3><span id="delta-sharingサーバの起動">Delta Sharingサーバの起動</span></h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./bin/delta-sharing-server -- --conf conf/delta-sharing-server.yaml</span></span><br></pre></td></tr></table></figure>
<h3><span id="deltasharingのpythonクライアントを利用してアクセスする">Delta
SharingのPythonクライアントを利用してアクセスする。</span></h3>
<p>まずクライアント用のプロファイルを準備する。</p>
<p>minio.share</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"shareCredentialsVersion"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">"endpoint"</span>: <span class="string">"http://localhost:18080/delta-sharing/"</span>,</span><br><span class="line">  <span class="attr">"bearerToken"</span>: <span class="string">""</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>これを利用しながら、テーブルにアクセスする。</p>
<figure>
<img src="images/20211022_delta_sharing_client.png" alt="Delta Sharingのクライアントでアクセス">
<figcaption aria-hidden="true">Delta
Sharingのクライアントでアクセス</figcaption>
</figure>
<p>ここでは試しにPandas DataFrameとして読み取っている。</p>
<h2><span id="トラブルシュート">トラブルシュート</span></h2>
<h3><span id="パス指定方法の誤り">パス指定方法の誤り</span></h3>
<p>Hadoop設定上で、パス指定方法の設定を行わないと、以下のようなエラーが生じる。</p>
<p>Delta Sharingサーバ側のエラー</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Caused by: org.apache.hadoop.fs.s3a.AWSS3IOException: doesBucketExist on test: com.amazonaws.services.s3.model.AmazonS3Exception: Bad Request (Service: Amazon S3; Status Code: 400; Error Code: 400 Bad Request; Request ID: null; S3 Extended Request ID: null), S3 Extended Request ID: null: Bad Request (Service: Amazon S3; Status Code: 400; Error Code: 400 Bad Request; Request ID: null; S3 Extended Request ID: null)</span><br><span class="line">        at org.apache.hadoop.fs.s3a.S3AUtils.translateException(S3AUtils.java:194)</span><br><span class="line">        at org.apache.hadoop.fs.s3a.S3AFileSystem.verifyBucketExists(S3AFileSystem.java:335)</span><br><span class="line">        at org.apache.hadoop.fs.s3a.S3AFileSystem.initialize(S3AFileSystem.java:280)</span><br><span class="line">        at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:3247)</span><br><span class="line">        at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:121)</span><br><span class="line">        at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:3296)</span><br><span class="line">        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:3264)</span><br><span class="line">        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:475)</span><br><span class="line">        at org.apache.hadoop.fs.Path.getFileSystem(Path.java:356)</span><br><span class="line">        at io.delta.standalone.internal.DeltaSharedTable.$anonfun$deltaLog$1(DeltaSharedTableLoader.scala:76)</span><br><span class="line">        at io.delta.standalone.internal.DeltaSharedTable.withClassLoader(DeltaSharedTableLoader.scala:95)</span><br><span class="line">        at io.delta.standalone.internal.DeltaSharedTable.&lt;init&gt;(DeltaSharedTableLoader.scala:74)</span><br><span class="line">        at io.delta.standalone.internal.DeltaSharedTableLoader.$anonfun$loadTable$1(DeltaSharedTableLoader.scala:53)</span><br><span class="line">        at com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4693)</span><br><span class="line">        at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3445)</span><br><span class="line">        at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2194)</span><br><span class="line">        ... 60 more</span><br></pre></td></tr></table></figure>
<p>Minioサーバ側でのエラー</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./mc admin trace myminio --debug -v</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">test.localhost:9000 [REQUEST methodNotAllowedHandler.func1] [2021-10-22T03:57:08:000] [Client IP: 127.0.0.1]</span><br><span class="line">test.localhost:9000 HEAD /</span><br><span class="line">test.localhost:9000 Proto: HTTP/1.1</span><br><span class="line">test.localhost:9000 Host: test.localhost:9000</span><br><span class="line">test.localhost:9000 Amz-Sdk-Invocation-Id: 821962e2-e1f8-31d7-4d0d-431529a3725c</span><br><span class="line">test.localhost:9000 Authorization: AWS4-HMAC-SHA256 Credential=minioadmin/20211022/us-east-1/s3/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-retry;content-type;host;user-agent;x-amz-content-sha256;x-amz-date, Signature=07977380f3fd92b149e8c60937554fc5ee5287a0863c101431ef51aa3968c37b</span><br><span class="line">test.localhost:9000 Connection: Keep-Alive</span><br><span class="line">test.localhost:9000 Content-Type: application/octet-stream</span><br><span class="line">test.localhost:9000 X-Amz-Content-Sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855</span><br><span class="line">test.localhost:9000 Amz-Sdk-Retry: 0/0/500</span><br><span class="line">test.localhost:9000 Content-Length: 0</span><br><span class="line">test.localhost:9000 User-Agent: Hadoop 2.10.1, aws-sdk-java/1.11.271 Linux/4.19.104-microsoft-standard OpenJDK_64-Bit_Server_VM/11.0.12+7-LTS java/11.0.12 scala/2.12.10</span><br><span class="line">test.localhost:9000 X-Amz-Date: 20211022T035708Z</span><br><span class="line">test.localhost:9000</span><br><span class="line">test.localhost:9000 [RESPONSE] [2021-10-22T03:57:08:000] [ Duration 66µs  ↑ 137 B  ↓ 375 B ]</span><br><span class="line">test.localhost:9000 400 Bad Request</span><br><span class="line">test.localhost:9000 Content-Type: application/xml</span><br><span class="line">test.localhost:9000 Server: MinIO</span><br><span class="line">test.localhost:9000 Vary: Origin</span><br><span class="line">test.localhost:9000 Accept-Ranges: bytes</span><br><span class="line">test.localhost:9000 Content-Length: 261</span><br><span class="line">test.localhost:9000 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;Error&gt;&lt;Code&gt;BadRequest&lt;/Code&gt;&lt;Message&gt;An error occurred when parsing the HTTP request HEAD at &amp;#39;/&amp;#39;&lt;/Message&gt;&lt;Resource&gt;/&lt;/Resource&gt;&lt;RequestId&gt;&lt;/RequestId&gt;&lt;HostId&gt;baec9ee7-bfb0-441b-a70a-493bfd80d745&lt;/HostId&gt;&lt;/Error&gt;</span><br></pre></td></tr></table></figure>
<h1><span id="参考">参考</span></h1>
<h2><span id="minio">MinIO</span></h2>
<ul>
<li><a href="https://min.io/" target="_blank" rel="noopener">MinIO</a></li>
<li><a href="https://docs.min.io/docs/minio-quickstart-guide.html" target="_blank" rel="noopener">MinIO
Quickstart Guide</a></li>
</ul>
<h2><span id="delta-sharing">Delta Sharing</span></h2>
<ul>
<li><a href="https://github.com/delta-io/delta-sharing#delta-sharing-reference-server" target="_blank" rel="noopener">Delta
Sharing Reference Server</a></li>
</ul>
<h2><span id="sample-code">Sample code</span></h2>
<ul>
<li><a href="https://github.com/dobachi/DeltaSharingMinioExample" target="_blank" rel="noopener">dobachi
DeltaSharingMinioExample</a></li>
</ul>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2021/10/22/Delta-Sharing-with-MinIO/" data-id="clmdqphbd00al1ws68nlc8hoj" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Getting-Started-of-Delta-Sharing" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2021/09/10/Getting-Started-of-Delta-Sharing/">Getting Started of Delta Sharing</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2021/09/10/Getting-Started-of-Delta-Sharing/">
            <time datetime="2021-09-10T02:14:58.000Z" itemprop="datePublished">2021-09-10</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/Delta-Sharing/">Delta Sharing</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Delta-Sharing/">Delta Sharing</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#特徴" id="toc-特徴">特徴</a></li>
<li><a href="#リファレンスサーバを動かす" id="toc-リファレンスサーバを動かす">リファレンスサーバを動かす</a>
<ul>
<li><a href="#前提" id="toc-前提">前提</a></li>
<li><a href="#サンプルスクリプト" id="toc-サンプルスクリプト">サンプルスクリプト</a></li>
<li><a href="#基本的な動作" id="toc-基本的な動作">基本的な動作</a></li>
<li><a href="#プロファイルの場所にurlを指定できるか" id="toc-プロファイルの場所にurlを指定できるか">プロファイルの場所にURLを指定できるか？</a></li>
<li><a href="#認可" id="toc-認可">認可</a></li>
<li><a href="#rest-apiでアクセス" id="toc-rest-apiでアクセス">REST
APIでアクセス</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://github.com/delta-io/delta-sharing" target="_blank" rel="noopener">公式GitHub</a></li>
<li><a href="https://github.com/delta-io/delta-sharing#authorization" target="_blank" rel="noopener">Autorization</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#rest-apis" target="_blank" rel="noopener">REST
API</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#list-shares" target="_blank" rel="noopener">Shareの取得</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#query-table-version" target="_blank" rel="noopener">Tableバージョンの取得</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#query-table-metadata" target="_blank" rel="noopener">テーブルメタデータの取得</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#read-data-from-a-table" target="_blank" rel="noopener">テーブルデータの読み出し</a></li>
</ul>
<ul>
<li><a href="https://github.com/dobachi/delta_sharing_example" target="_blank" rel="noopener">Delta
Sharing Example</a></li>
<li><a href="https://github.com/dobachi/delta_sharing_example/blob/main/CreateDeltaTableS3.ipynb" target="_blank" rel="noopener">CreateDeltaTableS3</a></li>
<li><a href="https://github.com/dobachi/delta_sharing_example/blob/main/bin/pyspark_jupyter.sh" target="_blank" rel="noopener">pyspark_jupyter</a></li>
<li><a href="https://github.com/dobachi/delta_sharing_example/blob/main/PythonConnectorExample.ipynb" target="_blank" rel="noopener">PythonConnectorExample</a></li>
<li><a href="https://github.com/dobachi/delta_sharing_example/blob/main/TestProfileOnS3.ipynb" target="_blank" rel="noopener">TestProfileOnS3</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="特徴">特徴</span></h2>
<p>特徴については以下を参照。</p>
<iframe src="https://onedrive.live.com/embed?cid=C6E669622F542498&amp;resid=C6E669622F542498%21102556&amp;authkey=AHO18y2xg6wyASo&amp;em=2" width="402" height="327" frameborder="0" scrolling="no">
</iframe>
<h2><span id="リファレンスサーバを動かす">リファレンスサーバを動かす</span></h2>
<p><a href="https://github.com/delta-io/delta-sharing" target="_blank" rel="noopener">公式GitHub</a>
のREADMEを参考に、リファレンスサーバを動かす。</p>
<h3><span id="前提">前提</span></h3>
<ul>
<li>OS: CentOS Linux release 7.8.2003 (Core)、CentOS Linux release
7.9.2009 (Core)</li>
<li>必要なライブラリ
<ul>
<li>bzip2-devel、readline-devel、openssl-devel、sqlite-devel、libffi-devel</li>
</ul></li>
<li>Python: 3.7.10
<ul>
<li>pipでjupyter labを入れておく。</li>
</ul></li>
<li>Spark:3.1.2 w/ Hadoop3.2
<ul>
<li>pipか公式サイトからダウンロードしたパッケージを利用してインストールしておく。</li>
<li>今回は簡易的な動作確認のため、Spark単体（ローカルモード）で動作させる。Hadoopとの連係はさせない。</li>
</ul></li>
</ul>
<h3><span id="サンプルスクリプト">サンプルスクリプト</span></h3>
<p><a href="https://github.com/dobachi/delta_sharing_example" target="_blank" rel="noopener">Delta
Sharing Example</a>
にこの記事で取り扱うサンプルスクリプト（Jupyterのノートブック）を置いてある。
なお、このプロジェクトには、Jupyter
LabをPySparkと一緒に起動するサンプル補助スクリプト
<code>./bin/pyspark_jupyter.sh</code> が入っている。
適宜編集して利用されたし。</p>
<p>以降の手順では、このノートブック群を利用した例を示す。
利用する場合はサブモジュールごと以下のようにクローンすると便利。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p -/Sources</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> -/Sources</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> --recursive https://github.com/dobachi/delta_sharing_example.git</span></span><br></pre></td></tr></table></figure>
<h4><span id="profileについて">.profileについて</span></h4>
<p>なお、この補助スクリプトは同一ディレクトリに <code>.profile</code>
があれば、それを読み込むようになっている。 特に、環境変数
<code>OPTIONS</code> や <code>S3_TEST_URL</code>
に個人的な値を設定するために利用するとよい。</p>
<h4><span id="profileで設定する環境変数について">.profileで設定する環境変数について</span></h4>
<ul>
<li><code>OPTIONS</code> : Jupyter
Lab起動時に、Sparkに渡すオプションを設定するために用意した。</li>
<li><code>S3_TEST_URL</code> :
ノートブック内で読み書き動作確認用に用いるS3のURLを設定するために用意した。</li>
</ul>
<h3><span id="基本的な動作">基本的な動作</span></h3>
<p>以下の流れで試す。</p>
<ul>
<li>S3上にサンプルデータを作成する</li>
<li>手元のマシンでDelta Sharingのサーバを立ち上げる</li>
<li>githubからクローンしたライブラリをローカル環境にインストール</li>
<li>S3に置いたサンプルデータをDelta Sharingのサーバ経由で取得する</li>
</ul>
<h4><span id="s3上にサンプルデータを作成する">S3上にサンプルデータを作成する</span></h4>
<p>まずはS3上にデータを置く。なんの手段でも良いが、S3へのアクセスロールを持つEC2インスタンス上で
<a href="https://github.com/dobachi/delta_sharing_example/blob/main/CreateDeltaTableS3.ipynb" target="_blank" rel="noopener">CreateDeltaTableS3</a>
を実行する。</p>
<p>なお、PySparkをJupyter Labで起動する補助するスクリプトの例が<a href="https://github.com/dobachi/delta_sharing_example/blob/main/bin/pyspark_jupyter.sh" target="_blank" rel="noopener">pyspark_jupyter</a>に載っている。
<a href="https://github.com/dobachi/delta_sharing_example/blob/main/CreateDeltaTableS3.ipynb" target="_blank" rel="noopener">CreateDeltaTableS3</a>
のレポジトリにおいても当該スクリプトがサブモジュールとして読み込まれる。</p>
<h4><span id="手元のマシンでdeltasharingのサーバを立ち上げる">手元のマシンでDelta
Sharingのサーバを立ち上げる</span></h4>
<p>つづいて、Delta Sharingのソースコードをクローンする。
なお、公式でリリースされたパッケージを用いてもよいのだが、 Delta
Sharingはまだプロダクトが若く、変更も多いためmainブランチを
パッケージ化して用いることにする。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p -/Sources</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> -/Sources</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/delta-io/delta-sharing.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> delta-sharing</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./build/sbt server/universal:packageBin</span></span><br></pre></td></tr></table></figure>
<p>これで
<code>server/target/universal/delta-sharing-server-0.3.0-SNAPSHOT.zip</code>
ができたはず。（2021/9現在。これ以降だと、バージョンが上がっている可能性がある）
これを適当なディレクトリに展開して用いるようにする。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p ~/DeltaSharing</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp server/target/universal/delta-sharing-server-0.3.0-SNAPSHOT.zip ~/DeltaSharing</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/DeltaSharing/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">if</span> [ -d delta-sharing-server-0.3.0-SNAPSHOT ]; <span class="keyword">then</span> rm -r delta-sharing-server-0.3.0-SNAPSHOT; <span class="keyword">fi</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> unzip delta-sharing-server-0.3.0-SNAPSHOT.zip</span></span><br></pre></td></tr></table></figure>
<p>展開したパッケージの中に、設定のテンプレートが入っているのでコピーして
自分の環境に合わせて編集する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/DeltaSharing/delta-sharing-server-0.2.0-SNAPSHOT</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp conf/delta-sharing-server.yaml&#123;.template,&#125;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim conf/delta-sharing-server.yaml</span></span><br></pre></td></tr></table></figure>
<p>設定ファイルの例</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The format version of this config file</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1</span></span><br><span class="line"><span class="comment"># Config shares/schemas/tables to share</span></span><br><span class="line"><span class="attr">shares:</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">"share1"</span></span><br><span class="line"><span class="attr">  schemas:</span></span><br><span class="line"><span class="attr">  - name:</span> <span class="string">"schema1"</span></span><br><span class="line"><span class="attr">    tables:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">"table1"</span></span><br><span class="line"><span class="attr">      location:</span> <span class="string">"s3a://&lt;your configuration&gt;"</span></span><br><span class="line"><span class="comment"># Set the host name that the server will use</span></span><br><span class="line"><span class="attr">host:</span> <span class="string">"localhost"</span></span><br><span class="line"><span class="comment"># Set the port that the server will listen on</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="comment"># Set the url prefix for the REST APIs</span></span><br><span class="line"><span class="attr">endpoint:</span> <span class="string">"/delta-sharing"</span></span><br><span class="line"><span class="comment"># Set the timeout of S3 presigned url in seconds</span></span><br><span class="line"><span class="attr">preSignedUrlTimeoutSeconds:</span> <span class="number">900</span></span><br><span class="line"><span class="comment"># How many tables to cache in the server</span></span><br><span class="line"><span class="attr">deltaTableCacheSize:</span> <span class="number">10</span></span><br><span class="line"><span class="comment"># Whether we can accept working with a stale version of the table. This is useful when sharing</span></span><br><span class="line"><span class="comment"># static tables that will never be changed.</span></span><br><span class="line"><span class="attr">stalenessAcceptable:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># Whether to evaluate user provided `predicateHints`</span></span><br><span class="line"><span class="attr">evaluatePredicateHints:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>サーバを起動する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./bin/delta-sharing-server -- --config conf/delta-sharing-server.yaml</span></span><br></pre></td></tr></table></figure>
<h4><span id="githubからクローンしたライブラリをローカル環境にインストール">githubからクローンしたライブラリをローカル環境にインストール</span></h4>
<p>起動したサーバとは別のターミナルを開き、Pythonクライアントを試す。</p>
<p>先ほどクローンしたDelta Sharingのレポジトリを利用し、
venvなどで構築した環境下にpipでdelta
sharingのPythonクライアントライブラリをインストールする。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip install ~/Sources/delta-sharing/python/</span></span><br></pre></td></tr></table></figure>
<p>なお、もしすでに一度インストールしたことがあるようであれば、アップデートするようにするなど工夫すること。</p>
<p>つづいて、Spark用のパッケージを作る。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/Sources/delta-sharing</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./build/sbt spark/package</span></span><br></pre></td></tr></table></figure>
<p><code>spark/target/scala-2.12/delta-sharing-spark_2.12-0.3.0-SNAPSHOT.jar</code>
にJarファイルができる。</p>
<p>これをコネクタの起動時にロードするようにする。
例えば、PySparkのJupyter Lab起動時に以下のようなオプションを渡す。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--jars /home/centos/Sources/delta-sharing/spark/target/scala-2.12/delta-sharing-spark_2.12-0.3.0-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<p>のような</p>
<h4><span id="s3に置いたサンプルデータをdeltasharingのサーバ経由で取得する">S3に置いたサンプルデータをDelta
Sharingのサーバ経由で取得する</span></h4>
<p><a href="https://github.com/dobachi/delta_sharing_example/blob/main/PythonConnectorExample.ipynb" target="_blank" rel="noopener">PythonConnectorExample</a>
にPythonのクライアントライブラリを用いた例を示す。 Pandas
DataFrameで取得する例を掲載している。</p>
<p>上記スクリプト内でも利用している通り、クライアントがアクセスするためには、
以下のようなプロファイルを渡す必要がある。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"shareCredentialsVersion"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">"endpoint"</span>: <span class="string">"http://localhost:80/delta-sharing/"</span>,</span><br><span class="line">  <span class="attr">"bearerToken"</span>: <span class="string">""</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>このプロファイルは以下の通り、ファイルのPATH等を渡すか、<code>delta_sharing.protocol.DeltaSharingProfile</code>インスタンスを渡すかすれば良さそう。
後者の場合、JSONテキストから生成できる。</p>
<p>delta_sharing/delta_sharing.py:92</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, profile: Union[str, BinaryIO, TextIO, Path, DeltaSharingProfile])</span>:</span></span><br></pre></td></tr></table></figure>
<p>一方、 <code>delta_sharing.delta_sharing.load_as_pandas</code>
メソッドを用いて、 Pandas
DataFrameで取得する場合は、その引数に渡すプロファイルはURLのテキストが期待されている。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_as_pandas</span><span class="params">(url: str)</span> -&gt; pd.DataFrame:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Load the shared table using the give url as a pandas DataFrame.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param url: a url under the format "&lt;profile&gt;#&lt;share&gt;.&lt;schema&gt;.&lt;table&gt;"</span></span><br><span class="line"><span class="string">    :return: A pandas DataFrame representing the shared table.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    profile_json, share, schema, table = _parse_url(url)</span><br><span class="line">    profile = DeltaSharingProfile.read_from_file(profile_json)</span><br><span class="line">    <span class="keyword">return</span> DeltaSharingReader(</span><br><span class="line">        table=Table(name=table, share=share, schema=schema),</span><br><span class="line">        rest_client=DataSharingRestClient(profile),</span><br><span class="line">    ).to_pandas()</span><br></pre></td></tr></table></figure>
<p>クライアントと同様に、JSONのテキストでも受け付けられるようにしたら便利か。
そもそもプロファイルとスキーマ等の指定が必ずしもひとつのURLになっていなくてもよいのでは…？と思う節もある。
が、共有は基本的にすべてURLで…という統一性を大事にするのも分かる。</p>
<h3><span id="プロファイルの場所にurlを指定できるか">プロファイルの場所にURLを指定できるか？</span></h3>
<p>Spark
Connector利用時は、例えばS3に置いたプロファイルを使用できるか？の確認をする。</p>
<p>◇補足： というのも、Spark
Connectorを利用している際、Sparkのコンフィグにて、
<code>HADOOP_HOME</code>
を設定し、Hadoopを利用するようにしてみたらどうやらHDFS
を探しに行っているようだったため、SparkのAPIを通じてプロファイルを読みに行っているのだとしたら、S3等に置かれたプロファイルを読めるはずだ、と考えたため。</p>
<p>ここでは、 <code>s3://hoge/fuga/deltasharing.json</code>
のようなURLを渡すことにする。</p>
<p>結論から言えば、delta
sharingはプロファイルの読み出しにfsspecを利用しているため、仕様上はリモートのファイルを読み出せるようになっている。</p>
<p>ここで実行したノートブックは <a href="https://github.com/dobachi/delta_sharing_example/blob/main/TestProfileOnS3.ipynb" target="_blank" rel="noopener">TestProfileOnS3</a>
に置いてある。</p>
<h4><span id="delta-sharing-clientの生成">delta sharing clientの生成</span></h4>
<p>まず、共有データ一覧を取得するために用いるクライアントだが、</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client = delta_sharing.SharingClient(profile_file)</span><br></pre></td></tr></table></figure>
<p>の引数にS3のURLを渡したら、以下のエラーになった。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImportError: Install s3fs to access S3</span><br></pre></td></tr></table></figure>
<p>これは、delta
sharing内で用いられるfsspecにより出された例外である。</p>
<p>python/delta_sharing/protocol.py:41</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_from_file</span><span class="params">(profile: Union[str, IO, Path])</span> -&gt; "DeltaSharingProfile":</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(profile, str):</span><br><span class="line">        infile = fsspec.open(profile).open()</span><br><span class="line">    <span class="keyword">elif</span> isinstance(profile, Path):</span><br><span class="line">        infile = fsspec.open(profile.as_uri()).open()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        infile = profile</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> DeltaSharingProfile.from_json(infile.read())</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        infile.close()</span><br></pre></td></tr></table></figure>
<p>ということで、Python環境にpipでs3fsをインストールしてからもう一度試したところ、ひとまず動作した。</p>
<p>fsspecを利用しているということは、仕様上はリモートに置いてあるファイルシステムにも対応可能である、ということだった。</p>
<p>Pandas DataFrame、Spark
DataFrameそれぞれへの読み出しについて、動作した。</p>
<h3><span id="認可">認可</span></h3>
<p><a href="https://github.com/delta-io/delta-sharing#authorization" target="_blank" rel="noopener">Autorization</a>
の通り、Bearer認証を利用できるようだ。</p>
<h3><span id="rest-apiでアクセス">REST APIでアクセス</span></h3>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#rest-apis" target="_blank" rel="noopener">REST
API</a> を参考に確認する。</p>
<h4><span id="shareのリスト">Shareのリスト</span></h4>
<p>ひとまず一番簡単な、Share一覧を取得する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl http://127.0.0.1:80/delta-sharing/shares | jq</span></span><br><span class="line">&#123;</span><br><span class="line">  "items": [</span><br><span class="line">    &#123;</span><br><span class="line">      "name": "share1"</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="テーブルバージョンの取得">テーブルバージョンの取得</span></h4>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#query-table-version" target="_blank" rel="noopener">Tableバージョンの取得</a>
の通り。 なお、なぜか2行出力される。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl -I -D - http://127.0.0.1:80/delta-sharing/shares/share1/schemas/schema1/tables/table1</span></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">delta-table-version: 4</span><br><span class="line">delta-table-version: 4</span><br><span class="line">content-length: 0</span><br><span class="line">content-length: 0</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#list-shares" target="_blank" rel="noopener">Shareの取得</a>にあるようにクエリパラメタとして
<code>maxResult</code> やページングの情報を渡せる。</p>
<h4><span id="メタデータの取得">メタデータの取得</span></h4>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#query-table-metadata" target="_blank" rel="noopener">テーブルメタデータの取得</a>
の通り。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl http://127.0.0.1:80/delta-sharing/shares/share1/schemas/schema1/tables/table1/metadata | jq</span></span><br><span class="line"><span class="meta">  %</span><span class="bash"> Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100   271    0   271    0     0    919      0 --:--:-- --:--:-- --:--:--   921</span><br><span class="line">&#123;</span><br><span class="line">  "protocol": &#123;</span><br><span class="line">    "minReaderVersion": 1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  "metaData": &#123;</span><br><span class="line">    "id": "cea27a35-d139-4a74-a5f7-5596985784b8",</span><br><span class="line">    "format": &#123;</span><br><span class="line">      "provider": "parquet"</span><br><span class="line">    &#125;,</span><br><span class="line">    "schemaString": "&#123;\"type\":\"struct\",\"fields\":[&#123;\"name\":\"id\",\"type\":\"long\",\"nullable\":true,\"metadata\":&#123;&#125;&#125;]&#125;",</span><br><span class="line">    "partitionColumns": []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="データの取得">データの取得</span></h4>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#read-data-from-a-table" target="_blank" rel="noopener">テーブルデータの読み出し</a>
に従うと、「ヒント句」を渡しながら、データ（のアクセスURL）を取得できるようだ。
ドキュメントを読む限り、このヒントが働くかどうかはベストエフォートとのこと。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X POST -H &quot;Content-Type: application/json; charset=utf-8&quot; http://127.0.0.1:80/delta-sharing/shares/share1/schemas/schema1/tables/table1/query -d @- &lt;&lt; EOL</span><br><span class="line">&#123;</span><br><span class="line">  &quot;predicateHints&quot;: [ &quot;id &lt; 1&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;limitHint&quot;: 1</span><br><span class="line">&#125;</span><br><span class="line">EOL</span><br></pre></td></tr></table></figure>
<p>このヒントの働きについては、別途調査する。</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2021/09/10/Getting-Started-of-Delta-Sharing/" data-id="clmdqphlh015v1ws65vtk2l0h" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-X-Road" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2021/09/03/X-Road/">X-Road</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2021/09/03/X-Road/">
            <time datetime="2021-09-03T13:58:43.000Z" itemprop="datePublished">2021-09-03</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/X-Road/">X-Road</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/X-Road/">X-Road</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#x-roadとは" id="toc-x-roadとは">X-Roadとは？</a></li>
<li><a href="#最初の動作確認" id="toc-最初の動作確認">最初の動作確認</a>
<ul>
<li><a href="#ansibleプレイブックの確認" id="toc-ansibleプレイブックの確認">Ansibleプレイブックの確認</a></li>
<li><a href="#起動した環境の動作確認" id="toc-起動した環境の動作確認">起動した環境の動作確認</a></li>
</ul></li>
<li><a href="#コンポーネントの確認" id="toc-コンポーネントの確認">コンポーネントの確認</a>
<ul>
<li><a href="#security-server" id="toc-security-server">Security
Server</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://github.com/nordic-institute/X-Road" target="_blank" rel="noopener">X-RoadのGitHub</a></li>
<li><a href="https://dobachi.github.io/memo-blog/#x-road">X-Roadについての簡易メモ</a></li>
<li><a href="https://github.com/nordic-institute/X-Road/blob/develop/ansible/README.md#using-lxd-hosts" target="_blank" rel="noopener">Using
LXD-hosts</a></li>
<li><a href="https://www.youtube.com/watch?v=RV-Dq69yFVE" target="_blank" rel="noopener">X Road Academy
Session 1 Setting up a local X-Road development environment</a></li>
<li>[X-Road: Security Server Architecture]</li>
<li><a href="https://github.com/nordic-institute/X-Road/blob/develop/doc/Architecture/arc-ss_x-road_security_server_architecture.md#2-component-view" target="_blank" rel="noopener">X-Road
Security Server Architecture Overview</a></li>
<li><a href="https://github.com/nordic-institute/X-Road/blob/develop/doc/Architecture/arc-ss_x-road_security_server_architecture.md#3-process-view" target="_blank" rel="noopener">X-Road
Security Server Architecture Process View</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="x-roadとは">X-Roadとは？</span></h2>
<p>一言で言えば、エストニアの電子政府や公共と民間の間のデータ連携に用いられている
データ流通のためのオープンソースソフトウェアである。 他の簡単な紹介は <a href="https://dobachi.github.io/memo-blog/#x-road">X-Roadについての簡易メモ</a>
あたりを参照。</p>
<h2><span id="最初の動作確認">最初の動作確認</span></h2>
<p><a href="https://github.com/nordic-institute/X-Road" target="_blank" rel="noopener">X-RoadのGitHub</a>
のREADMEによると、AnsibleのPlaybookがある。
READMEから簡単に読み解いてみる。</p>
<h3><span id="ansibleプレイブックの確認">Ansibleプレイブックの確認</span></h3>
<h4><span id="インベントリ">インベントリ</span></h4>
<p><code>ansible/hosts/example_xroad_hosts.txt</code> によると、 central
server（cs）、security server（ss）、configuration proxy、certification
authorityの
グループが定義されており、csやssは複数台のノードが記載されている。冗長化されている？</p>
<p><code>ansible/hosts/lxd_hosts.txt</code> はコンテナ向けに見える。</p>
<p>なお、エストニア等の国？エリア？に特化するかどうか、という変数がある。
該当しない場合は、 <code>vanilla</code> でよさそう。</p>
<h4><span id="プレイブックエントリポイント">プレイブック（エントリポイント）</span></h4>
<p>デプロイするときは <code>xroad_init.yml</code> を利用する。</p>
<h4><span id="ロール">ロール</span></h4>
<p>プレイブックの通り、 <code>xroad-cs</code> や <code>xroad-cp</code>
といったロールが各種類のサーバに対応したロールである。
また、このロールは依存関係に</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">&#123;</span> <span class="attr">role:</span> <span class="string">xroad-base</span> <span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>のようなものを持っており、 <code>xroad-base</code>
がレポジトリ等の設定をする役割を担っている。</p>
<h4><span id="lxdコンテナを利用した動作確認用のデプロイ">LXDコンテナを利用した動作確認用のデプロイ</span></h4>
<p><a href="https://github.com/nordic-institute/X-Road/blob/develop/ansible/README.md#using-lxd-hosts" target="_blank" rel="noopener">Using
LXD-hosts</a>
によると、LXDコンテナを使用し動作確認用のX-Road環境を構築できる。
<code>ansible/hosts/lxd_hosts.txt</code>
がインベントリファイル（の例）である。 中で定義されているコンテナは、
<code>ansible/roles/init-lxd</code> ロールで起動される。</p>
<p>Ubuntu18で試す。</p>
<p>あらかじめLXD環境をセットアップしておく。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install lxd</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> newgrp lxd</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo lxd init</span></span><br></pre></td></tr></table></figure>
<p>特に問題なければLXDコンテナが起動できるはず。詳しくは、
https://linuxcontainers.org/ja/lxd/getting-started-cli
あたりを参照。</p>
<p>Ansibleもインストールしておく。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install software-properties-common</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-add-repository --yes --update ppa:ansible/ansible</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install ansible</span></span><br></pre></td></tr></table></figure>
<p>詳しくは、
https://docs.ansible.com/ansible/2.9_ja/installation_guide/intro_installation.html#ubuntu-ansible
あたりを参照。</p>
<p>X-Roadのコンテナを準備する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ansible-playbook  -i hosts/lxd_hosts.txt xroad_init.yml</span></span><br></pre></td></tr></table></figure>
<p>実際に以下のようなコンテナが立ち上がる。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ lxc list</span><br><span class="line">+---------------+---------+-----------------------+-----------------------------------------------+------------+-----------+</span><br><span class="line">|     NAME      |  STATE  |         IPV4          |                     IPV6                      |    TYPE    | SNAPSHOTS |</span><br><span class="line">+---------------+---------+-----------------------+-----------------------------------------------+------------+-----------+</span><br><span class="line">| xroad-lxd-cs  | RUNNING | xx.xx.xx.xx (eth0)    | xxxx:xxxx:xxxx:xxxx:xxx:xxxx:xxxx:xxxx (eth0) | PERSISTENT | 0         |</span><br><span class="line">+---------------+---------+-----------------------+-----------------------------------------------+------------+-----------+</span><br><span class="line">| xroad-lxd-ss1 | RUNNING | xx.xx.xx.xx (eth0)    | xxxx:xxxx:xxxx:xxxx:xxx:xxxx:xxxx:xxxx (eth0) | PERSISTENT | 0         |</span><br><span class="line">+---------------+---------+-----------------------+-----------------------------------------------+------------+-----------+</span><br></pre></td></tr></table></figure>
<p>なお、パッケージインストール（内部的にはaptを利用してインストール）している箇所の進みが遅く、一度インタラプトして手動でaptコマンドでインストールした。</p>
<h4><span id="開発用のプレイブック">開発用のプレイブック</span></h4>
<p>開発用のAnsibleプレイブックもある。
<code>ansible/xroad_dev.yml</code> や
<code>ansible/xroad_dev_partial.yml</code> である。</p>
<h3><span id="起動した環境の動作確認">起動した環境の動作確認</span></h3>
<p><a href="https://www.youtube.com/watch?v=RV-Dq69yFVE" target="_blank" rel="noopener">X Road Academy
Session 1 Setting up a local X-Road development
environment</a>が参考になりそう。</p>
<h2><span id="コンポーネントの確認">コンポーネントの確認</span></h2>
<h3><span id="security-server">Security Server</span></h3>
<p><a href="https://github.com/nordic-institute/X-Road/blob/develop/doc/Architecture/arc-ss_x-road_security_server_architecture.md" target="_blank" rel="noopener">X-Road
Security Server Architecture</a> にSecurity
Serverのアーキテクチャが記載されている。 特に <a href="https://github.com/nordic-institute/X-Road/blob/develop/doc/Architecture/arc-ss_x-road_security_server_architecture.md#2-component-view" target="_blank" rel="noopener">X-Road
Security Server Architecture Overview</a>
に記載されている図が分かりやすい。</p>
<p>Security Serverはサービスクライアントとプロバイダの仲介を担う。
電子署名と暗号を用いてメッセージのやり取りは保護される。</p>
<p>Proxyがメッセージを受けとるのだが、メッセージは署名と一緒に保存される。</p>
<p>設定情報はPostgreSQL内に保持される。
設定はユーザインターフェースを通じて行われるようになっている。</p>
<p>グローバルコンフィグレーションをダウンロードするConfiguration Client
というのもあるようだ。</p>
<p>そのほかのコンポーネントは名称の通りの機能である。</p>
<p><a href="https://github.com/nordic-institute/X-Road/blob/develop/doc/Architecture/arc-ss_x-road_security_server_architecture.md#3-process-view" target="_blank" rel="noopener">X-Road
Security Server Architecture Process View</a>
に処理の流れが記載されている。</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2021/09/03/X-Road/" data-id="clmdqphgf00lo1ws6s9gtuqqi" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Software-for-Data-Sharing" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2021/08/30/Software-for-Data-Sharing/">Softwares for Data Sharing</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2021/08/30/Software-for-Data-Sharing/">
            <time datetime="2021-08-30T07:01:26.000Z" itemprop="datePublished">2021-08-30</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a>
    </div>

                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a>
<ul>
<li><a href="#共有対象の情報" id="toc-共有対象の情報">共有対象の情報</a></li>
<li><a href="#まとめ" id="toc-まとめ">まとめ</a></li>
<li><a href="#ソリューション" id="toc-ソリューション">ソリューション</a></li>
<li><a href="#oss" id="toc-oss">OSS</a></li>
<li><a href="#組織" id="toc-組織">組織</a></li>
</ul></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#そもそもデータ共有対象のデータって何があるのか" id="toc-そもそもデータ共有対象のデータって何があるのか">そもそもデータ共有対象のデータって何があるのか？</a>
<ul>
<li><a href="#機密性を保持するべきデータ" id="toc-機密性を保持するべきデータ">機密性を保持するべきデータ</a></li>
<li><a href="#オープンなデータ" id="toc-オープンなデータ">オープンなデータ</a></li>
</ul></li>
<li><a href="#まとめ系の情報源" id="toc-まとめ系の情報源">まとめ系の情報源</a></li>
<li><a href="#データ共有のためのオープンソースソフトウェア" id="toc-データ共有のためのオープンソースソフトウェア">データ共有のためのオープンソースソフトウェア</a>
<ul>
<li><a href="#ckan" id="toc-ckan">CKAN</a></li>
<li><a href="#eclipse-dataspace-connector" id="toc-eclipse-dataspace-connector">Eclipse Dataspace
Connector</a></li>
<li><a href="#x-road" id="toc-x-road">X-Road</a></li>
</ul></li>
<li><a href="#ソリューションに付帯されるデータ共有の仕組み" id="toc-ソリューションに付帯されるデータ共有の仕組み">ソリューションに付帯されるデータ共有の仕組み</a>
<ul>
<li><a href="#snowflake-data-sharing" id="toc-snowflake-data-sharing">Snowflake Data Sharing</a></li>
<li><a href="#s3-access-points" id="toc-s3-access-points">S3 Access
Points</a></li>
<li><a href="#aws-storage-gateway" id="toc-aws-storage-gateway">AWS
Storage Gateway</a></li>
<li><a href="#aws上で素朴にs3バケットポリシーを使ってアカウント間共有" id="toc-aws上で素朴にs3バケットポリシーを使ってアカウント間共有">AWS上で素朴にS3バケットポリシーを使ってアカウント間共有</a></li>
<li><a href="#aws-redshift-data-sharing" id="toc-aws-redshift-data-sharing">AWS Redshift Data Sharing</a></li>
<li><a href="#treasure-data-data-exchange" id="toc-treasure-data-data-exchange">Treasure Data Data
Exchange</a></li>
<li><a href="#planetcross" id="toc-planetcross">PlanetCross</a></li>
<li><a href="#関連nortal社" id="toc-関連nortal社">（関連）Nortal社</a></li>
<li><a href="#aktors社" id="toc-aktors社">Aktors社</a></li>
</ul></li>
<li><a href="#データエスクロー第三者預託" id="toc-データエスクロー第三者預託">データエスクロー（第三者預託）</a>
<ul>
<li><a href="#crossbeam" id="toc-crossbeam">Crossbeam</a></li>
<li><a href="#codekeeper" id="toc-codekeeper">codekeeper</a></li>
</ul></li>
<li><a href="#データコラボレーションに関する研究機関" id="toc-データコラボレーションに関する研究機関">データコラボレーションに関する研究機関</a>
<ul>
<li><a href="#aidac" id="toc-aidac">AIDAC</a></li>
</ul></li>
<li><a href="#セキュリティの情報共有" id="toc-セキュリティの情報共有">セキュリティの情報共有</a>
<ul>
<li><a href="#misp" id="toc-misp">MISP</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<h2><span id="共有対象の情報">共有対象の情報</span></h2>
<ul>
<li><a href="https://www.aibsc.jp/joho/security/ness/01.html" target="_blank" rel="noopener">セキュリティ対策は何故必要か？</a>:</li>
<li><a href="https://locked.jp/blog/what-is-confidential-information/" target="_blank" rel="noopener">機密情報とは？営業秘密との違いや管理方法、漏洩リスク等を解説！</a></li>
<li><a href="https://www.soumu.go.jp/johotsusintokei/whitepaper/ja/h25/html/nc121210.html" target="_blank" rel="noopener">第1部　特集　「スマートICT」の戦略的活用でいかに日本に元気と成長をもたらすか</a></li>
</ul>
<h2><span id="まとめ">まとめ</span></h2>
<ul>
<li><a href="https://www.data-collaboration.com/" target="_blank" rel="noopener">DATA COLLABORATION
GUIDE</a></li>
<li><a href="https://medium.com/infosum/what-is-data-collaboration-6519e604a365" target="_blank" rel="noopener">What
is data collaboration?</a></li>
</ul>
<h2><span id="ソリューション">ソリューション</span></h2>
<ul>
<li><a href="https://www.crossbeam.com/" target="_blank" rel="noopener">CROSSBEAM</a></li>
<li><a href="https://www.escrow-data.com/" target="_blank" rel="noopener">DATA ESCROW 101</a></li>
<li><a href="https://codekeeper.co/what-is-data-escrow.html" target="_blank" rel="noopener">Codekeeperのエスクローサービス</a></li>
<li><a href="https://planetway.com/" target="_blank" rel="noopener">Planetway</a></li>
<li><a href="https://planetway.com/planetcross/" target="_blank" rel="noopener">PlanetCorss</a></li>
<li><a href="https://nortal.com/" target="_blank" rel="noopener">Nortal</a></li>
<li><a href="http://www.aktors.ee/" target="_blank" rel="noopener">Aktors</a></li>
</ul>
<ul>
<li><a href="https://www.misp-project.org/" target="_blank" rel="noopener">MISP</a></li>
</ul>
<ul>
<li><a href="https://docs.snowflake.com/ja/user-guide/data-sharing-intro.html" target="_blank" rel="noopener">Snowflake
Secure Data Sharingの紹介</a></li>
</ul>
<ul>
<li><a href="https://aws.amazon.com/jp/blogs/news/easily-manage-shared-data-sets-with-amazon-s3-access-points/" target="_blank" rel="noopener">S3
Access Pointsに関するAWSブログ</a></li>
<li><a href="https://dev.classmethod.jp/articles/explain-the-good-point-of-s3-access-points/" target="_blank" rel="noopener">S3アクセスポイントのうれしい点を自分なりの理解で解説してみる</a></li>
<li><a href="https://aws.amazon.com/jp/s3/features/access-points/" target="_blank" rel="noopener">Amazon S3
Access Points</a></li>
</ul>
<ul>
<li><a href="https://docs.aws.amazon.com/filegateway/latest/files3/StorageGatewayConcepts.html" target="_blank" rel="noopener">AWS
Storage Gateway</a></li>
</ul>
<ul>
<li><a href="https://dev.classmethod.jp/articles/amazon-s3-bucket-aws-account-share/" target="_blank" rel="noopener">Amazon
S3のバケットを特定のAWSアカウントに共有する</a></li>
</ul>
<ul>
<li><a href="https://aws.amazon.com/jp/blogs/news/amazon-redshift-data-sharing-ga/" target="_blank" rel="noopener">Amazon
Redshift Data Sharing
が一般提供開始となり、東京リージョンでもご利用可能</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/big-data/announcing-amazon-redshift-data-sharing-preview/" target="_blank" rel="noopener">Announcing
Amazon Redshift data sharing (preview)</a></li>
</ul>
<ul>
<li><a href="https://www.treasuredata.co.jp/blog/data-exchange/" target="_blank" rel="noopener">トレジャーデータ契約企業同士のデータ連携を簡単に実現する「Data
Exchange」機能を紹介！</a></li>
</ul>
<h2><span id="oss">OSS</span></h2>
<ul>
<li><a href="https://ckan.org/" target="_blank" rel="noopener">CKAN</a></li>
<li><a href="https://docs.ckan.org/en/latest/contents.html" target="_blank" rel="noopener">CKANドキュメント</a></li>
<li><a href="https://ckan.org/showcase" target="_blank" rel="noopener">CKANのショーケース</a></li>
</ul>
<ul>
<li><a href="https://internationaldataspaces.org/business-data-sharing-based-on-open-source-technology/" target="_blank" rel="noopener">Business
Data Sharing Based on Open-Source Technology</a></li>
<li><a href="https://projects.eclipse.org/projects/technology.dataspaceconnector" target="_blank" rel="noopener">Eclipse
Dataspace Connector</a></li>
<li><a href="https://github.com/eclipse-dataspaceconnector/DataSpaceConnector" target="_blank" rel="noopener">eclipse-dataspaceconnector
/ DataSpaceConnector</a></li>
</ul>
<ul>
<li><a href="https://x-road.global/" target="_blank" rel="noopener">X-Road</a></li>
<li><a href="https://x-road.global/xroad-history" target="_blank" rel="noopener">X-Roadの歴史</a></li>
<li><a href="https://x-road.global/x-road-organizational-model" target="_blank" rel="noopener">X-Roadの組織モデル</a></li>
<li><a href="https://x-road.global/architecture" target="_blank" rel="noopener">X-Roadのアーキテクチャ</a></li>
<li><a href="https://github.com/nordic-institute/X-Road/blob/develop/doc/Architecture/arc-g_x-road_arhitecture.md" target="_blank" rel="noopener">X-Roadのアーキテクチャ詳細</a></li>
<li><a href="https://x-road.global/trust-federation" target="_blank" rel="noopener">X-Roadエコシステム間のフェデレーション</a></li>
<li><a href="https://x-road.global/development-roadmap" target="_blank" rel="noopener">X-Roadの開発ロードマップ</a></li>
<li><a href="https://github.com/nordic-institute/X-Road" target="_blank" rel="noopener">X-RoadのGitHub</a></li>
<li><a href="https://www.niis.org/blog/2020/3/30/x-road-implementation-models" target="_blank" rel="noopener">X-Road
Implementation Models</a></li>
<li><a href="https://x-road.global/xroad-world-map?__hstc=120471575.8ab31103a23c029337fcc6ac2eeba453.1630655677978.1630655677978.1630655677978.1&amp;__hssc=120471575.1.1630655677979&amp;__hsfp=2033152857" target="_blank" rel="noopener">X-ROAD®
WORLD MAP</a></li>
<li><a href="https://dl.acm.org/doi/abs/10.1145/3209415.3209441" target="_blank" rel="noopener">On the
Systematic Exploitation of the Estonian Data Exchange Layer X-Road for
Strengthening Public-Private Partnerships</a></li>
<li><a href="https://link.springer.com/chapter/10.1007/978-3-030-27325-5_6" target="_blank" rel="noopener">Setting
Up Government 3.0 Solutions Based on Open Source Software: The Case of
X-Road</a></li>
<li><a href="https://link.springer.com/chapter/10.1007/978-3-030-57599-1_8" target="_blank" rel="noopener">Automatization
of Cross-Border Customs Declaration: Potential and Challenges</a></li>
<li><a href="https://ieeexplore.ieee.org/abstract/document/9096704" target="_blank" rel="noopener">Prerequisites
for the Adoption of the X - Road Interoperability and Data Exchange
Framework: A Comparative Study</a></li>
<li><a href="https://x-road-document-library.s3.amazonaws.com/attachments/X-Road_-_An_interoperable_Information_Technology_solution_for_thenational_Health_Information_Platform_(nHIP).pdf" target="_blank" rel="noopener">X-Road
- An interoperable Information Technology solution for the national
Health Information Platform (nHIP)</a></li>
<li><a href="https://x-road-document-library.s3.amazonaws.com/attachments/Federating_X-Road_System_Overview.pdf" target="_blank" rel="noopener">Federating
X-Road System Overview</a></li>
<li><a href="https://x-road.global/xroad-library" target="_blank" rel="noopener">X-Roadのドキュメントライブラリ</a></li>
<li><a href="https://cyber.ee/research/theses/tarmo_oja_msc.pdf" target="_blank" rel="noopener">X-Road
Trust Model and Technology Threat Analysis</a></li>
</ul>
<ul>
<li><a href="https://planetway.com/corporate-profile/" target="_blank" rel="noopener">Planetway社のプロフィール</a></li>
</ul>
<h2><span id="組織">組織</span></h2>
<ul>
<li><a href="https://datacollab.cs.tsukuba.ac.jp/" target="_blank" rel="noopener">AIDAC</a></li>
<li><a href="https://www.nedo.go.jp/activities/ZZJP_100137.html" target="_blank" rel="noopener">人工知能技術適用によるスマート社会の実現</a></li>
<li><a href="https://www.nedo.go.jp/content/100906019.pdf" target="_blank" rel="noopener">人工知能技術適用によるスマート社会の実現 プロジェクト紹介</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="そもそもデータ共有対象のデータって何があるのか">そもそもデータ共有対象のデータって何があるのか？</span></h2>
<h3><span id="機密性を保持するべきデータ">機密性を保持するべきデータ</span></h3>
<p><a href="https://www.aibsc.jp/joho/security/ness/01.html" target="_blank" rel="noopener">セキュリティ対策は何故必要か？</a>
によると企業が保護すべき情報には「個人情報」と「企業内機密情報」があるとのこと。
<a href="https://locked.jp/blog/what-is-confidential-information/" target="_blank" rel="noopener">機密情報とは？営業秘密との違いや管理方法、漏洩リスク等を解説！</a>
には、「機密情報」の定義が記載されている。</p>
<blockquote>
<p>企業が保有している情報のうち、外部への開示が予定されていないこと
情報秘密として管理されている情報
開示されれば、企業に損害が生じ得る情報</p>
</blockquote>
<p>また、不正競争防止法に「営業秘密」の定義が載っている。（ようだ）</p>
<blockquote>
<p>秘密管理性（秘密として管理されていること）
有用性（有用な営業上又は技術上の情報であること）
非公知性（公然と知られていないこと）</p>
</blockquote>
<h3><span id="オープンなデータ">オープンなデータ</span></h3>
<p>網羅性、という意味ではオープンなデータも共有対象になる。</p>
<p>いわゆる「オープンデータ」の意義・目的が総務省の情報通信白書に記載されている。
<a href="https://www.soumu.go.jp/johotsusintokei/whitepaper/ja/h25/html/nc121210.html" target="_blank" rel="noopener">第1部　特集　「スマートICT」の戦略的活用でいかに日本に元気と成長をもたらすか</a>
参照。</p>
<p>これに合致しなくとも、企業などで取り扱うデータには機密性を保たなくてもよい類の情報もあるだろう。</p>
<h2><span id="まとめ系の情報源">まとめ系の情報源</span></h2>
<p><a href="https://www.data-collaboration.com/" target="_blank" rel="noopener">DATA COLLABORATION
GUIDE</a> にデータコラボレーションに関するまとめが記載されている。
データコラボレーションの具体例（パートナーとアライアンス、チャネル販売、など）に触れながら、
データエスクローについて紹介している。</p>
<p><a href="https://medium.com/infosum/what-is-data-collaboration-6519e604a365" target="_blank" rel="noopener">What
is data
collaboration?</a>にデータコラボレーションによってもたらされるメリットなどに少し触れている生地記事。
「データブリッジ」というクエリを移動させる方式（考え方？）が紹介されていた。
データコラボレーションは、線シティブナデータを共有することなく、サイロ化したデータを組み合わせられる仕組みであると紹介されている。</p>
<h2><span id="データ共有のためのオープンソースソフトウェア">データ共有のためのオープンソースソフトウェア</span></h2>
<h3><span id="ckan">CKAN</span></h3>
<p><a href="https://ckan.org/" target="_blank" rel="noopener">CKAN</a>
の通り、データ共有のためのAPI、データストア管理、機能拡張の仕組みなどを提供する。
ポータルサイトを構築可能。</p>
<p>そのほかにも、地理情報に基づく管理、メタデータ管理、データ管理用ウェブフロントエンド、検索などを提供する。</p>
<p>フェデレーションも可能そうである。
ハーベスト（収穫？）機能を利用し、リモートのメタデータを収集する。</p>
<p>ファイルストアには、ローカルのデータストアのほか、クラウドのデータストアも利用可能。</p>
<p><a href="https://www.ipride.co.jp/blog/3471" target="_blank" rel="noopener">データカタログソフトウェア「CKAN」の使い方について備忘録</a>
にAPIの特徴についての考察が記載されている。</p>
<p><a href="https://ckan.org/showcase" target="_blank" rel="noopener">CKANのショーケース</a>
には公式の例が載っている。</p>
<h3><span id="eclipse-dataspace-connector">Eclipse Dataspace Connector</span></h3>
<p><a href="https://internationaldataspaces.org/business-data-sharing-based-on-open-source-technology/" target="_blank" rel="noopener">Business
Data Sharing Based on Open-Source Technology</a>
の通り、IDS企画に準拠したコネクター。</p>
<p><a href="https://projects.eclipse.org/projects/technology.dataspaceconnector" target="_blank" rel="noopener">Eclipse
Dataspace Connector</a>
がプロジェクトディレクトリのようだがメタな情報しかない。</p>
<p>アクティブな開発者としては、BMWなどが挙げられるがMicrosoftも重要な位置付けにあるようだ。
もともとMicrosoftが開発していた（？）Data Appliance GXとIDS Dataspace
Connectorを基にしているからだろうか。</p>
<p><a href="https://github.com/eclipse-dataspaceconnector/DataSpaceConnector" target="_blank" rel="noopener">eclipse-dataspaceconnector
/ DataSpaceConnector</a> にソースコードがある。</p>
<h3><span id="x-road">X-Road</span></h3>
<p><a href="https://x-road.global/" target="_blank" rel="noopener">X-Road</a> の通り、「distributed
data exchage layer」とのこと。
X-Roadのインスタンス同士でデータ交換が可能になる。</p>
<p><a href="https://github.com/nordic-institute/X-Road" target="_blank" rel="noopener">X-RoadのGitHub</a>
によると、</p>
<blockquote>
<p>The following activities, among others, are undertaken by the Nordic
Institute for Interoperability Solutions (NIIS) with regard to the
X-Road core</p>
</blockquote>
<p>とのこと。NIISが主にメンテ活動しているようだ。</p>
<h4><span id="特徴">特徴</span></h4>
<p>特徴：</p>
<ul>
<li>address management</li>
<li>message routing</li>
<li>access rights management</li>
<li>organization-level authentication</li>
<li>machine-level authentication</li>
<li>transport-level encryption</li>
<li>time-stamping</li>
<li>digital signature of messages</li>
<li>logging</li>
<li>error handling.</li>
</ul>
<h4><span id="大まかな構成">大まかな構成</span></h4>
<p>X-Roadで作られたエコシステムに接続するにはCAによって証明されないといけない。</p>
<p><a href="https://x-road.global/x-road-organizational-model" target="_blank" rel="noopener">X-Roadの組織モデル</a>
にある通り、</p>
<ul>
<li>X-Road Operator ...
エコシステムの責任者。規約・ルールの策定・事項、新しいメンバの受け入れ、など。</li>
<li>Member組織 ...
サービスの提供者・利用者。オンボードプロセスを経て、エコシステムに参加可能</li>
<li>Trust Service Provider ... Time-stamp
Authority（TSA）、Certification
Authority（CA）機能を提供。第三者機関でもよいし、X-Road
Operatorが兼ねることもある。</li>
</ul>
<p>という関係者で構成される。</p>
<p>モデルとしては、中央集権的である。 <a href="https://x-road.global/architecture" target="_blank" rel="noopener">X-Roadのアーキテクチャ</a>
にあるように、Central Serivceを提供するためのCentral Serverがあり、
X-Road Operatorが責任をもって運用する。
そこにはMemberの登録情報やポリシーが管理されている。
なお、分散配置されたSecurity
Serverを通じて、これらの情報を利用可能になっている。</p>
<p>MemberはSecurity
Serverを通じてX-Roadのセキュリティ面の機能を利用可能。 Security
ServerはCentral Serverに保持されたコンフィグやTrust Service
Provierが持っているAuthorityの情報を取得し、ローカルにキャッシュし動作する。</p>
<p>Information SystemはREST or
SOAPプロトコルを用いてMemberが持つデータを提供・利用可能。 Security
Serverがエントリポイントになり、Information Systemを利用可能。</p>
<p>データ交換のログが保存される。やり取りされるメッセージにはタイムスタンプが付く。
ログにはタイムスタンプとデジタル署名が用いられ、訴訟手続などにも利用可能。
TSAがタイムスタンプを提供し、Security Serverがログを保存する。
CAがメッセージへのサインを提供する。</p>
<p>詳しくは、 <a href="https://github.com/nordic-institute/X-Road/blob/develop/doc/Architecture/arc-g_x-road_arhitecture.md" target="_blank" rel="noopener">X-Roadのアーキテクチャ詳細</a>
参照。そこの絵がわかりやすい。</p>
<h4><span id="フェデレーション">フェデレーション</span></h4>
<p><a href="https://x-road.global/trust-federation" target="_blank" rel="noopener">X-Roadエコシステム間のフェデレーション</a>
にあるように、異なるX-Roadエコシステム間をフェデレーションできる。
複数のエコシステムとフェデレーション可能だが、推移的なつながりは不可能であり、直接つながった同士のみ。</p>
<p><a href="https://x-road-document-library.s3.amazonaws.com/attachments/Federating_X-Road_System_Overview.pdf" target="_blank" rel="noopener">Federating
X-Road System Overview</a> にも記載がある。</p>
<h4><span id="開発ロードマップ">開発ロードマップ</span></h4>
<p><a href="https://x-road.global/development-roadmap" target="_blank" rel="noopener">X-Roadの開発ロードマップ</a>
によると、</p>
<ul>
<li>同期的なメッセージングからPub/Subモデルへの対応（Kafkaなど）</li>
<li>大量データノストリームへの対応</li>
<li>アーキテクチャの改善。モジュライズの促進。拡張機能を取り込みやすくする</li>
</ul>
<p>といった改善が見込まれているようだ。次期バージョンはX-Road 7。</p>
<h4><span id="歴史">歴史</span></h4>
<p><a href="https://x-road.global/xroad-history" target="_blank" rel="noopener">X-Roadの歴史</a>
にあるように、2001年にエストニアにおいてプロジェクトが始まった。
前身から考えるとかなり歴史のあるプロダクトである。
また、歴史的背景から、最初は公的機関での利用が前提となっており、そこから民間に広がりつつあるような印象である。
民間での利用を促進するにはどうしたらよいのか？という主旨と思われる論文も公開されている。
-&gt; <a href="https://dl.acm.org/doi/abs/10.1145/3209415.3209441" target="_blank" rel="noopener">On
the Systematic Exploitation of the Estonian Data Exchange Layer X-Road
for Strengthening Public-Private Partnerships</a></p>
<h4><span id="世界中で採用が進む">世界中で採用が進む</span></h4>
<p><a href="https://x-road.global/xroad-world-map?__hstc=120471575.8ab31103a23c029337fcc6ac2eeba453.1630655677978.1630655677978.1630655677978.1&amp;__hssc=120471575.1.1630655677979&amp;__hsfp=2033152857" target="_blank" rel="noopener">X-ROAD®
WORLD MAP</a> を見ると、世界各地でX-Road採用実績がある。
日本にも採用実績がある。 ニチガスの例。
なお、本事例にPlanetway社が関係している。<a href="https://planetway.com/corporate-profile/" target="_blank" rel="noopener">Planetway社のプロフィール</a>
参照。</p>
<h4><span id="実装モデル">実装モデル</span></h4>
<p><a href="https://www.niis.org/blog/2020/3/30/x-road-implementation-models" target="_blank" rel="noopener">X-Road
Implementation Models</a>
に示されている通り、X-Roadの実装モデルは複数挙げられる。
上記サイトに掲載されていた例は以下の通り。</p>
<ul>
<li>国家で単一のX-Roadモデル</li>
<li>地域ごとのX-Roadモデル</li>
<li>ビジネスドメインやセクタごとのX-Roadモデル</li>
<li>組織ごとのX-Roadモデル</li>
</ul>
<p>またX-Roadはフェデレーション機能を持っているので、
異なるX-Roadエコシステム間を繋ぎ利用することができる。
国際間で繋いでいる例もある。</p>
<p>またIstioのようなマイクロサービスアーキテクチャに対し、
X-Roadはあくまで異なるステークホルダ間のデータ連携を対象としているため、
一見似たように見えても異なるモデルである。</p>
<h4><span id="開発ソースコード">開発（ソースコード）</span></h4>
<p><a href="https://github.com/nordic-institute/X-Road" target="_blank" rel="noopener">X-RoadのGitHub</a></p>
<h4><span id="関連文献">関連文献</span></h4>
<p>関連する論文がいくつかありそうだった。 <a href="https://dl.acm.org/doi/abs/10.1145/3209415.3209441" target="_blank" rel="noopener">On the
Systematic Exploitation of the Estonian Data Exchange Layer X-Road for
Strengthening Public-Private Partnerships</a> 等。</p>
<p>なお、<a href="https://x-road.global/xroad-library" target="_blank" rel="noopener">X-Roadのドキュメントライブラリ</a>に一覧が載っている。</p>
<ul>
<li><a href="https://dl.acm.org/doi/abs/10.1145/3209415.3209441" target="_blank" rel="noopener">On the
Systematic Exploitation of the Estonian Data Exchange Layer X-Road for
Strengthening Public-Private Partnerships</a>
<ul>
<li>公的機関と民間部門の双方が使いやすいプラットフォームとは？という議論。X-Roadについて触れる。</li>
<li>なお、本論文時点でX-Roadに接続されているエストニアの民間企業は数百とされていた</li>
</ul></li>
<li><a href="https://link.springer.com/chapter/10.1007/978-3-030-27325-5_6" target="_blank" rel="noopener">Setting
Up Government 3.0 Solutions Based on Open Source Software: The Case of
X-Road</a>
<ul>
<li>Goverment
3.0の視点からX-Roadを説明。他のOSSとの比較もあるかもしれない。</li>
</ul></li>
<li><a href="https://link.springer.com/chapter/10.1007/978-3-030-57599-1_8" target="_blank" rel="noopener">Automatization
of Cross-Border Customs Declaration: Potential and Challenges</a>
<ul>
<li>税関の事例。X-Roadが引用されいてる。</li>
</ul></li>
<li><a href="https://ieeexplore.ieee.org/abstract/document/9096704" target="_blank" rel="noopener">Prerequisites
for the Adoption of the X - Road Interoperability and Data Exchange
Framework: A Comparative Study</a>
<ul>
<li>X-Roadの適用条件を明らかにする。複数の国を調査。</li>
</ul></li>
<li><a href="https://cyber.ee/research/theses/tarmo_oja_msc.pdf" target="_blank" rel="noopener">X-Road
Trust Model and Technology Threat Analysis</a>
<ul>
<li>X-Roadの信頼性モデルの説明、驚異の分類</li>
</ul></li>
<li><a href="https://x-road-document-library.s3.amazonaws.com/attachments/X-Road_-_An_interoperable_Information_Technology_solution_for_thenational_Health_Information_Platform_(nHIP).pdf" target="_blank" rel="noopener">X-Road
- An interoperable Information Technology solution for the national
Health Information Platform (nHIP)</a>
<ul>
<li>X-Roadをニュージーランドの医療データプラットフォームに活用した事例</li>
<li>特に公的セクターと民間セクターを繋ぐ</li>
</ul></li>
<li><a href="https://x-road-document-library.s3.amazonaws.com/attachments/Federating_X-Road_System_Overview.pdf" target="_blank" rel="noopener">Federating
X-Road System Overview</a>
<ul>
<li>フィンランドが関係7か国との連携のため、X-Roadを国際間でフェデレーションできるようにする研究</li>
</ul></li>
</ul>
<h4><span id="x-roadの広がりに関する課題">X-Roadの広がりに関する課題</span></h4>
<p><a href="https://dl.acm.org/doi/abs/10.1145/3209415.3209441" target="_blank" rel="noopener">On the
Systematic Exploitation of the Estonian Data Exchange Layer X-Road for
Strengthening Public-Private Partnerships</a> にて
X-Roadの民間利用が進まない原因と対策のマトリクスが紹介されていた。
以下に簡単に翻訳したものを示す。</p>
<table style="width:100%;">
<colgroup>
<col style="width: 14%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>問題/ソリューション</th>
<th>認知を挙げる</th>
<th>契約の簡素化（単一化）</th>
<th>セミナー・ハッカソン</th>
<th>導入マテリアル</th>
<th>収益性に関する具体的な例</th>
<th>メンバーシップパッケージの充実（？）</th>
<th>セクター別のアプローチ</th>
<th>官僚を減らす（？）</th>
<th>様々なチャンネルでの情報発信</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>X-Roadのアクセスや利用が複雑すぎる</td>
<td></td>
<td>y</td>
<td>y</td>
<td>y</td>
<td></td>
<td></td>
<td>y</td>
<td>y</td>
<td></td>
</tr>
<tr class="even">
<td>プロセスに関係者が多すぎる</td>
<td></td>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>y</td>
<td>y</td>
<td></td>
</tr>
<tr class="odd">
<td>プラットフォームが高すぎる</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>y</td>
<td>y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>十分に認知されていない</td>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td>y</td>
</tr>
<tr class="odd">
<td>収益性についての理解が足りない</td>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td>y</td>
<td></td>
<td></td>
<td></td>
<td>y</td>
</tr>
</tbody>
</table>
<h2><span id="ソリューションに付帯されるデータ共有の仕組み">ソリューションに付帯されるデータ共有の仕組み</span></h2>
<h3><span id="snowflake-data-sharing">Snowflake Data Sharing</span></h3>
<p><a href="https://docs.snowflake.com/ja/user-guide/data-sharing-intro.html" target="_blank" rel="noopener">Snowflake
Secure Data Sharingの紹介</a> のとおり、
Snowflakeに保存したオブジェクトを他のSnowflakeアカウントに共有できる。
ポイントは「他のSnowflakeアカウントに」というところである。つまり異るサービス間で共有する目的のものではなさそう。
ただ、その後の説明を読むと「リーダーアカウント」（ここではReaderか）を発行でき、リーダーアカウント向けに読み取り専用でデータを共有できるようだ。</p>
<p>共有できるオブジェクトは以下の通り。</p>
<ul>
<li>テーブル</li>
<li>外部テーブル</li>
<li>安全なビュー</li>
<li>安全なマテリアライズドビュー</li>
<li>安全な UDFs</li>
</ul>
<p>共有されたデータを利用する際は、「読み取り専用」のデータベースが定義される。
また実際にコピー／転送されるわけではない。（同じ実態をコンピュートリソースが参照するという意味だと理解）</p>
<h3><span id="s3-access-points">S3 Access Points</span></h3>
<p><a href="https://aws.amazon.com/jp/blogs/news/easily-manage-shared-data-sets-with-amazon-s3-access-points/" target="_blank" rel="noopener">S3
Access Pointsに関するAWSブログ</a>
に記載の通り、2019年時点でS3に個別のアクセスポイントを設ける機能がリリースされている。</p>
<p>アクセスポイントを発行し、アクセスポイントポリシーを適用可能。
以前であれば、バケットに対してバケットポリシーを適用していたのだが、S3
Access
Pointsを利用して個別のアクセスポイントを払い出すことができるようになった。
つまり、バケットポリシーで個別の制御を実現しようとすると、たくさんのポリシーをひとつのバケットポリシーに記載する必要があったが、
ひとつの接続可否をひとつのポリシーで管理出来るようになった、と言える。</p>
<p><a href="https://dev.classmethod.jp/articles/explain-the-good-point-of-s3-access-points/" target="_blank" rel="noopener">S3アクセスポイントのうれしい点を自分なりの理解で解説してみる</a>
あたりにユーザ視点での意義が書かれている。分かり易い。</p>
<p><a href="https://aws.amazon.com/jp/s3/features/access-points/" target="_blank" rel="noopener">Amazon
S3 Access Points</a> が公式情報。</p>
<h3><span id="aws-storage-gateway">AWS Storage Gateway</span></h3>
<p><a href="https://docs.aws.amazon.com/filegateway/latest/files3/StorageGatewayConcepts.html" target="_blank" rel="noopener">AWS
Storage Gateway</a>
にアーキテクチャの絵がまとまっているが、S3とオンプレのシステムを繋いでデータ共有するにあたり、
ゲートウェイの機能を提供する。</p>
<h3><span id="aws上で素朴にs3バケットポリシーを使ってアカウント間共有">AWS上で素朴にS3バケットポリシーを使ってアカウント間共有</span></h3>
<p>もっと素朴に実現する方法はあるのか？という意味では、<a href="https://dev.classmethod.jp/articles/amazon-s3-bucket-aws-account-share/" target="_blank" rel="noopener">Amazon
S3のバケットを特定のAWSアカウントに共有する</a>
のブログの通り、S3のバケットポリシー上の工夫で対応可能。
バケットポリシーで特定のAWSアカウントを指定して共有できる。</p>
<p>ただし、この場合は、S3 Access
Pointsで示したようなバケットポリシーの課題が生じる。</p>
<h3><span id="aws-redshift-data-sharing">AWS Redshift Data Sharing</span></h3>
<p><a href="https://aws.amazon.com/jp/blogs/news/amazon-redshift-data-sharing-ga/" target="_blank" rel="noopener">Amazon
Redshift Data Sharing
が一般提供開始となり、東京リージョンでもご利用可能</a> のとおり、
Redshift間でデータを共有する機能がある。</p>
<p><a href="https://aws.amazon.com/jp/blogs/big-data/announcing-amazon-redshift-data-sharing-preview/" target="_blank" rel="noopener">Announcing
Amazon Redshift data sharing (preview)</a>
の通り、アカウントまたぎも可能そうに見える。</p>
<h3><span id="treasure-data-data-exchange">Treasure Data Data Exchange</span></h3>
<p><a href="https://www.treasuredata.co.jp/blog/data-exchange/" target="_blank" rel="noopener">トレジャーデータ契約企業同士のデータ連携を簡単に実現する「Data
Exchange」機能を紹介！</a> の通り、
ユーザが自身で所有しているデータを他のアカウントにデータを共有する事が可能。</p>
<p>また共有する際に、データ抽出量のクエリを渡すことができる。
これにより、特定のデータだけ渡す、などが可能。</p>
<h3><span id="planetcross">PlanetCross</span></h3>
<p><a href="https://planetway.com/" target="_blank" rel="noopener">Planetway</a>
社が提供するソリューション。 <a href="https://planetway.com/planetcross/" target="_blank" rel="noopener">PlanetCorss</a>
の通り、エストニアの電子政府で利用されているX-Roadを
民間企業向けにカスタマイズして提供している。</p>
<p>上記ウェブサイトに記載されているが、ユーザ企業ごとにPlanetCross環境を立て、
それを通じて互いにデータ連携できるようになっている。</p>
<p>このモデルだと、GAIA-X/IDSのコネクタでデータスペースをつなげるモデルに近い。</p>
<p>受賞歴を見ると、特に2016、2017年あたりに注目を集めた様子。</p>
<h3><span id="関連nortal社">（関連）Nortal社</span></h3>
<p><a href="https://nortal.com/" target="_blank" rel="noopener">Nortal</a>
社はエストニアの電子政府ソリューションの40％異常を計画・実行した実績を持つ。
eIDに強みを持つようだ。</p>
<h3><span id="aktors社">Aktors社</span></h3>
<p><a href="http://www.aktors.ee/" target="_blank" rel="noopener">Aktors</a> 社はX-Roadの先駆者。
Aktors CEOのAleksander
Reitsakasは、2001年の最初のX-Roadプロジェクトマネージャ。</p>
<h2><span id="データエスクロー第三者預託">データエスクロー（第三者預託）</span></h2>
<h3><span id="crossbeam">Crossbeam</span></h3>
<p><a href="https://www.crossbeam.com/" target="_blank" rel="noopener">CROSSBEAM</a>、 <a href="https://www.escrow-data.com/" target="_blank" rel="noopener">DATA ESCROW
101</a>あたりに紹介されている。
データを預かり、利害関係者に部分的に共有する機能を提供する。
パートナーマネジメントの一貫。</p>
<h3><span id="codekeeper">codekeeper</span></h3>
<p><a href="https://codekeeper.co/what-is-data-escrow.html" target="_blank" rel="noopener">Codekeeperのエスクローサービス</a>
に記載の通り、重要なデータを預かるサービス。</p>
<h2><span id="データコラボレーションに関する研究機関">データコラボレーションに関する研究機関</span></h2>
<h3><span id="aidac">AIDAC</span></h3>
<p><a href="https://datacollab.cs.tsukuba.ac.jp/" target="_blank" rel="noopener">AIDAC</a>
の通り、筑波大学の研究グループ。 データコラボレーション
<strong>解析</strong> を中心とした研究。</p>
<p>主旨は以下の通り。</p>
<blockquote>
<p>組織や分野を越えたデータ統合には、データサイズが巨大であることや組織ごとのデータ特性の違いなどの課題があります。またさらにデータの秘匿性についても考慮する必要があります。本事業では、組織や分野にまたがって分散したデータに対して、元データの直接的な統合を行うことなく、高度な統合解析を可能とするための技術開発を行います。</p>
</blockquote>
<p>また、以下の通りNEDOプロジェクトとして手がけた様だ。</p>
<blockquote>
<p>本プロジェクトは、独立行政法人新エネルギー・産業技術総合開発機構(NEDO)の委託を受けて、
「人工知能技術適用によるスマート社会の実現（人工知能技術の社会実装に関する日米共同研究開発）」において実施するものです。</p>
</blockquote>
<p><a href="https://www.nedo.go.jp/activities/ZZJP_100137.html" target="_blank" rel="noopener">人工知能技術適用によるスマート社会の実現</a>によると、
実施期間は以下の通り。</p>
<blockquote>
<p>事業期間：2018年度～2022年度、2020年度予算：19.5億円</p>
</blockquote>
<p><a href="https://www.nedo.go.jp/content/100906019.pdf" target="_blank" rel="noopener">人工知能技術適用によるスマート社会の実現 プロジェクト紹介</a>
に具体的なプロジェクトタイトルが載っている。</p>
<p>気になったプロジェクトは以下の通り。</p>
<ul>
<li>MyData
に基づく人工知能開発運用プラットフォームの構築：国立大学法人東京大学他</li>
<li>データコラボレーション解析による生産性向上を目指した次世代人工知能技術の研究開発：国立大学法人筑波大学他</li>
</ul>
<h2><span id="セキュリティの情報共有">セキュリティの情報共有</span></h2>
<h3><span id="misp">MISP</span></h3>
<p><a href="https://www.misp-project.org/" target="_blank" rel="noopener">MISP</a>
にあるとおり、セキュリティの脅威を共有するプラットフォームとオープンソースソフトウェア。</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2021/08/30/Software-for-Data-Sharing/" data-id="clmdqphoo01cb1ws69duluks1" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Source-Code-Reading-of-Delta-Sharing" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2021/08/30/Source-Code-Reading-of-Delta-Sharing/">Source Code Reading of Delta Sharing</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2021/08/30/Source-Code-Reading-of-Delta-Sharing/">
            <time datetime="2021-08-30T03:51:21.000Z" itemprop="datePublished">2021-08-30</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/Delta-Sharing/">Delta Sharing</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Delta-Lake/">Delta Lake</a>, <a class="tag-link" href="/memo-blog/tags/Delta-Sharing/">Delta Sharing</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#サーバの参考実装" id="toc-サーバの参考実装">サーバの参考実装</a>
<ul>
<li><a href="#io.delta.sharing.server.deltasharingserviceの概略起動の流れ" id="toc-io.delta.sharing.server.deltasharingserviceの概略起動の流れ">io.delta.sharing.server.DeltaSharingServiceの概略（起動の流れ）</a></li>
<li><a href="#shareのリストを返す箇所の実装" id="toc-shareのリストを返す箇所の実装">Shareのリストを返す箇所の実装</a></li>
<li><a href="#テーブルのバージョンを返す箇所の実装" id="toc-テーブルのバージョンを返す箇所の実装">テーブルのバージョンを返す箇所の実装</a></li>
<li><a href="#io.delta.standalone.internal.deltasharedtable-クラス" id="toc-io.delta.standalone.internal.deltasharedtable-クラス">io.delta.standalone.internal.DeltaSharedTable
クラス</a></li>
<li><a href="#ファイルリストを返す箇所の実装" id="toc-ファイルリストを返す箇所の実装">ファイルリストを返す箇所の実装</a></li>
<li><a href="#クラスローダについて" id="toc-クラスローダについて">クラスローダについて</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://github.com/delta-io/delta-sharing" target="_blank" rel="noopener">Delta
Sharingの公式GitHub</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#read-data-from-a-table" target="_blank" rel="noopener">Read
Data from a Table</a></li>
</ul>
<ul>
<li><a href="https://armeria.dev/" target="_blank" rel="noopener">Armeria</a></li>
<li><a href="https://armeria.dev/docs/server-annotated-service/" target="_blank" rel="noopener">ArmeriaのAnnotated
service</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="サーバの参考実装">サーバの参考実装</span></h2>
<h3><span id="iodeltasharingserverdeltasharingserviceの概略起動の流れ">io.delta.sharing.server.DeltaSharingServiceの概略（起動の流れ）</span></h3>
<p>サーバ起動スクリプトを見ると、以下のように
<code>io.delta.sharing.server.DeltaSharingService</code>
クラスが用いられている事が分かる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">declare -r lib_dir="$(realpath "$&#123;app_home&#125;/../lib")"</span><br><span class="line">declare -a app_mainclass=(io.delta.sharing.server.DeltaSharingService)</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">エントリポイントは以下の通り、</span><br><span class="line"></span><br><span class="line">io/delta/sharing/server/DeltaSharingService.scala:276</span><br><span class="line"></span><br><span class="line">```scala</span><br><span class="line">  def main(args: Array[String]): Unit = &#123;</span><br><span class="line">    val ns = parser.parseArgsOrFail(args)</span><br><span class="line">    val serverConfigPath = ns.getString("config")</span><br><span class="line">    val serverConf = ServerConfig.load(serverConfigPath)</span><br><span class="line">    start(serverConf).blockUntilShutdown()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4><span id="コンフィグのロード">コンフィグのロード</span></h4>
<p>渡された設定ファイルのPATHを用いて、設定を読み込む。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Load the configurations for the server from the config file. If the file name ends with</span></span><br><span class="line"><span class="comment"> * `.yaml` or `.yml`, load it using the YAML parser. Otherwise, throw an error.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load</span></span>(configFile: <span class="type">String</span>): <span class="type">ServerConfig</span> = &#123;</span><br><span class="line">  <span class="keyword">if</span> (configFile.endsWith(<span class="string">".yaml"</span>) || configFile.endsWith(<span class="string">".yml"</span>)) &#123;</span><br><span class="line">    <span class="keyword">val</span> serverConfig =</span><br><span class="line">      createYamlObjectMapper.readValue(<span class="keyword">new</span> <span class="type">File</span>(configFile), classOf[<span class="type">ServerConfig</span>])</span><br><span class="line">    serverConfig.checkConfig()</span><br><span class="line">    serverConfig</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IOException</span>(<span class="string">"The server config file must be a yml or yaml file"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="startメソッド">startメソッド</span></h4>
<p>オブジェクトのmainメソッド。その中で用いられている、
<code>start</code> メソッド内を確認していく。</p>
<p>io/delta/sharing/server/DeltaSharingService.scala:230</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start</span></span>(serverConfig: <span class="type">ServerConfig</span>): <span class="type">Server</span> = &#123;</span><br><span class="line">  <span class="keyword">lazy</span> <span class="keyword">val</span> server = &#123;</span><br><span class="line">    updateDefaultJsonPrinterForScalaPbConverterUtil()</span><br><span class="line">    <span class="keyword">val</span> builder = <span class="type">Server</span>.builder()</span><br><span class="line">      .defaultHostname(serverConfig.getHost)</span><br><span class="line">      .disableDateHeader()</span><br><span class="line">      .disableServerHeader()</span><br><span class="line">      .annotatedService(serverConfig.endpoint, <span class="keyword">new</span> <span class="type">DeltaSharingService</span>(serverConfig): <span class="type">Any</span>)</span><br><span class="line">    <span class="keyword">if</span> (serverConfig.ssl == <span class="literal">null</span>) &#123;</span><br><span class="line">      builder.http(serverConfig.getPort)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      builder.https(serverConfig.getPort)</span><br><span class="line">      <span class="keyword">if</span> (serverConfig.ssl.selfSigned) &#123;</span><br><span class="line">        builder.tlsSelfSigned()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (serverConfig.ssl.certificatePasswordFile == <span class="literal">null</span>) &#123;</span><br><span class="line">          builder.tls(</span><br><span class="line">            <span class="keyword">new</span> <span class="type">File</span>(serverConfig.ssl.certificateFile),</span><br><span class="line">            <span class="keyword">new</span> <span class="type">File</span>(serverConfig.ssl.certificateKeyFile))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          builder.tls(</span><br><span class="line">            <span class="keyword">new</span> <span class="type">File</span>(serverConfig.ssl.certificateFile),</span><br><span class="line">            <span class="keyword">new</span> <span class="type">File</span>(serverConfig.ssl.certificateKeyFile),</span><br><span class="line">            <span class="type">FileUtils</span>.readFileToString(<span class="keyword">new</span> <span class="type">File</span>(serverConfig.ssl.certificatePasswordFile), <span class="type">UTF_8</span>)</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (serverConfig.getAuthorization != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// Authorization is set. Set up the authorization using the token in the server config.</span></span><br><span class="line">      <span class="keyword">val</span> authServiceBuilder =</span><br><span class="line">        <span class="type">AuthService</span>.builder.addOAuth2((_: <span class="type">ServiceRequestContext</span>, token: <span class="type">OAuth2Token</span>) =&gt; &#123;</span><br><span class="line">          <span class="comment">// Use `MessageDigest.isEqual` to do a time-constant comparison to avoid timing attacks</span></span><br><span class="line">          <span class="keyword">val</span> authorized = <span class="type">MessageDigest</span>.isEqual(</span><br><span class="line">            token.accessToken.getBytes(<span class="type">UTF_8</span>),</span><br><span class="line">            serverConfig.getAuthorization.getBearerToken.getBytes(<span class="type">UTF_8</span>))</span><br><span class="line">          <span class="type">CompletableFuture</span>.completedFuture(authorized)</span><br><span class="line">        &#125;)</span><br><span class="line">      builder.decorator(authServiceBuilder.newDecorator)</span><br><span class="line">    &#125;</span><br><span class="line">    builder.build()</span><br><span class="line">  &#125;</span><br><span class="line">  server.start().get()</span><br><span class="line">  server</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一番最後の箇所の通り、</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server.start().get()</span><br><span class="line">server</span><br></pre></td></tr></table></figure>
<p><code>server</code> は、 <a href="https://armeria.dev/" target="_blank" rel="noopener">Armeria</a>
のビルダを用いてインスタンス化されたサーバを起動する。
なお、<code>start</code>メソッド内ではTLS周りの設定、トークンの設定などが行われる。</p>
<p>なお、サーバに渡されるクラスは以下の通り、</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> builder = <span class="type">Server</span>.builder()</span><br><span class="line">  .defaultHostname(serverConfig.getHost)</span><br><span class="line">  .disableDateHeader()</span><br><span class="line">  .disableServerHeader()</span><br><span class="line">  .annotatedService(serverConfig.endpoint, <span class="keyword">new</span> <span class="type">DeltaSharingService</span>(serverConfig): <span class="type">Any</span>)</span><br></pre></td></tr></table></figure>
<p><code>com.linecorp.armeria.server.ServerBuilder#annotatedService(java.lang.String, java.lang.Object)</code>
メソッドを用いて渡される。 渡されているのは
<code>io.delta.sharing.server.DeltaSharingService</code> クラスである。
<code>annotatedService</code> メソッドについては、 <a href="https://armeria.dev/docs/server-annotated-service/" target="_blank" rel="noopener">ArmeriaのAnnotated
service</a> を参照。</p>
<h3><span id="shareのリストを返す箇所の実装">Shareのリストを返す箇所の実装</span></h3>
<p>以下の通り、</p>
<p>io/delta/sharing/server/DeltaSharingService.scala:108</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">"/shares"</span>)</span><br><span class="line"><span class="meta">@ProducesJson</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">listShares</span></span>(</span><br><span class="line">    <span class="meta">@Param</span>(<span class="string">"maxResults"</span>) <span class="meta">@Default</span>(<span class="string">"500"</span>) maxResults: <span class="type">Int</span>,</span><br><span class="line">    <span class="meta">@Param</span>(<span class="string">"pageToken"</span>) <span class="meta">@Nullable</span> pageToken: <span class="type">String</span>): <span class="type">ListSharesResponse</span> = processRequest &#123;</span><br><span class="line">  <span class="keyword">val</span> (shares, nextPageToken) = sharedTableManager.listShares(<span class="type">Option</span>(pageToken), <span class="type">Some</span>(maxResults))</span><br><span class="line">  <span class="type">ListSharesResponse</span>(shares, nextPageToken)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>io.delta.sharing.server.SharedTableManager#SharedTableManager</code>
クラスのインスタンスを利用し、
<code>io.delta.sharing.server.SharedTableManager#listShares</code>
メソッドを用いて、
設定ファイルから読み込んだShareのリストを取得し返す。</p>
<p>つまり、このあたりの値を返す時にはデータ本体にアクセスしていない、ということになる。</p>
<p>仮に...もし設定ファイルに書かれたデータの実体が無かった場合はどうなるのだろうか。
★要確認</p>
<p>テーブルのリスト取得も同じような感じだった。</p>
<h3><span id="テーブルのバージョンを返す箇所の実装">テーブルのバージョンを返す箇所の実装</span></h3>
<p>io/delta/sharing/server/DeltaSharingService.scala:144</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Head</span>(<span class="string">"/shares/&#123;share&#125;/schemas/&#123;schema&#125;/tables/&#123;table&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getTableVersion</span></span>(</span><br><span class="line">  <span class="meta">@Param</span>(<span class="string">"share"</span>) share: <span class="type">String</span>,</span><br><span class="line">  <span class="meta">@Param</span>(<span class="string">"schema"</span>) schema: <span class="type">String</span>,</span><br><span class="line">  <span class="meta">@Param</span>(<span class="string">"table"</span>) table: <span class="type">String</span>): <span class="type">HttpResponse</span> = processRequest &#123;</span><br><span class="line">  <span class="keyword">val</span> tableConfig = sharedTableManager.getTable(share, schema, table)</span><br><span class="line">  <span class="keyword">val</span> version = deltaSharedTableLoader.loadTable(tableConfig).tableVersion</span><br><span class="line">  <span class="keyword">val</span> headers = createHeadersBuilderForTableVersion(version).build()</span><br><span class="line">  <span class="type">HttpResponse</span>.of(headers)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>io.delta.sharing.server.SharedTableManager#getTable</code>
メソッドを利用し、コンフィグから読み込んだ情報を元に
テーブル情報を取得する。</p>
<p>つづいて、
<code>io.delta.standalone.internal.DeltaSharedTableLoader#loadTable</code>
メソッドを利用し、
<code>io.delta.standalone.internal.DeltaSharedTable#DeltaSharedTable</code>
クラスのインスタンスを取得する。</p>
<p><code>DeltaSharedTable</code> クラスは、 <code>DeltaLog</code>
クラスをラップした管理用のクラス。</p>
<h3><span id="iodeltastandaloneinternaldeltasharedtableクラス">io.delta.standalone.internal.DeltaSharedTable
クラス</span></h3>
<p>このクラスは、<code>DeltaLog</code>
クラスをラップしたものであり、サーバの管理機能の主要なコンポーネントである。</p>
<h4><span id="deltalogの取得">deltaLogの取得</span></h4>
<p>例えば <code>deltaLog</code> インスタンスを取得できる。</p>
<p>io/delta/standalone/internal/DeltaSharedTableLoader.scala:74</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> deltaLog = withClassLoader &#123;</span><br><span class="line">  <span class="keyword">val</span> tablePath = <span class="keyword">new</span> <span class="type">Path</span>(tableConfig.getLocation)</span><br><span class="line">  <span class="keyword">val</span> fs = tablePath.getFileSystem(conf)</span><br><span class="line">  <span class="keyword">if</span> (!fs.isInstanceOf[<span class="type">S3AFileSystem</span>]) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IllegalStateException</span>(<span class="string">"Cannot share tables on non S3 file systems"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">DeltaLog</span>.forTable(conf, tablePath).asInstanceOf[<span class="type">DeltaLogImpl</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上記の通り、内部では
<code>io.delta.standalone.DeltaLog#forTable(org.apache.hadoop.conf.Configuration, org.apache.hadoop.fs.Path)</code>
メソッドが 用いられており、実際にDelta
Lake形式で保存されたデータ本体（Delta
Lakeのメタデータ）にアクセスする。</p>
<h4><span id="テーブルバージョン取得">テーブルバージョン取得</span></h4>
<p>Delta Logの機能を利用し、テーブルのバージョンを取得できる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Return the current table version */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tableVersion</span></span>: <span class="type">Long</span> = withClassLoader &#123;</span><br><span class="line">  <span class="keyword">val</span> snapshot = deltaLog.snapshot</span><br><span class="line">  validateDeltaTable(snapshot)</span><br><span class="line">  snapshot.version</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>この機能は
<code>io.delta.sharing.server.DeltaSharingService#getTableVersion</code>
の実装に利用されている。</p>
<h4><span id="クエリ">クエリ</span></h4>
<p><code>io.delta.standalone.internal.DeltaSharedTable#query</code>
メソッドは、 後述の通り、<code>DeltaSharingSerivce</code>
内でファイルリストを取得したり、メタデータを取得したりするときに用いられる。</p>
<h3><span id="ファイルリストを返す箇所の実装">ファイルリストを返す箇所の実装</span></h3>
<p><code>query</code> はファイルリストを返すAPIである。</p>
<p>io/delta/sharing/server/DeltaSharingService.scala:169</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Post</span>(<span class="string">"/shares/&#123;share&#125;/schemas/&#123;schema&#125;/tables/&#123;table&#125;/query"</span>)</span><br><span class="line"><span class="meta">@ConsumesJson</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">listFiles</span></span>(</span><br><span class="line">    <span class="meta">@Param</span>(<span class="string">"share"</span>) share: <span class="type">String</span>,</span><br><span class="line">    <span class="meta">@Param</span>(<span class="string">"schema"</span>) schema: <span class="type">String</span>,</span><br><span class="line">    <span class="meta">@Param</span>(<span class="string">"table"</span>) table: <span class="type">String</span>,</span><br><span class="line">    queryTableRequest: <span class="type">QueryTableRequest</span>): <span class="type">HttpResponse</span> = processRequest &#123;</span><br><span class="line">  <span class="keyword">val</span> tableConfig = sharedTableManager.getTable(share, schema, table)</span><br><span class="line">  <span class="keyword">val</span> (version, actions) = deltaSharedTableLoader.loadTable(tableConfig).query(</span><br><span class="line">    includeFiles = <span class="literal">true</span>,</span><br><span class="line">    queryTableRequest.predicateHints,</span><br><span class="line">    queryTableRequest.limitHint)</span><br><span class="line">  streamingOutput(version, actions)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>特徴的なのは、 <code>predicateHints</code> や <code>limitHint</code>
が渡されており、フィルタ条件が指定できる点。
ただし、公式ドキュメント上では「ベストエフォート」と書かれている。</p>
<p>このメソッドのポイントは、
<code>io.delta.standalone.internal.DeltaSharedTableLoader#DeltaSharedTableLoader</code>
クラスを用いたクエリの部分だと考えられる。
このクラスは、Deltaテーブルの本体にアクセスし、各種情報を読みこむためのもので、コメントを読む限り、キャッシュする機能なども有している。
内部では <code>io.delta.standalone.internal.DeltaSharedTable</code>
クラスが利用されている。 <code>DeltaSharedTable</code> クラスは、
<code>DeltaLog</code> をラップしたものであり、Delta
Logの各種情報をサーバ内で扱うための機能を提供する。</p>
<p>特に、今回用いられているのは
<code>io.delta.standalone.internal.DeltaSharedTable#query</code>
メソッドである。</p>
<p>io/delta/standalone/internal/DeltaSharedTableLoader.scala:118</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">query</span></span>(</span><br><span class="line">      includeFiles: <span class="type">Boolean</span>,</span><br><span class="line">      predicateHits: <span class="type">Seq</span>[<span class="type">String</span>],</span><br><span class="line">      limitHint: <span class="type">Option</span>[<span class="type">Int</span>]): (<span class="type">Long</span>, <span class="type">Seq</span>[model.<span class="type">SingleAction</span>]) = withClassLoader &#123;</span><br><span class="line">    <span class="comment">// TODO Support `limitHint`</span></span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p>メソッドの定義の通り、このクエリは最終的に、</p>
<p>io/delta/standalone/internal/DeltaSharedTableLoader.scala:165</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snapshot.version -&gt; actions</span><br></pre></td></tr></table></figure>
<p>Delta
Logから情報取得したスナップショットのバージョン、ファイル情報のシーケンスを返す。</p>
<p>なお、 <code>actions</code> に格納されている
<code>SingleAction</code> クラスは以下の通り、
ファイルひとつに関する情報、プロトコルの情報、メタデータについての情報を保持している。</p>
<p>io/delta/sharing/server/model.scala:22</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleAction</span>(<span class="params"></span></span></span><br><span class="line"><span class="class"><span class="params">    file: <span class="type">AddFile</span> = null,</span></span></span><br><span class="line"><span class="class"><span class="params">    metaData: <span class="type">Metadata</span> = null,</span></span></span><br><span class="line"><span class="class"><span class="params">    protocol: <span class="type">Protocol</span> = null</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">unwrap</span></span>: <span class="type">Action</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (file != <span class="literal">null</span>) &#123;</span><br><span class="line">      file</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (metaData != <span class="literal">null</span>) &#123;</span><br><span class="line">      metaData</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (protocol != <span class="literal">null</span>) &#123;</span><br><span class="line">      protocol</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="アクションの生成される箇所">アクションの生成される箇所</span></h4>
<p>上記の通り、ここでいう「アクション」とはデータの実体であるファイル1個に関連する情報の塊である。
生成されるのは以下の箇所。</p>
<p>io/delta/standalone/internal/DeltaSharedTableLoader.scala:137</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> actions = <span class="type">Seq</span>(modelProtocol.wrap, modelMetadata.wrap) ++ &#123;</span><br><span class="line">  <span class="keyword">if</span> (includeFiles) &#123;</span><br><span class="line">    <span class="keyword">val</span> selectedFiles = state.activeFiles.values.toSeq</span><br><span class="line">    <span class="keyword">val</span> filteredFilters =</span><br><span class="line">      <span class="keyword">if</span> (evaluatePredicateHints &amp;&amp; modelMetadata.partitionColumns.nonEmpty) &#123;</span><br><span class="line">        <span class="type">PartitionFilterUtils</span>.evaluatePredicate(</span><br><span class="line">          modelMetadata.schemaString,</span><br><span class="line">          modelMetadata.partitionColumns,</span><br><span class="line">          predicateHits,</span><br><span class="line">          selectedFiles</span><br><span class="line">        )</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        selectedFiles</span><br><span class="line">      &#125;</span><br><span class="line">    filteredFilters.map &#123; addFile =&gt;</span><br><span class="line">      <span class="keyword">val</span> cloudPath = absolutePath(deltaLog.dataPath, addFile.path)</span><br><span class="line">      <span class="keyword">val</span> signedUrl = signFile(cloudPath)</span><br><span class="line">      <span class="keyword">val</span> modelAddFile = model.<span class="type">AddFile</span>(url = signedUrl,</span><br><span class="line">        id = <span class="type">Hashing</span>.md5().hashString(addFile.path, <span class="type">UTF_8</span>).toString,</span><br><span class="line">        partitionValues = addFile.partitionValues,</span><br><span class="line">        size = addFile.size,</span><br><span class="line">        stats = addFile.stats)</span><br><span class="line">      modelAddFile.wrap</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="type">Nil</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最初から主要な部分の実装を確認する。</p>
<p>まず、シーケンスを作る際、先頭にプロトコルとメタデータをラップしたアクションが保持される。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> actions = <span class="type">Seq</span>(modelProtocol.wrap, modelMetadata.wrap) ++ &#123;</span><br></pre></td></tr></table></figure>
<p>その後、適宜ファイルに関する情報が格納される。 一応
<code>includeFiles</code>
で空情報を返すかどうかの判定があるが、ここではTrueだとして話を進める。</p>
<p>まず、Delta Lakeテーブルのアクティブなファイルが取得される。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> selectedFiles = state.activeFiles.values.toSeq</span><br></pre></td></tr></table></figure>
<p>つづいて、Predicateヒントがあり、パーティションカラムが設定されている場合は、
それに基づいてフィルタが行われる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> filteredFilters =</span><br><span class="line">  <span class="keyword">if</span> (evaluatePredicateHints &amp;&amp; modelMetadata.partitionColumns.nonEmpty) &#123;</span><br><span class="line">    <span class="type">PartitionFilterUtils</span>.evaluatePredicate(</span><br><span class="line">      modelMetadata.schemaString,</span><br><span class="line">      modelMetadata.partitionColumns,</span><br><span class="line">      predicateHits,</span><br><span class="line">      selectedFiles</span><br><span class="line">    )</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    selectedFiles</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>ヒントを用いてフィルタしている箇所については後述する。</p>
<p>ここではフィルタされたファイルのリストが返されたとして話を続ける。</p>
<p>次に、<code>AddFile</code>
の情報を用いて、より詳細な情報が確認される。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">filteredFilters.map &#123; addFile =&gt;</span><br><span class="line">  <span class="keyword">val</span> cloudPath = absolutePath(deltaLog.dataPath, addFile.path)</span><br><span class="line">  <span class="keyword">val</span> signedUrl = signFile(cloudPath)</span><br><span class="line">  <span class="keyword">val</span> modelAddFile = model.<span class="type">AddFile</span>(url = signedUrl,</span><br><span class="line">    id = <span class="type">Hashing</span>.md5().hashString(addFile.path, <span class="type">UTF_8</span>).toString,</span><br><span class="line">    partitionValues = addFile.partitionValues,</span><br><span class="line">    size = addFile.size,</span><br><span class="line">    stats = addFile.stats)</span><br><span class="line">  modelAddFile.wrap</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>絶対PATH（というかURL）の取得、下回りのストレージ（現時点ではS3のみ対応）の署名済みURL取得が行われ、
改めて <code>AddFile</code>
に格納されたのち、アクションにラップされて返される。</p>
<p>ここで、1点だけ署名済みURL取得する部分だけ確認する。 取得には、
<code>io.delta.standalone.internal.DeltaSharedTable#signFile</code>
メソッドが用いられる。</p>
<p>io/delta/standalone/internal/DeltaSharedTableLoader.scala:192</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">signFile</span></span>(path: <span class="type">Path</span>): <span class="type">String</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> absPath = path.toUri</span><br><span class="line">  <span class="keyword">val</span> bucketName = absPath.getHost</span><br><span class="line">  <span class="keyword">val</span> objectKey = absPath.getPath.stripPrefix(<span class="string">"/"</span>)</span><br><span class="line">  signer.sign(bucketName, objectKey).toString</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>このメソッドでは、上記の通り、内部でバケット名やオブジェクトキーを渡しながら、
<code>io.delta.sharing.server.S3FileSigner#sign</code>
メソッドが利用されている。</p>
<p>なお、<code>signer</code> インスタンスは以下のようになっており、</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> signer = withClassLoader &#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">S3FileSigner</span>(deltaLog.dataPath.toUri, conf, preSignedUrlTimeoutSeconds)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将来的にS3以外にも対応できるような余地が残されている。</p>
<p>さて、 <code>sign</code> メソッドに戻る。</p>
<p>io/delta/sharing/server/CloudFileSigner.scala:41</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">sign</span></span>(bucket: <span class="type">String</span>, objectKey: <span class="type">String</span>): <span class="type">URL</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> expiration =</span><br><span class="line">    <span class="keyword">new</span> <span class="type">Date</span>(<span class="type">System</span>.currentTimeMillis() + <span class="type">SECONDS</span>.toMillis(preSignedUrlTimeoutSeconds))</span><br><span class="line">  <span class="keyword">val</span> request = <span class="keyword">new</span> <span class="type">GeneratePresignedUrlRequest</span>(bucket, objectKey)</span><br><span class="line">    .withMethod(<span class="type">HttpMethod</span>.<span class="type">GET</span>)</span><br><span class="line">    .withExpiration(expiration)</span><br><span class="line">  s3Client.generatePresignedUrl(request)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上記の通り、
<code>com.amazonaws.services.s3.model.GeneratePresignedUrlRequest#GeneratePresignedUrlRequest(java.lang.String, java.lang.String)</code>
メソッドを利用してS3の署名付きURLが取得されている事が分かる。</p>
<h4><span id="ヒントが利用されている箇所">ヒントが利用されている箇所</span></h4>
<p>2021/9/18現在では、 <code>predicateHits</code>
は用いられているが、<code>limitHint</code>
は用いていないように見える。</p>
<p><code>predicateHints</code> が用いられるのは以下の個所。</p>
<p>io/delta/standalone/internal/DeltaSharedTableLoader.scala:142</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PartitionFilterUtils</span>.evaluatePredicate(</span><br><span class="line">  modelMetadata.schemaString,</span><br><span class="line">  modelMetadata.partitionColumns,</span><br><span class="line">  predicateHits,</span><br><span class="line">  selectedFiles</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><code>io.delta.standalone.internal.PartitionFilterUtils$#evaluatePredicate</code>
メソッドは、 引数に <code>predicateHits</code> や対象となるDelta
Tableに紐づいているアクティブなファイルリストを引数に渡される。
内部で、有効なpredicateかどうかなどをチェックされたのち、有効なpredicate文言があれば、
それに従いファイルリストがフィルタされる。</p>
<p>なお、内部的にはDelta
LakeやSpark（の特にCatalyst）の実装に依存しているような箇所がみられる。</p>
<p>具体的には、 <code>evaluatePredicate</code>
メソッド内の以下の個所。</p>
<p>io/delta/standalone/internal/PartitionFilterUtils.scala:61</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">addFiles.filter &#123; addFile =&gt;</span><br><span class="line">  <span class="keyword">val</span> converter = <span class="type">CatalystTypeConverters</span>.createToCatalystConverter(addSchema)</span><br><span class="line">  predicate.eval(converter(addFile).asInstanceOf[<span class="type">InternalRow</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ここで <code>predicate</code> は
<code>org.apache.spark.sql.catalyst.expressions.InterpretedPredicate</code>
クラスの
インスタンスである。（SparkのCatalystで用いられる、Predicate表現のひとつ）
このとき、<code>eval</code> メソッドが呼び出されていることがわかる。</p>
<p>/home/dobachi/.cache/coursier/v1/https/repo1.maven.org/maven2/org/apache/spark/spark-catalyst_2.12/2.4.7/spark-catalyst_2.12-2.4.7-sources.jar!/org/apache/spark/sql/catalyst/expressions/predicates.scala:39</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">InterpretedPredicate</span>(<span class="params">expression: <span class="type">Expression</span></span>) <span class="keyword">extends</span> <span class="title">BasePredicate</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">eval</span></span>(r: <span class="type">InternalRow</span>): <span class="type">Boolean</span> = expression.eval(r).asInstanceOf[<span class="type">Boolean</span>]</span><br></pre></td></tr></table></figure>
<p>このように、SparkのCatalystにおいては <code>eval</code>
メソッドには、Spark SQLの行の表現である <code>InternalRow</code>
のインスタンスが渡され、当該 <code>predicate</code>
に合致するかどうかがチェックされる。</p>
<h3><span id="クラスローダについて">クラスローダについて</span></h3>
<p>このクラスには、 <code>withClassLoader</code> が定義されており、
Armeriaではなく、DeltaSharedTableのクラスローダの下で関数を実行できるようになっている。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Run `func` under the classloader of `DeltaSharedTable`. We cannot use the classloader set by</span></span><br><span class="line"><span class="comment"> * Armeria as Hadoop needs to search the classpath to find its classes.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">withClassLoader</span></span>[<span class="type">T</span>](func: =&gt; <span class="type">T</span>): <span class="type">T</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> classLoader = <span class="type">Thread</span>.currentThread().getContextClassLoader</span><br><span class="line">  <span class="keyword">if</span> (classLoader == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="type">Thread</span>.currentThread().setContextClassLoader(<span class="keyword">this</span>.getClass.getClassLoader)</span><br><span class="line">    <span class="keyword">try</span> func <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="type">Thread</span>.currentThread().setContextClassLoader(<span class="literal">null</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    func</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2021/08/30/Source-Code-Reading-of-Delta-Sharing/" data-id="clmdqphnp01a91ws6ltfnfwrb" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Recent-hot-activities-of-Delta-Sharing" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2021/08/27/Recent-hot-activities-of-Delta-Sharing/">Recent hot activities of Delta Sharing</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2021/08/27/Recent-hot-activities-of-Delta-Sharing/">
            <time datetime="2021-08-27T00:22:38.000Z" itemprop="datePublished">2021-08-27</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/Delta-Sharing/">Delta Sharing</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Delta-Lake/">Delta Lake</a>, <a class="tag-link" href="/memo-blog/tags/Delta-Sharing/">Delta Sharing</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#いま何がどのくらいできるようになっているのか" id="toc-いま何がどのくらいできるようになっているのか">いま何がどのくらいできるようになっているのか？</a>
<ul>
<li><a href="#クライアント開発言語バインディング" id="toc-クライアント開発言語バインディング">クライアント、開発言語バインディング</a></li>
<li><a href="#サーバの参考実装" id="toc-サーバの参考実装">サーバの参考実装</a></li>
<li><a href="#プロトコル" id="toc-プロトコル">プロトコル</a></li>
<li><a href="#テーブルメタデータ" id="toc-テーブルメタデータ">テーブルメタデータ</a></li>
</ul></li>
<li><a href="#support-writing-to-delta-shares" id="toc-support-writing-to-delta-shares">Support writing to Delta
Shares</a></li>
<li><a href="#add-pre-signed-url-request-logging-to-server" id="toc-add-pre-signed-url-request-logging-to-server">Add pre-signed URL
request logging to server</a></li>
<li><a href="#support-azure-storage-in-delta-sharing-server" id="toc-support-azure-storage-in-delta-sharing-server">Support Azure
Storage in Delta Sharing Server</a></li>
<li><a href="#support-google-cloud-storage-in-delta-sharing-server" id="toc-support-google-cloud-storage-in-delta-sharing-server">Support
Google Cloud Storage in Delta Sharing Server</a></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://github.com/delta-io/delta-sharing" target="_blank" rel="noopener">Delta
Sharing公式GitHub</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md" target="_blank" rel="noopener">Delta
Sharing Protocal</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/server/src/universal/conf/delta-sharing-server.yaml.template" target="_blank" rel="noopener">delta-sharing-server.yaml.template</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#concepts" target="_blank" rel="noopener">Concept</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#metadata" target="_blank" rel="noopener">Metadata</a></li>
</ul>
<ul>
<li><a href="https://github.com/delta-io/delta-sharing/issues/33" target="_blank" rel="noopener">Support
writing to Delta Shares #33</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/issues/39" target="_blank" rel="noopener">Add
pre-signed URL request logging to server</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/issues/21" target="_blank" rel="noopener">Support Azure
Storage in Delta Sharing Server</a></li>
<li><a href="https://docs.microsoft.com/en-us/rest/api/storageservices/delegate-access-with-shared-access-signature" target="_blank" rel="noopener">Delegate
access with a shared access signature</a></li>
<li><a href="https://github.com/delta-io/delta-sharing/issues/20" target="_blank" rel="noopener">Support
Google Cloud Storage in Delta Sharing Server</a></li>
<li><a href="https://cloud.google.com/storage/docs/access-control/signed-urls" target="_blank" rel="noopener">署名付きURL</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="いま何がどのくらいできるようになっているのか">いま何がどのくらいできるようになっているのか？</span></h2>
<p>2021/9時点で何ができるのか？ <a href="https://github.com/delta-io/delta-sharing" target="_blank" rel="noopener">Delta
Sharing公式GitHub</a> のREADMEによると以下の通り。</p>
<h3><span id="クライアント-開発言語バインディング">クライアント、開発言語バインディング</span></h3>
<ul>
<li>SQL（Spark SQL）</li>
<li>Python</li>
<li>Scala</li>
<li>Java</li>
<li>R</li>
</ul>
<h3><span id="サーバの参考実装">サーバの参考実装</span></h3>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md" target="_blank" rel="noopener">Delta
Sharing Protocal</a> に乗っ取ってデータ共有の動作確認が可能な
参考実装が公開されている。</p>
<p>ただし、この実装にはセキュリティ周りの機能が十分に実装されておらず、
もし公開して利用する場合はプロキシの裏側で使うことが推奨されている。</p>
<p>サーバを立ち上げるときに共有するデータの定義を渡せる。 <a href="https://github.com/delta-io/delta-sharing/blob/main/server/src/universal/conf/delta-sharing-server.yaml.template" target="_blank" rel="noopener">delta-sharing-server.yaml.template</a>
にコンフィグのサンプルが載っている。</p>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#concepts" target="_blank" rel="noopener">Concept</a>
にデータモデル、主要なコンポーネントが載っている。</p>
<ul>
<li>Share（シェア）:
<ul>
<li>共有の論理的なグループ</li>
<li>このグループに含まれるものが受信者に共有される。</li>
</ul></li>
<li>Schema（スキーマ）:
<ul>
<li>複数のTableを含む</li>
</ul></li>
<li>Table（テーブル）:
<ul>
<li>Delta Lakeのテーブルもしくはビュー</li>
</ul></li>
<li>Recipient（受信者）:
<ul>
<li>シェアにアクセス可能なBearerトークンをもつもの</li>
</ul></li>
<li>Sharing Server（共有サーバ）:
<ul>
<li>プロトコルを実装したサーバ</li>
</ul></li>
</ul>
<h3><span id="プロトコル">プロトコル</span></h3>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md" target="_blank" rel="noopener">Delta
Sharing Protocal</a> に載っている通り、 Delta
Sharingのサーバとクライアントの間のプロトコルが規定されている。</p>
<ul>
<li>シェアをリスト</li>
<li>シェア内のスキーマをリスト</li>
<li>スキーマ内のテーブルをリスト</li>
<li>テーブルのバージョン情報取得
<ul>
<li>おそらくDelta Lakeとしてのバージョン情報</li>
</ul></li>
<li>テーブルのメタデータ取得</li>
<li>データ取得
<ul>
<li>データ取得時には、PredicateHint、LimitHintを渡せる</li>
</ul></li>
</ul>
<h3><span id="テーブルメタデータ">テーブルメタデータ</span></h3>
<p><a href="https://github.com/delta-io/delta-sharing/blob/main/PROTOCOL.md#metadata" target="_blank" rel="noopener">Metadata</a>
にテーブルに付帯できるメタデータの定義が載っている。
スキーマやフォーマットなどの情報に加え、任意の説明を保持できるようだ。</p>
<h2><span id="support-writing-to-deltashares">Support writing to Delta
Shares</span></h2>
<p><a href="https://github.com/delta-io/delta-sharing/issues/33" target="_blank" rel="noopener">Support
writing to Delta Shares #33</a></p>
<p>書き込みへの対応について提案がなされたが、2021/8/27現在は保留となっている。
いったん読み込みに注力、とのこと。</p>
<p>なお、Treasure DataのTaroさんがTreasure
Dataにおける対応例を紹介している。 （が、それに対する応答はない）</p>
<h2><span id="add-pre-signed-urlrequest-logging-to-server">Add pre-signed URL
request logging to server</span></h2>
<p><a href="https://github.com/delta-io/delta-sharing/issues/39" target="_blank" rel="noopener">Add
pre-signed URL request logging to server</a></p>
<p>今のところ、プリサインドURLの件数を知る術がない。
そこで、DEBUGログにプリサインドURLの発行情報を出力するのはどうか、というチケットが挙がっていた。</p>
<h2><span id="support-azurestorage-in-delta-sharing-server">Support Azure
Storage in Delta Sharing Server</span></h2>
<p><a href="https://github.com/delta-io/delta-sharing/issues/21" target="_blank" rel="noopener">Support
Azure Storage in Delta Sharing Server</a></p>
<p>Azureでは、 <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/delegate-access-with-shared-access-signature" target="_blank" rel="noopener">Delegate
access with a shared access signature</a>
の機能が提供されているので、割と対応しやすいのでは？という議論になっている。
AzureのSASは、定められたパーミッションで定められた期間だけリソースにアクセス可能にする。</p>
<p>なお、SASにはアカウントレベル、サービスレベル、ユーザデリゲーションの3種類がある。
それぞれスコープやできることが異なる。</p>
<p>Delta
Sharingがストレージに特化しているのであれば、まずはBlobに対するデリゲーションURLを発行できれば良さそうである。</p>
<h2><span id="supportgoogle-cloud-storage-in-delta-sharing-server">Support
Google Cloud Storage in Delta Sharing Server</span></h2>
<p><a href="https://github.com/delta-io/delta-sharing/issues/20" target="_blank" rel="noopener">Support
Google Cloud Storage in Delta Sharing Server</a></p>
<p>Azureと同じく、 <a href="https://cloud.google.com/storage/docs/access-control/signed-urls" target="_blank" rel="noopener">署名付きURL</a>
に対応しているため、そこまで難しくは無いだろう、というコメントがあった。</p>
<p>これはどうだろうか？</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2021/08/27/Recent-hot-activities-of-Delta-Sharing/" data-id="clmdqphem00hq1ws6gh349elr" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-SparkSummit2021" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2021/08/24/SparkSummit2021/">Spark Summit 2021の前にきになってみたセッションのメモ</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2021/08/24/SparkSummit2021/">
            <time datetime="2021-08-24T05:19:25.000Z" itemprop="datePublished">2021-08-24</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/">Storage Layer</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Delta-Lake/">Delta Lake</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Delta-Lake/">Delta Lake</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#lakehouse-with-delta-lake-deep-dive-training" id="toc-lakehouse-with-delta-lake-deep-dive-training">Lakehouse with
Delta Lake Deep Dive Training</a></li>
</ul></li>
<li><a href="#manufacturing-and-distribution-industry-forum" id="toc-manufacturing-and-distribution-industry-forum">Manufacturing and
Distribution Industry Forum</a></li>
<li><a href="#data-distribution-and-ordering-for-efficient-data-source-v2" id="toc-data-distribution-and-ordering-for-efficient-data-source-v2">Data
Distribution and Ordering for Efficient Data Source V2</a></li>
<li><a href="#delta-lake-streaming-under-the-hood" id="toc-delta-lake-streaming-under-the-hood">Delta Lake Streaming Under
the Hood</a></li>
<li><a href="#introducing-delta-live-tables-make-reliable-etl-easy-on-delta-lake" id="toc-introducing-delta-live-tables-make-reliable-etl-easy-on-delta-lake">Introducing
Delta Live Tables Make Reliable ETL Easy on Delta Lake</a></li>
<li><a href="#magnet-shuffle-service-push-based-shuffle-at-linkedin" id="toc-magnet-shuffle-service-push-based-shuffle-at-linkedin">Magnet
Shuffle Service Push-based Shuffle at LinkedIn</a></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<h1><span id="メモ">メモ</span></h1>
<p>Spark Summit 2021の気になったセッションのメモ</p>
<h2><span id="lakehouse-withdelta-lake-deep-dive-training">Lakehouse with
Delta Lake Deep Dive Training</span></h2>
<iframe src="https://onedrive.live.com/embed?cid=C6E669622F542498&amp;resid=C6E669622F542498%21102771&amp;authkey=AANiUnaZ6a44Hws&amp;em=2" width="402" height="327" frameborder="0" scrolling="no">
</iframe>
<h1><span id="manufacturing-anddistribution-industry-forum">Manufacturing and
Distribution Industry Forum</span></h1>
<iframe src="https://onedrive.live.com/embed?cid=C6E669622F542498&amp;resid=C6E669622F542498%21102773&amp;authkey=AFV8OgbNkzPamIM&amp;em=2" width="402" height="327" frameborder="0" scrolling="no">
</iframe>
<h1><span id="datadistribution-and-ordering-for-efficient-data-source-v2">Data
Distribution and Ordering for Efficient Data Source V2</span></h1>
<iframe src="https://onedrive.live.com/embed?cid=C6E669622F542498&amp;resid=C6E669622F542498%21102775&amp;authkey=ABoDoU24y1jXlgs&amp;em=2" width="402" height="327" frameborder="0" scrolling="no">
</iframe>
<h1><span id="delta-lake-streaming-underthe-hood">Delta Lake Streaming Under
the Hood</span></h1>
<iframe src="https://onedrive.live.com/embed?cid=C6E669622F542498&amp;resid=C6E669622F542498%21102777&amp;authkey=AKrMZjoufCusH_I&amp;em=2" width="402" height="327" frameborder="0" scrolling="no">
</iframe>
<h1><span id="introducingdelta-live-tables-make-reliable-etl-easy-on-delta-lake">Introducing
Delta Live Tables Make Reliable ETL Easy on Delta Lake</span></h1>
<iframe src="https://onedrive.live.com/embed?cid=C6E669622F542498&amp;resid=C6E669622F542498%21102779&amp;authkey=AJnZHK3MHDHOO48&amp;em=2" width="402" height="327" frameborder="0" scrolling="no">
</iframe>
<h1><span id="magnetshuffle-service-push-based-shuffle-at-linkedin">Magnet
Shuffle Service Push-based Shuffle at LinkedIn</span></h1>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2021/08/24/SparkSummit2021/" data-id="clmdqphf300is1ws606ixe24b" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/memo-blog/">&laquo; 前</a><a class="page-number" href="/memo-blog/">1</a><span class="page-number current">2</span><a class="page-number" href="/memo-blog/page/3/">3</a><a class="page-number" href="/memo-blog/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/memo-blog/page/21/">21</a><a class="extend next" rel="next" href="/memo-blog/page/3/">次 &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最近の記事</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/">Data Spaces</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/09/09/Generate-OpenAPI-Spec-of-EDC-Connector/" class="title">Generate OpenAPI Spec of EDC Connector</a></p>
                            <p class="item-date"><time datetime="2023-09-09T13:26:58.000Z" itemprop="datePublished">2023-09-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Open-API/">Open API</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/09/07/OpenAPI-Generator-for-Flask/" class="title">OpenAPI Generator for Flask</a></p>
                            <p class="item-date"><time datetime="2023-09-07T13:10:58.000Z" itemprop="datePublished">2023-09-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/">Data Spaces</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/08/31/IDS-Dataspace-Protocol/" class="title">IDS Dataspace Protocol</a></p>
                            <p class="item-date"><time datetime="2023-08-31T06:56:27.000Z" itemprop="datePublished">2023-08-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/SDK/">SDK</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/08/27/How-to-create-SDK/" class="title">How to create SDK (WIP)</a></p>
                            <p class="item-date"><time datetime="2023-08-27T05:11:45.000Z" itemprop="datePublished">2023-08-27</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Windows/">Windows</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/08/15/check-windows-cpu-resources/" class="title">check windows cpu resources</a></p>
                            <p class="item-date"><time datetime="2023-08-14T15:32:07.000Z" itemprop="datePublished">2023-08-15</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">カテゴリ</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/">Clipping</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/AI/">AI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Camera/">Camera</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Camera/Lighting/">Lighting</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Cloud/">Cloud</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Database/">Database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Kafka/">Kafka</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/List/">List</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/List/Research/">Research</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Management/">Management</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/PostgreSQL/">PostgreSQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Stream-Processing/">Stream Processing</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Uber/">Uber</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Vim/">Vim</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Windows-Tools/">Windows Tools</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/">Home server</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/File-server/">File server</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Hardware/">Hardware</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Nature-Remo/">Nature Remo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Network/">Network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Remote-desktop/">Remote desktop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/">Ubuntu</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/Adobe-Reader/">Adobe Reader</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/Gnome/">Gnome</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/KVM/">KVM</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/OneDrive/">OneDrive</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/vim/">vim</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Video-processing/">Video processing</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><span class="category-list-count">158</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Alluxio/">Alluxio</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/BaaS/">BaaS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Configuration-Management/">Configuration Management</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Configuration-Management/Ansible/">Ansible</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Catalog/">Data Catalog</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Catalog/CKAN/">CKAN</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/Delta-Sharing/">Delta Sharing</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/X-Road/">X-Road</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Engineering/">Data Engineering</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Engineering/Data-Lineage/">Data Lineage</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Engineering/Data-Transformation/">Data Transformation</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Mesh/">Data Mesh</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Processing-Engine/">Data Processing Engine</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/">Data Spaces</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/EDC/">EDC</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/IDS/">IDS</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Documentation/">Documentation</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Flask/">Flask</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/GPD-Pocket/">GPD Pocket</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/GPD-Pocket/Device/">Device</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/GPD-Pocket/Device/Bluetooth/">Bluetooth</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/HBase/">HBase</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/">Hadoop</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/Ambari/">Ambari</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/BigTop/">BigTop</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/HDP/">HDP</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hexo/">Hexo</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Home-Network/">Home Network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hyper/">Hyper</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hyper/Plugin/">Plugin</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hyper-V/">Hyper-V</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/">Keyboard</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/Corne-Chocolate/">Corne Chocolate</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/QMK/">QMK</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Kubernetes/">Kubernetes</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/">Machine Learning</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Analytics-Zoo/">Analytics Zoo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/AutoML/">AutoML</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Data-Platform/">Data Platform</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Flow-Engine/">Flow Engine</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Kaggle/">Kaggle</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/MLflow/">MLflow</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/">Model</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/Cross-Validation/">Cross Validation</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/Data-Leakage/">Data Leakage</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/Partial-Dependency-Plot/">Partial Dependency Plot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/XGBoost/">XGBoost</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model-Management/">Model Management</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model-Management/Clipper/">Clipper</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/OpML/">OpML</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Preparation/">Preparation</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Software-Engineering-Patterns/">Software Engineering Patterns</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Stream-Processing/">Stream Processing</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Visualization/">Visualization</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Visualization/Seaborn/">Seaborn</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Word2Vec/">Word2Vec</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Messaging-System/">Messaging System</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Messaging-System/Kafka/">Kafka</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Metadata-Management/">Metadata Management</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Monitering/">Monitering</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-API/">Open API</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-Data/">Open Data</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-Data/Scraping/">Scraping</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-Data/Tellus/">Tellus</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Pinot/">Pinot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Power-Grid-Data/">Power Grid Data</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/">Python</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/Jupyter/">Jupyter</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/Pipenv/">Pipenv</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/pyenv/">pyenv</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/SDK/">SDK</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/SQLAlchemy/">SQLAlchemy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Scala/">Scala</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Scala/SBT/">SBT</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Spark/">Spark</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Spark/Spark-Summit/">Spark Summit</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/">Storage Layer</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Delta-Lake/">Delta Lake</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Hudi/">Hudi</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Minio/">Minio</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/">Stream Processing</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/Apache-Edgent/">Apache Edgent</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/Kappa-Architecture/">Kappa Architecture</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/MillWheel/">MillWheel</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/Twitter-Heron/">Twitter Heron</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/">Tools</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/Git/">Git</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/Intellij/">Intellij</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/Selenium/">Selenium</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/tmux/">tmux</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/">WSL</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/CentOS/">CentOS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/Docker/">Docker</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/Terminal-tool/">Terminal tool</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/Vagrant/">Vagrant</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/X-Window/">X Window</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/">Windows</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/Ansible/">Ansible</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/Docker/">Docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/Hyper-V/">Hyper-V</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Zeppelin/">Zeppelin</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/ZooKeeper/">ZooKeeper</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/vim/">vim</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/">Research</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/AWS/">AWS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Conference/">Conference</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Conference/DevSumi/">DevSumi</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Data-Analytics/">Data Analytics</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Data-Analytics/Tools/">Tools</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Machine-Learning/">Machine Learning</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Machine-Learning/BigDL/">BigDL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Machine-Learning/TensorFlow/">TensorFlow</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/NVM/">NVM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/SX-Aurora-Frovedis/">SX-Aurora/Frovedis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Trends/">Trends</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Video-processing/">Video processing</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Video-processing/BlazeIt/">BlazeIt</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Visualization/">Visualization</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Visualization/Superset/">Superset</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">アーカイブ</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2023/09/">9月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2023/08/">8月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2022/05/">5月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2022/02/">2月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2022/01/">1月 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/10/">10月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/09/">9月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/08/">8月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/07/">7月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/06/">6月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/05/">5月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/04/">4月 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/02/">2月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/01/">1月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/12/">12月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/11/">11月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/10/">10月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/09/">9月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/08/">8月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/07/">7月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/06/">6月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/05/">5月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/04/">4月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/03/">3月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/02/">2月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/01/">1月 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/12/">12月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/11/">11月 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/10/">10月 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/09/">9月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/08/">8月 2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/07/">7月 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/06/">6月 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/05/">5月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/04/">4月 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/03/">3月 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/02/">2月 2019</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/01/">1月 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/12/">12月 2018</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/11/">11月 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/10/">10月 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/09/">9月 2018</a><span class="archive-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">タグ</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/AI/">AI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/AWS/">AWS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Academia/">Academia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Adobe-Reader/">Adobe Reader</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Alluxio/">Alluxio</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Ambari/">Ambari</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Analytics-Zoo/">Analytics Zoo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Ansible/">Ansible</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Edgent/">Apache Edgent</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Hudi/">Apache Hudi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Kafka/">Apache Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Spark/">Apache Spark</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apple/">Apple</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/AutoML/">AutoML</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Automagica/">Automagica</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Autonomous-Database/">Autonomous Database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BaaS/">BaaS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Behavioral-Economics/">Behavioral Economics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Big-Data/">Big Data</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BigDL/">BigDL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BigTop/">BigTop</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BlazeIt/">BlazeIt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Blog/">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Bluetooth/">Bluetooth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CDC/">CDC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Camera/">Camera</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CentOS/">CentOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CentOS7/">CentOS7</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CircleCI/">CircleCI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Clipper/">Clipper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Clipping/">Clipping</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Cloud/">Cloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Comcast/">Comcast</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Computing-resource/">Computing resource</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Conference/">Conference</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Configuration-Management/">Configuration Management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Corne-Chocolate/">Corne Chocolate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Cross-Validation/">Cross Validation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/DB/">DB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Dask/">Dask</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Analysis/">Data Analysis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Analytics/">Data Analytics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Lake/">Data Lake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Leakage/">Data Leakage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Lineage/">Data Lineage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Mesh/">Data Mesh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Platform/">Data Platform</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Processing-Engine/">Data Processing Engine</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Spaces/">Data Spaces</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Transformation/">Data Transformation</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Delta-Lake/">Delta Lake</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Delta-Sharing/">Delta Sharing</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/DevSumi/">DevSumi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Docker/">Docker</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Dockerfile/">Dockerfile</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Druid/">Druid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/EDC/">EDC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Flask/">Flask</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Flow-Engine/">Flow Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Frovedis/">Frovedis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GIS/">GIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GNOME/">GNOME</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GPD-Pocket/">GPD Pocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Git/">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GitHub-Actions/">GitHub Actions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Google/">Google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Goverment/">Goverment</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Graceful-Shutdown/">Graceful Shutdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Gradle/">Gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/HBase/">HBase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/HDP/">HDP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/HPC/">HPC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hadoop/">Hadoop</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hexo/">Hexo</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hexo-Plugin/">Hexo Plugin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hyper/">Hyper</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hyper-V/">Hyper-V</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/IDS/">IDS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/IEEE/">IEEE</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/IPv6/">IPv6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Icarus/">Icarus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Incident/">Incident</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Intel/">Intel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Intellij/">Intellij</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/JSON/">JSON</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Jupyter/">Jupyter</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/KVM/">KVM</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafak-Connect/">Kafak Connect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka/">Kafka</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka-Connect/">Kafka Connect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka-Streams/">Kafka Streams</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka-Summit/">Kafka Summit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kaggle/">Kaggle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kappa-Architecture/">Kappa Architecture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Keyboard/">Keyboard</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kinesis/">Kinesis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kubernetes/">Kubernetes</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Lambda-Architecture/">Lambda Architecture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Lighthing/">Lighthing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/LinkedIn/">LinkedIn</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/MATE-Desktop/">MATE Desktop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/ML-Model-Management/">ML Model Management</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/ML-Ops/">ML Ops</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/MLflow/">MLflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Machine-Learning-Lifecycle/">Machine Learning Lifecycle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Machine-Learning-Lifecycle/">Machine Learning Lifecycle/</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Management/">Management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Map/">Map</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Markdown/">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Messaging-System/">Messaging System</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Metadata-Management/">Metadata Management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/MillWheel/">MillWheel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Minikube/">Minikube</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Minio/">Minio</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Model/">Model</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Model-Management/">Model Management</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Monitering/">Monitering</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Mouse/">Mouse</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/NERDTree/">NERDTree</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/NVM/">NVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Nature-Remo/">Nature Remo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Network/">Network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OLAP/">OLAP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OneDrive/">OneDrive</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OpML/">OpML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Open-API/">Open API</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Open-Data/">Open Data</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Open-Messaging-Benchmark/">Open Messaging Benchmark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OpenAPI/">OpenAPI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OpenML/">OpenML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Oracle/">Oracle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PAPIDS/">PAPIDS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PDF/">PDF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pandoc/">Pandoc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Paper/">Paper</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Parquet/">Parquet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Partial-Dependency-Plot/">Partial Dependency Plot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pinot/">Pinot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pipenv/">Pipenv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PostgreSQL/">PostgreSQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Power-Grid-Data/">Power Grid Data</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PowerShell/">PowerShell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Preparation/">Preparation</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Profiler/">Profiler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pulsar/">Pulsar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PySpark/">PySpark</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Python/">Python</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Python3/">Python3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/QMK/">QMK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Query-Engine/">Query Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/RDBMS/">RDBMS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/RPA/">RPA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Redshift/">Redshift</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Research-later/">Research later</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/S3/">S3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SBT/">SBT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SDK/">SDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SQLAlchemy/">SQLAlchemy</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SQLite/">SQLite</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SX-Aurora/">SX-Aurora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Samba/">Samba</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Scala/">Scala</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Scraping/">Scraping</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Seaborn/">Seaborn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Security/">Security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Session/">Session</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Slenium/">Slenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Smart-Home/">Smart Home</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Snowflake/">Snowflake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Software-Engineering-Patterns/">Software Engineering Patterns</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Spark/">Spark</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Spark-Summit/">Spark Summit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Sphinx/">Sphinx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Statistic/">Statistic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Stonebraker/">Stonebraker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage/">Storage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage-Engine/">Storage Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage-Layer/">Storage Layer</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage-Layer-Software/">Storage Layer Software</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Stream-Processing/">Stream Processing</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Superset/">Superset</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Supervision/">Supervision</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Tellus/">Tellus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/TensorFlow/">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/TensorFlowOnSpark/">TensorFlowOnSpark</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Tools/">Tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Trends/">Trends</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Troubleshoot/">Troubleshoot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Twitter/">Twitter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Twitter-Heron/">Twitter Heron</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Uber/">Uber</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/VMWare/">VMWare</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vagrant/">Vagrant</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vault/">Vault</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vector-Engine/">Vector Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Video-Processing/">Video Processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vim/">Vim</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Visualization/">Visualization</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WSL/">WSL</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Web/">Web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WhereHows/">WhereHows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WiFi/">WiFi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WiFi6/">WiFi6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Windows/">Windows</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Windows-Tools/">Windows Tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Word/">Word</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Word2Vec/">Word2Vec</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/X-Window/">X Window</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/X-Road/">X-Road</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/XGBoost/">XGBoost</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Zeppelin/">Zeppelin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/ZooKeeper/">ZooKeeper</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/bug/">bug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/dein/">dein</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/dstat/">dstat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/fsync/">fsync</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/keyboard/">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/libvirt/">libvirt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/nltk/">nltk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/pandoc/">pandoc</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/pyenv/">pyenv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/tmux/">tmux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/vim/">vim</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/windows/">windows</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">タグクラウド</h3>
        <div class="widget tagcloud">
            <a href="/memo-blog/tags/AI/" style="font-size: 10px;">AI</a> <a href="/memo-blog/tags/AWS/" style="font-size: 10px;">AWS</a> <a href="/memo-blog/tags/Academia/" style="font-size: 10px;">Academia</a> <a href="/memo-blog/tags/Adobe-Reader/" style="font-size: 10px;">Adobe Reader</a> <a href="/memo-blog/tags/Alluxio/" style="font-size: 10.77px;">Alluxio</a> <a href="/memo-blog/tags/Ambari/" style="font-size: 10px;">Ambari</a> <a href="/memo-blog/tags/Analytics-Zoo/" style="font-size: 10px;">Analytics Zoo</a> <a href="/memo-blog/tags/Ansible/" style="font-size: 11.54px;">Ansible</a> <a href="/memo-blog/tags/Apache-Edgent/" style="font-size: 10px;">Apache Edgent</a> <a href="/memo-blog/tags/Apache-Hudi/" style="font-size: 10px;">Apache Hudi</a> <a href="/memo-blog/tags/Apache-Kafka/" style="font-size: 10px;">Apache Kafka</a> <a href="/memo-blog/tags/Apache-Spark/" style="font-size: 11.54px;">Apache Spark</a> <a href="/memo-blog/tags/Apple/" style="font-size: 10px;">Apple</a> <a href="/memo-blog/tags/AutoML/" style="font-size: 10.77px;">AutoML</a> <a href="/memo-blog/tags/Automagica/" style="font-size: 10px;">Automagica</a> <a href="/memo-blog/tags/Autonomous-Database/" style="font-size: 10px;">Autonomous Database</a> <a href="/memo-blog/tags/BaaS/" style="font-size: 10px;">BaaS</a> <a href="/memo-blog/tags/Behavioral-Economics/" style="font-size: 10px;">Behavioral Economics</a> <a href="/memo-blog/tags/Big-Data/" style="font-size: 10px;">Big Data</a> <a href="/memo-blog/tags/BigDL/" style="font-size: 10.77px;">BigDL</a> <a href="/memo-blog/tags/BigTop/" style="font-size: 10.77px;">BigTop</a> <a href="/memo-blog/tags/BlazeIt/" style="font-size: 10px;">BlazeIt</a> <a href="/memo-blog/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/memo-blog/tags/Bluetooth/" style="font-size: 10px;">Bluetooth</a> <a href="/memo-blog/tags/CDC/" style="font-size: 10px;">CDC</a> <a href="/memo-blog/tags/Camera/" style="font-size: 10px;">Camera</a> <a href="/memo-blog/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/memo-blog/tags/CentOS7/" style="font-size: 11.54px;">CentOS7</a> <a href="/memo-blog/tags/CircleCI/" style="font-size: 10px;">CircleCI</a> <a href="/memo-blog/tags/Clipper/" style="font-size: 10px;">Clipper</a> <a href="/memo-blog/tags/Clipping/" style="font-size: 10px;">Clipping</a> <a href="/memo-blog/tags/Cloud/" style="font-size: 10px;">Cloud</a> <a href="/memo-blog/tags/Comcast/" style="font-size: 10px;">Comcast</a> <a href="/memo-blog/tags/Computing-resource/" style="font-size: 10px;">Computing resource</a> <a href="/memo-blog/tags/Conference/" style="font-size: 10px;">Conference</a> <a href="/memo-blog/tags/Configuration-Management/" style="font-size: 10px;">Configuration Management</a> <a href="/memo-blog/tags/Corne-Chocolate/" style="font-size: 10px;">Corne Chocolate</a> <a href="/memo-blog/tags/Cross-Validation/" style="font-size: 10px;">Cross Validation</a> <a href="/memo-blog/tags/DB/" style="font-size: 10px;">DB</a> <a href="/memo-blog/tags/Dask/" style="font-size: 10.77px;">Dask</a> <a href="/memo-blog/tags/Data-Analysis/" style="font-size: 10.77px;">Data Analysis</a> <a href="/memo-blog/tags/Data-Analytics/" style="font-size: 10px;">Data Analytics</a> <a href="/memo-blog/tags/Data-Lake/" style="font-size: 10px;">Data Lake</a> <a href="/memo-blog/tags/Data-Leakage/" style="font-size: 10px;">Data Leakage</a> <a href="/memo-blog/tags/Data-Lineage/" style="font-size: 10px;">Data Lineage</a> <a href="/memo-blog/tags/Data-Mesh/" style="font-size: 10px;">Data Mesh</a> <a href="/memo-blog/tags/Data-Platform/" style="font-size: 10px;">Data Platform</a> <a href="/memo-blog/tags/Data-Processing-Engine/" style="font-size: 10.77px;">Data Processing Engine</a> <a href="/memo-blog/tags/Data-Spaces/" style="font-size: 11.54px;">Data Spaces</a> <a href="/memo-blog/tags/Data-Transformation/" style="font-size: 10.77px;">Data Transformation</a> <a href="/memo-blog/tags/Delta-Lake/" style="font-size: 16.92px;">Delta Lake</a> <a href="/memo-blog/tags/Delta-Sharing/" style="font-size: 12.31px;">Delta Sharing</a> <a href="/memo-blog/tags/DevSumi/" style="font-size: 10px;">DevSumi</a> <a href="/memo-blog/tags/Docker/" style="font-size: 14.62px;">Docker</a> <a href="/memo-blog/tags/Dockerfile/" style="font-size: 10.77px;">Dockerfile</a> <a href="/memo-blog/tags/Druid/" style="font-size: 10px;">Druid</a> <a href="/memo-blog/tags/EDC/" style="font-size: 10.77px;">EDC</a> <a href="/memo-blog/tags/Flask/" style="font-size: 12.31px;">Flask</a> <a href="/memo-blog/tags/Flow-Engine/" style="font-size: 10px;">Flow Engine</a> <a href="/memo-blog/tags/Frovedis/" style="font-size: 10px;">Frovedis</a> <a href="/memo-blog/tags/GIS/" style="font-size: 10px;">GIS</a> <a href="/memo-blog/tags/GNOME/" style="font-size: 10px;">GNOME</a> <a href="/memo-blog/tags/GPD-Pocket/" style="font-size: 10px;">GPD Pocket</a> <a href="/memo-blog/tags/Git/" style="font-size: 10.77px;">Git</a> <a href="/memo-blog/tags/GitHub-Actions/" style="font-size: 10px;">GitHub Actions</a> <a href="/memo-blog/tags/Google/" style="font-size: 10px;">Google</a> <a href="/memo-blog/tags/Goverment/" style="font-size: 10px;">Goverment</a> <a href="/memo-blog/tags/Graceful-Shutdown/" style="font-size: 10px;">Graceful Shutdown</a> <a href="/memo-blog/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/memo-blog/tags/HBase/" style="font-size: 10px;">HBase</a> <a href="/memo-blog/tags/HDP/" style="font-size: 10px;">HDP</a> <a href="/memo-blog/tags/HPC/" style="font-size: 10px;">HPC</a> <a href="/memo-blog/tags/Hadoop/" style="font-size: 11.54px;">Hadoop</a> <a href="/memo-blog/tags/Hexo/" style="font-size: 16.15px;">Hexo</a> <a href="/memo-blog/tags/Hexo-Plugin/" style="font-size: 10px;">Hexo Plugin</a> <a href="/memo-blog/tags/Hyper/" style="font-size: 10.77px;">Hyper</a> <a href="/memo-blog/tags/Hyper-V/" style="font-size: 10.77px;">Hyper-V</a> <a href="/memo-blog/tags/IDS/" style="font-size: 10px;">IDS</a> <a href="/memo-blog/tags/IEEE/" style="font-size: 10.77px;">IEEE</a> <a href="/memo-blog/tags/IPv6/" style="font-size: 10px;">IPv6</a> <a href="/memo-blog/tags/Icarus/" style="font-size: 10px;">Icarus</a> <a href="/memo-blog/tags/Incident/" style="font-size: 10px;">Incident</a> <a href="/memo-blog/tags/Intel/" style="font-size: 10px;">Intel</a> <a href="/memo-blog/tags/Intellij/" style="font-size: 10.77px;">Intellij</a> <a href="/memo-blog/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/memo-blog/tags/Java/" style="font-size: 10px;">Java</a> <a href="/memo-blog/tags/Jupyter/" style="font-size: 10.77px;">Jupyter</a> <a href="/memo-blog/tags/KVM/" style="font-size: 11.54px;">KVM</a> <a href="/memo-blog/tags/Kafak-Connect/" style="font-size: 10px;">Kafak Connect</a> <a href="/memo-blog/tags/Kafka/" style="font-size: 19.23px;">Kafka</a> <a href="/memo-blog/tags/Kafka-Connect/" style="font-size: 10px;">Kafka Connect</a> <a href="/memo-blog/tags/Kafka-Streams/" style="font-size: 10.77px;">Kafka Streams</a> <a href="/memo-blog/tags/Kafka-Summit/" style="font-size: 10px;">Kafka Summit</a> <a href="/memo-blog/tags/Kaggle/" style="font-size: 14.62px;">Kaggle</a> <a href="/memo-blog/tags/Kappa-Architecture/" style="font-size: 10px;">Kappa Architecture</a> <a href="/memo-blog/tags/Keyboard/" style="font-size: 10.77px;">Keyboard</a> <a href="/memo-blog/tags/Kinesis/" style="font-size: 10px;">Kinesis</a> <a href="/memo-blog/tags/Kubernetes/" style="font-size: 11.54px;">Kubernetes</a> <a href="/memo-blog/tags/Lambda-Architecture/" style="font-size: 10px;">Lambda Architecture</a> <a href="/memo-blog/tags/Lighthing/" style="font-size: 10px;">Lighthing</a> <a href="/memo-blog/tags/LinkedIn/" style="font-size: 12.31px;">LinkedIn</a> <a href="/memo-blog/tags/MATE-Desktop/" style="font-size: 10px;">MATE Desktop</a> <a href="/memo-blog/tags/ML-Model-Management/" style="font-size: 10.77px;">ML Model Management</a> <a href="/memo-blog/tags/ML-Ops/" style="font-size: 10px;">ML Ops</a> <a href="/memo-blog/tags/MLflow/" style="font-size: 10px;">MLflow</a> <a href="/memo-blog/tags/Machine-Learning/" style="font-size: 20px;">Machine Learning</a> <a href="/memo-blog/tags/Machine-Learning-Lifecycle/" style="font-size: 10px;">Machine Learning Lifecycle</a> <a href="/memo-blog/tags/Machine-Learning-Lifecycle/" style="font-size: 10px;">Machine Learning Lifecycle/</a> <a href="/memo-blog/tags/Management/" style="font-size: 10px;">Management</a> <a href="/memo-blog/tags/Map/" style="font-size: 10px;">Map</a> <a href="/memo-blog/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/memo-blog/tags/Messaging-System/" style="font-size: 10px;">Messaging System</a> <a href="/memo-blog/tags/Metadata-Management/" style="font-size: 10px;">Metadata Management</a> <a href="/memo-blog/tags/MillWheel/" style="font-size: 10px;">MillWheel</a> <a href="/memo-blog/tags/Minikube/" style="font-size: 10px;">Minikube</a> <a href="/memo-blog/tags/Minio/" style="font-size: 10.77px;">Minio</a> <a href="/memo-blog/tags/Model/" style="font-size: 12.31px;">Model</a> <a href="/memo-blog/tags/Model-Management/" style="font-size: 12.31px;">Model Management</a> <a href="/memo-blog/tags/Monitering/" style="font-size: 10px;">Monitering</a> <a href="/memo-blog/tags/Mouse/" style="font-size: 10px;">Mouse</a> <a href="/memo-blog/tags/NERDTree/" style="font-size: 10px;">NERDTree</a> <a href="/memo-blog/tags/NVM/" style="font-size: 10px;">NVM</a> <a href="/memo-blog/tags/Nature-Remo/" style="font-size: 10px;">Nature Remo</a> <a href="/memo-blog/tags/Network/" style="font-size: 10px;">Network</a> <a href="/memo-blog/tags/OLAP/" style="font-size: 10px;">OLAP</a> <a href="/memo-blog/tags/OneDrive/" style="font-size: 10px;">OneDrive</a> <a href="/memo-blog/tags/OpML/" style="font-size: 10px;">OpML</a> <a href="/memo-blog/tags/Open-API/" style="font-size: 10px;">Open API</a> <a href="/memo-blog/tags/Open-Data/" style="font-size: 10.77px;">Open Data</a> <a href="/memo-blog/tags/Open-Messaging-Benchmark/" style="font-size: 10px;">Open Messaging Benchmark</a> <a href="/memo-blog/tags/OpenAPI/" style="font-size: 10px;">OpenAPI</a> <a href="/memo-blog/tags/OpenML/" style="font-size: 10px;">OpenML</a> <a href="/memo-blog/tags/Oracle/" style="font-size: 10px;">Oracle</a> <a href="/memo-blog/tags/PAPIDS/" style="font-size: 10px;">PAPIDS</a> <a href="/memo-blog/tags/PDF/" style="font-size: 10px;">PDF</a> <a href="/memo-blog/tags/Pandoc/" style="font-size: 10px;">Pandoc</a> <a href="/memo-blog/tags/Paper/" style="font-size: 18.46px;">Paper</a> <a href="/memo-blog/tags/Parquet/" style="font-size: 10px;">Parquet</a> <a href="/memo-blog/tags/Partial-Dependency-Plot/" style="font-size: 10px;">Partial Dependency Plot</a> <a href="/memo-blog/tags/Pinot/" style="font-size: 10px;">Pinot</a> <a href="/memo-blog/tags/Pipenv/" style="font-size: 10px;">Pipenv</a> <a href="/memo-blog/tags/PostgreSQL/" style="font-size: 10px;">PostgreSQL</a> <a href="/memo-blog/tags/Power-Grid-Data/" style="font-size: 10px;">Power Grid Data</a> <a href="/memo-blog/tags/PowerShell/" style="font-size: 10px;">PowerShell</a> <a href="/memo-blog/tags/Preparation/" style="font-size: 10.77px;">Preparation</a> <a href="/memo-blog/tags/Profiler/" style="font-size: 10px;">Profiler</a> <a href="/memo-blog/tags/Pulsar/" style="font-size: 10px;">Pulsar</a> <a href="/memo-blog/tags/PySpark/" style="font-size: 12.31px;">PySpark</a> <a href="/memo-blog/tags/Python/" style="font-size: 17.69px;">Python</a> <a href="/memo-blog/tags/Python3/" style="font-size: 10px;">Python3</a> <a href="/memo-blog/tags/QMK/" style="font-size: 10px;">QMK</a> <a href="/memo-blog/tags/Query-Engine/" style="font-size: 10px;">Query Engine</a> <a href="/memo-blog/tags/RDBMS/" style="font-size: 10.77px;">RDBMS</a> <a href="/memo-blog/tags/RPA/" style="font-size: 10px;">RPA</a> <a href="/memo-blog/tags/Redshift/" style="font-size: 10px;">Redshift</a> <a href="/memo-blog/tags/Research-later/" style="font-size: 10px;">Research later</a> <a href="/memo-blog/tags/S3/" style="font-size: 10px;">S3</a> <a href="/memo-blog/tags/SBT/" style="font-size: 10px;">SBT</a> <a href="/memo-blog/tags/SDK/" style="font-size: 10px;">SDK</a> <a href="/memo-blog/tags/SQLAlchemy/" style="font-size: 10.77px;">SQLAlchemy</a> <a href="/memo-blog/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/memo-blog/tags/SX-Aurora/" style="font-size: 10px;">SX-Aurora</a> <a href="/memo-blog/tags/Samba/" style="font-size: 10px;">Samba</a> <a href="/memo-blog/tags/Scala/" style="font-size: 10px;">Scala</a> <a href="/memo-blog/tags/Scraping/" style="font-size: 10px;">Scraping</a> <a href="/memo-blog/tags/Seaborn/" style="font-size: 10px;">Seaborn</a> <a href="/memo-blog/tags/Security/" style="font-size: 10px;">Security</a> <a href="/memo-blog/tags/Session/" style="font-size: 10px;">Session</a> <a href="/memo-blog/tags/Slenium/" style="font-size: 10px;">Slenium</a> <a href="/memo-blog/tags/Smart-Home/" style="font-size: 10px;">Smart Home</a> <a href="/memo-blog/tags/Snowflake/" style="font-size: 10px;">Snowflake</a> <a href="/memo-blog/tags/Software-Engineering-Patterns/" style="font-size: 10px;">Software Engineering Patterns</a> <a href="/memo-blog/tags/Spark/" style="font-size: 15.38px;">Spark</a> <a href="/memo-blog/tags/Spark-Summit/" style="font-size: 10px;">Spark Summit</a> <a href="/memo-blog/tags/Sphinx/" style="font-size: 10px;">Sphinx</a> <a href="/memo-blog/tags/Statistic/" style="font-size: 10px;">Statistic</a> <a href="/memo-blog/tags/Stonebraker/" style="font-size: 10px;">Stonebraker</a> <a href="/memo-blog/tags/Storage/" style="font-size: 10px;">Storage</a> <a href="/memo-blog/tags/Storage-Engine/" style="font-size: 10px;">Storage Engine</a> <a href="/memo-blog/tags/Storage-Layer/" style="font-size: 11.54px;">Storage Layer</a> <a href="/memo-blog/tags/Storage-Layer-Software/" style="font-size: 10px;">Storage Layer Software</a> <a href="/memo-blog/tags/Stream-Processing/" style="font-size: 18.46px;">Stream Processing</a> <a href="/memo-blog/tags/Superset/" style="font-size: 10px;">Superset</a> <a href="/memo-blog/tags/Supervision/" style="font-size: 10px;">Supervision</a> <a href="/memo-blog/tags/Tellus/" style="font-size: 10px;">Tellus</a> <a href="/memo-blog/tags/TensorFlow/" style="font-size: 11.54px;">TensorFlow</a> <a href="/memo-blog/tags/TensorFlowOnSpark/" style="font-size: 10.77px;">TensorFlowOnSpark</a> <a href="/memo-blog/tags/Tools/" style="font-size: 10px;">Tools</a> <a href="/memo-blog/tags/Trends/" style="font-size: 10px;">Trends</a> <a href="/memo-blog/tags/Troubleshoot/" style="font-size: 10px;">Troubleshoot</a> <a href="/memo-blog/tags/Twitter/" style="font-size: 10px;">Twitter</a> <a href="/memo-blog/tags/Twitter-Heron/" style="font-size: 10px;">Twitter Heron</a> <a href="/memo-blog/tags/Uber/" style="font-size: 10.77px;">Uber</a> <a href="/memo-blog/tags/Ubuntu/" style="font-size: 14.62px;">Ubuntu</a> <a href="/memo-blog/tags/VMWare/" style="font-size: 10px;">VMWare</a> <a href="/memo-blog/tags/Vagrant/" style="font-size: 10.77px;">Vagrant</a> <a href="/memo-blog/tags/Vault/" style="font-size: 10px;">Vault</a> <a href="/memo-blog/tags/Vector-Engine/" style="font-size: 10px;">Vector Engine</a> <a href="/memo-blog/tags/Video-Processing/" style="font-size: 10px;">Video Processing</a> <a href="/memo-blog/tags/Vim/" style="font-size: 10.77px;">Vim</a> <a href="/memo-blog/tags/Visualization/" style="font-size: 10.77px;">Visualization</a> <a href="/memo-blog/tags/WSL/" style="font-size: 13.85px;">WSL</a> <a href="/memo-blog/tags/Web/" style="font-size: 10px;">Web</a> <a href="/memo-blog/tags/WhereHows/" style="font-size: 10px;">WhereHows</a> <a href="/memo-blog/tags/WiFi/" style="font-size: 10px;">WiFi</a> <a href="/memo-blog/tags/WiFi6/" style="font-size: 10px;">WiFi6</a> <a href="/memo-blog/tags/Windows/" style="font-size: 13.08px;">Windows</a> <a href="/memo-blog/tags/Windows-Tools/" style="font-size: 10px;">Windows Tools</a> <a href="/memo-blog/tags/Word/" style="font-size: 10px;">Word</a> <a href="/memo-blog/tags/Word2Vec/" style="font-size: 10px;">Word2Vec</a> <a href="/memo-blog/tags/X-Window/" style="font-size: 10px;">X Window</a> <a href="/memo-blog/tags/X-Road/" style="font-size: 10px;">X-Road</a> <a href="/memo-blog/tags/XGBoost/" style="font-size: 10px;">XGBoost</a> <a href="/memo-blog/tags/Zeppelin/" style="font-size: 10px;">Zeppelin</a> <a href="/memo-blog/tags/ZooKeeper/" style="font-size: 12.31px;">ZooKeeper</a> <a href="/memo-blog/tags/bug/" style="font-size: 10px;">bug</a> <a href="/memo-blog/tags/dein/" style="font-size: 10px;">dein</a> <a href="/memo-blog/tags/dstat/" style="font-size: 10px;">dstat</a> <a href="/memo-blog/tags/fsync/" style="font-size: 10px;">fsync</a> <a href="/memo-blog/tags/git/" style="font-size: 10px;">git</a> <a href="/memo-blog/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/memo-blog/tags/libvirt/" style="font-size: 10px;">libvirt</a> <a href="/memo-blog/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/memo-blog/tags/nltk/" style="font-size: 10px;">nltk</a> <a href="/memo-blog/tags/pandoc/" style="font-size: 11.54px;">pandoc</a> <a href="/memo-blog/tags/pyenv/" style="font-size: 10px;">pyenv</a> <a href="/memo-blog/tags/tmux/" style="font-size: 10.77px;">tmux</a> <a href="/memo-blog/tags/vim/" style="font-size: 13.85px;">vim</a> <a href="/memo-blog/tags/windows/" style="font-size: 10px;">windows</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">リンク</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2023 dobachi<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/memo-blog/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/memo-blog/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/memo-blog/js/main.js"></script>

    </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>