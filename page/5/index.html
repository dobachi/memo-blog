<!DOCTYPE html>
<html lang=ja>
<head>
    <meta charset="utf-8">
    
    <title>memo-blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="This is just a memo">
<meta property="og:type" content="website">
<meta property="og:title" content="memo-blog">
<meta property="og:url" content="https://dobachi.github.io/memo-blog/page/5/index.html">
<meta property="og:site_name" content="memo-blog">
<meta property="og:description" content="This is just a memo">
<meta property="og:locale" content="ja">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="memo-blog">
<meta name="twitter:description" content="This is just a memo">
    

    
        <link rel="alternate" href="/" title="memo-blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/memo-blog/libs/font-awesome5/css/fontawesome.min.css">
    <link rel="stylesheet" href="/memo-blog/libs/font-awesome5/css/fa-brands.min.css">
    <link rel="stylesheet" href="/memo-blog/libs/font-awesome5/css/fa-solid.min.css">
    <link rel="stylesheet" href="/memo-blog/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/memo-blog/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/memo-blog/css/style.css">

    <script src="/memo-blog/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/memo-blog/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/memo-blog/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-155235180-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/memo-blog/" id="logo">
                <i class="logo"></i>
                <span class="site-title">memo-blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/memo-blog/.">Home</a>
                
                    <a class="main-nav-link" href="/memo-blog/archives">Archives</a>
                
                    <a class="main-nav-link" href="/memo-blog/categories">Categories</a>
                
                    <a class="main-nav-link" href="/memo-blog/tags">Tags</a>
                
                    <a class="main-nav-link" href="/memo-blog/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/memo-blog/css/images/avatar.png" />
                            <i class="fas fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="検索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '投稿',
            PAGES: 'Pages',
            CATEGORIES: 'カテゴリ',
            TAGS: 'タグ',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/memo-blog/',
        CONTENT_URL: '/memo-blog/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/memo-blog/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/memo-blog/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/memo-blog/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="検索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/memo-blog/css/images/avatar.png" />
            <h2 id="name">dobachi</h2>
            <h3 id="title">man of leisure</h3>
            <span id="location"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>Tokyo, Japan</span>
            <a id="follow" target="_blank" href="https://github.com/dobachi">フォローする</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                210
                <span>投稿</span>
            </div>
            <div class="article-info-block">
                230
                <span>タグ</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/dobachi" target="_blank" title="github" class=tooltip>
                            <i class="fab fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/memo-blog/" target="_blank" title="rss" class=tooltip>
                            <i class="fab fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-BigDL-memory-usage" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/11/13/BigDL-memory-usage/">BigDL memory usage</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/11/13/BigDL-memory-usage/">
            <time datetime="2020-11-13T07:04:02.000Z" itemprop="datePublished">2020-11-13</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Research/">Research</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Research/Machine-Learning/">Machine Learning</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Research/Machine-Learning/BigDL/">BigDL</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/BigDL/">BigDL</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#前提" id="toc-前提">前提</a></li>
<li><a href="#spark起動" id="toc-spark起動">Spark起動</a></li>
<li><a href="#サンプルを動かす" id="toc-サンプルを動かす">サンプルを動かす</a></li>
<li><a href="#サンプルの中身" id="toc-サンプルの中身">サンプルの中身</a>
<ul>
<li><a href="#trainクラス" id="toc-trainクラス">Trainクラス</a></li>
<li><a href="#optimizerの種類" id="toc-optimizerの種類">Optimizerの種類</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://bigdl-project.github.io/master/#release-download/" target="_blank" rel="noopener">Download</a></li>
<li><a href="https://github.com/intel-analytics/BigDL/issues/3070" target="_blank" rel="noopener">Issue-3070</a></li>
<li><a href="https://bigdl-project.github.io/master/#ScalaUserGuide/install-pre-built/" target="_blank" rel="noopener">use
pre-bulid libs</a></li>
<li><a href="https://search.maven.org/artifact/com.intel.analytics.bigdl/bigdl-SPARK_2.4/0.11.1/jar" target="_blank" rel="noopener">bigdl-SPARK_2.4</a></li>
<li><a href="https://bigdl-project.github.io/master/#ScalaUserGuide/run/" target="_blank" rel="noopener">Run</a></li>
<li><a href="https://bigdl-project.github.io/master/#ScalaUserGuide/examples/" target="_blank" rel="noopener">Examples</a></li>
<li><a href="https://github.com/intel-analytics/BigDL/blob/master/spark/dl/src/main/scala/com/intel/analytics/bigdl/models/lenet/Train.scala" target="_blank" rel="noopener">Lenet
Train</a></li>
<li><a href="https://github.com/intel-analytics/BigDL/tree/master/spark/dl/src/main/scala/com/intel/analytics/bigdl/models/lenet" target="_blank" rel="noopener">LeNet
Example</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="前提">前提</span></h2>
<p><a href="https://bigdl-project.github.io/master/#release-download/" target="_blank" rel="noopener">Download</a>
によると、Sparkは2.4系まで対応しているようだ。 <a href="https://github.com/intel-analytics/BigDL/issues/3070" target="_blank" rel="noopener">Issue-3070</a>
によると、Spark3対応も進んでいるようだ。</p>
<h2><span id="spark起動">Spark起動</span></h2>
<p><a href="https://bigdl-project.github.io/master/#ScalaUserGuide/run/" target="_blank" rel="noopener">Run</a>
で記載の通り、以下のように起動した。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ export SPARK_HOME=/usr/local/spark/default</span><br><span class="line">$ export BIGDL_HOME=/usr/local/bigdl/default</span><br><span class="line">$ $&#123;BIGDL_HOME&#125;/bin/spark-shell-with-bigdl.sh --master local[*]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; import com.intel.analytics.bigdl.utils.Engine</span><br><span class="line">scala&gt; Engine.init</span><br></pre></td></tr></table></figure>
<p>とりあえず初期化までは動いた。</p>
<h2><span id="サンプルを動かす">サンプルを動かす</span></h2>
<p><a href="https://bigdl-project.github.io/master/#ScalaUserGuide/examples/" target="_blank" rel="noopener">Examples</a>
に記載のサンプルを動かす。 <a href="https://github.com/intel-analytics/BigDL/blob/master/spark/dl/src/main/scala/com/intel/analytics/bigdl/models/lenet/Train.scala" target="_blank" rel="noopener">LeNet
Train</a> にあるLeNetの例が良さそう。</p>
<p>MNISTの画像をダウンロードして、展開した。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~/tmp</span><br><span class="line">$ cd ~/tmp</span><br><span class="line">$ wget http://yann.lecun.com/exdb/mnist/train-images-idx3-ubyte.gz</span><br><span class="line">$ wget http://yann.lecun.com/exdb/mnist/train-labels-idx1-ubyte.gz</span><br><span class="line">$ wget http://yann.lecun.com/exdb/mnist/t10k-images-idx3-ubyte.gz</span><br><span class="line">$ wget http://yann.lecun.com/exdb/mnist/t10k-labels-idx1-ubyte.gz</span><br><span class="line">$ gunzip *.gz</span><br></pre></td></tr></table></figure>
<p>展開したディレクトリを指定しながら、LeNetの学習を実行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ spark-submit \</span><br><span class="line">  --master local[6] \</span><br><span class="line">  --driver-class-path $&#123;BIGDL_HOME&#125;/lib/bigdl-SPARK_2.4-0.11.1-jar-with-dependencies.jar \</span><br><span class="line">  --class com.intel.analytics.bigdl.models.lenet.Train \</span><br><span class="line">  $&#123;BIGDL_HOME&#125;/lib/bigdl-SPARK_2.4-0.11.1-jar-with-dependencies.jar \</span><br><span class="line">  -f $HOME/tmp \</span><br><span class="line">  -b 12 \</span><br><span class="line">  --checkpoint ./model</span><br></pre></td></tr></table></figure>
<p>実行中の様子は以下の通り。</p>
<figure>
<img src="/memo-blog/images/p5b0S1PrMD3x9YMp-31A2F.png" alt="ヒストリのキャプチャ">
<figcaption aria-hidden="true">ヒストリのキャプチャ</figcaption>
</figure>
<p>今回はローカルモードで実行したが、入力された学習データと同様のサイズのキャッシュがメモリ上に展開されていることがわかる。</p>
<h2><span id="サンプルの中身">サンプルの中身</span></h2>
<p>2020/11/15時点のmasterブランチを確認する。</p>
<h3><span id="trainクラス">Trainクラス</span></h3>
<p>上記サンプルで実行されているTrainを見る。
モデルを定義している箇所は以下の通り。</p>
<p>com/intel/analytics/bigdl/models/lenet/Train.scala:48</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> model = <span class="keyword">if</span> (param.modelSnapshot.isDefined) &#123;</span><br><span class="line">  <span class="type">Module</span>.load[<span class="type">Float</span>](param.modelSnapshot.get)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (param.graphModel) &#123;</span><br><span class="line">    <span class="type">LeNet5</span>.graph(classNum = <span class="number">10</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="type">Engine</span>.getEngineType() <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">MklBlas</span> =&gt; <span class="type">LeNet5</span>(<span class="number">10</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="type">MklDnn</span> =&gt; <span class="type">LeNet5</span>.dnnGraph(param.batchSize / <span class="type">Engine</span>.nodeNumber(), <span class="number">10</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Modelインスタンスは以下の通り、Optimizerオブジェクトに渡され、
データセットに合わせたOptimizerが返される。
（例：データセットが分散データセットかどうか、など）</p>
<p>com/intel/analytics/bigdl/models/lenet/Train.scala:83</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> optimizer = <span class="type">Optimizer</span>(</span><br><span class="line">  model = model,</span><br><span class="line">  dataset = trainSet,</span><br><span class="line">  criterion = criterion)</span><br></pre></td></tr></table></figure>
<p>参考までに、Optimizerの種類と判定の処理は以下の通り。</p>
<p>com/intel/analytics/bigdl/optim/Optimizer.scala:688</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">dataset <span class="keyword">match</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> d: <span class="type">DistributedDataSet</span>[_] =&gt;</span><br><span class="line">    <span class="type">Engine</span>.getOptimizerVersion() <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">OptimizerV1</span> =&gt;</span><br><span class="line">        <span class="keyword">new</span> <span class="type">DistriOptimizer</span>[<span class="type">T</span>](</span><br><span class="line">          _model = model,</span><br><span class="line">          _dataset = d.toDistributed().asInstanceOf[<span class="type">DistributedDataSet</span>[<span class="type">MiniBatch</span>[<span class="type">T</span>]]],</span><br><span class="line">          _criterion = criterion</span><br><span class="line">        ).asInstanceOf[<span class="type">Optimizer</span>[<span class="type">T</span>, <span class="type">D</span>]]</span><br><span class="line">      <span class="keyword">case</span> <span class="type">OptimizerV2</span> =&gt;</span><br><span class="line">        <span class="keyword">new</span> <span class="type">DistriOptimizerV2</span>[<span class="type">T</span>](</span><br><span class="line">          _model = model,</span><br><span class="line">          _dataset = d.toDistributed().asInstanceOf[<span class="type">DistributedDataSet</span>[<span class="type">MiniBatch</span>[<span class="type">T</span>]]],</span><br><span class="line">          _criterion = criterion</span><br><span class="line">        ).asInstanceOf[<span class="type">Optimizer</span>[<span class="type">T</span>, <span class="type">D</span>]]</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">case</span> d: <span class="type">LocalDataSet</span>[_] =&gt;</span><br><span class="line">    <span class="keyword">new</span> <span class="type">LocalOptimizer</span>[<span class="type">T</span>](</span><br><span class="line">      model = model,</span><br><span class="line">      dataset = d.toLocal().asInstanceOf[<span class="type">LocalDataSet</span>[<span class="type">MiniBatch</span>[<span class="type">T</span>]]],</span><br><span class="line">      criterion = criterion</span><br><span class="line">    ).asInstanceOf[<span class="type">Optimizer</span>[<span class="type">T</span>, <span class="type">D</span>]]</span><br><span class="line">  <span class="keyword">case</span> _ =&gt;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">UnsupportedOperationException</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>返されたOptimizerの、Optimizer#optimizeメソッドを利用し学習が実行される。</p>
<p>com/intel/analytics/bigdl/models/lenet/Train.scala:98</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">optimizer</span><br><span class="line">  .setValidation(</span><br><span class="line">    trigger = <span class="type">Trigger</span>.everyEpoch,</span><br><span class="line">    dataset = validationSet,</span><br><span class="line">    vMethods = <span class="type">Array</span>(<span class="keyword">new</span> <span class="type">Top1Accuracy</span>, <span class="keyword">new</span> <span class="type">Top5Accuracy</span>[<span class="type">Float</span>], <span class="keyword">new</span> <span class="type">Loss</span>[<span class="type">Float</span>]))</span><br><span class="line">  .setOptimMethod(optimMethod)</span><br><span class="line">  .setEndWhen(<span class="type">Trigger</span>.maxEpoch(param.maxEpoch))</span><br><span class="line">  .optimize()</span><br></pre></td></tr></table></figure>
<h3><span id="optimizerの種類">Optimizerの種類</span></h3>
<p>上記の内容を見るに、Optimizerにはいくつか種類がありそうだ。</p>
<ul>
<li>DistriOptimizer</li>
<li>DistriOptimizerV2</li>
<li>LocalOptimizer</li>
</ul>
<h4><span id="distrioptimizer">DistriOptimizer</span></h4>
<p>ひとまずメモリ使用に関連する箇所ということで、入力データの準備の処理を確認する。
<code>com.intel.analytics.bigdl.optim.DistriOptimizer#optimize</code>
メソッドには 以下のような箇所がある。</p>
<p>com/intel/analytics/bigdl/optim/DistriOptimizer.scala:870</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prepareInput()</span><br></pre></td></tr></table></figure>
<p>これは
<code>com.intel.analytics.bigdl.optim.DistriOptimizer#prepareInput</code>
メソッドであり、 内部的に
<code>com.intel.analytics.bigdl.optim.AbstractOptimizer#prepareInput</code>
メソッドを呼び出し、
入力データをSparkのキャッシュに載せるように処理する。</p>
<p>com/intel/analytics/bigdl/optim/DistriOptimizer.scala:808</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!dataset.toDistributed().isCached) &#123;</span><br><span class="line">  <span class="type">DistriOptimizer</span>.logger.info(<span class="string">"caching training rdd ..."</span>)</span><br><span class="line">  <span class="type">DistriOptimizer</span>.prepareInput(<span class="keyword">this</span>.dataset, <span class="keyword">this</span>.validationDataSet)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>キャシュに載せると箇所は以下の通り。</p>
<p>com/intel/analytics/bigdl/optim/AbstractOptimizer.scala:279</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span>[bigdl] <span class="function"><span class="keyword">def</span> <span class="title">prepareInput</span></span>[<span class="type">T</span>: <span class="type">ClassTag</span>](dataset: <span class="type">DataSet</span>[<span class="type">MiniBatch</span>[<span class="type">T</span>]],</span><br><span class="line">  validationDataSet: <span class="type">Option</span>[<span class="type">DataSet</span>[<span class="type">MiniBatch</span>[<span class="type">T</span>]]]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  dataset.asInstanceOf[<span class="type">DistributedDataSet</span>[<span class="type">MiniBatch</span>[<span class="type">T</span>]]].cache()</span><br><span class="line">  <span class="keyword">if</span> (validationDataSet.isDefined) &#123;</span><br><span class="line">    validationDataSet.get.toDistributed().cache()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上記の <code>DistributedDataSet</code> の <code>chache</code>
メソッドは以下の通り。</p>
<p>com/intel/analytics/bigdl/dataset/DataSet.scala:216</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cache</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">if</span> (originRDD() != <span class="literal">null</span>) &#123;</span><br><span class="line">    originRDD().count()</span><br><span class="line">  &#125;</span><br><span class="line">  isCached = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>originRDD</code> の戻り値に対して、<code>count</code>
を読んでいる。 ここで <code>count</code> を呼ぶのは、入力データである
<code>originRDD</code>
の戻り値に入っているRDDをメモリ上にマテリアライズするためである。</p>
<p><code>count</code>
を呼ぶだけでマテリアライズできるのは、予め入力データを定義したときに
Spark RDDの <code>cache</code>
を利用してキャッシュ化することを指定されているからである。
今回の例では、Optimizerオブジェクトのapplyを利用する際に渡されるデータセット
<code>trainSet</code> を 定義する際に予め <code>cache</code>
が呼ばれる。</p>
<p>com/intel/analytics/bigdl/models/lenet/Train.scala:79</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> trainSet = <span class="type">DataSet</span>.array(load(trainData, trainLabel), sc) -&gt;</span><br><span class="line">  <span class="type">BytesToGreyImg</span>(<span class="number">28</span>, <span class="number">28</span>) -&gt; <span class="type">GreyImgNormalizer</span>(trainMean, trainStd) -&gt; <span class="type">GreyImgToBatch</span>(</span><br><span class="line">  param.batchSize)</span><br></pre></td></tr></table></figure>
<p><code>trainSet</code> を定義する際、
<code>com.intel.analytics.bigdl.dataset.DataSet$#array(T[], org.apache.spark.SparkContext)</code>
メソッドが 呼ばれるのだが、その中で以下のように Sparkの
<code>RDD#cache</code> が呼ばれていることがわかる。</p>
<p>com/intel/analytics/bigdl/dataset/DataSet.scala:343</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">array</span></span>[<span class="type">T</span>: <span class="type">ClassTag</span>](localData: <span class="type">Array</span>[<span class="type">T</span>], sc: <span class="type">SparkContext</span>): <span class="type">DistributedDataSet</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> nodeNumber = <span class="type">Engine</span>.nodeNumber()</span><br><span class="line">  <span class="keyword">new</span> <span class="type">CachedDistriDataSet</span>[<span class="type">T</span>](</span><br><span class="line">    sc.parallelize(localData, nodeNumber)</span><br><span class="line">      <span class="comment">// Keep this line, or the array will be send to worker every time</span></span><br><span class="line">      .coalesce(nodeNumber, <span class="literal">true</span>)</span><br><span class="line">      .mapPartitions(iter =&gt; &#123;</span><br><span class="line">        <span class="type">Iterator</span>.single(iter.toArray)</span><br><span class="line">      &#125;).setName(<span class="string">"cached dataset"</span>)</span><br><span class="line">      .cache()</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以下、一例。</p>
<p>具体的には、Optimizerのインスタンスを生成するための
<code>apply</code> メソッドはいくつかあるが、
以下のように引数にデータセットを指定する箇所がある。（再掲）</p>
<p>com/intel/analytics/bigdl/optim/Optimizer.scala:619</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_dataset = (<span class="type">DataSet</span>.rdd(sampleRDD) -&gt;</span><br></pre></td></tr></table></figure>
<p>ここで用いられている
<code>com.intel.analytics.bigdl.dataset.DataSet#rdd</code>
メソッドは以下の通り。</p>
<p>com/intel/analytics/bigdl/dataset/DataSet.scala:363</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rdd</span></span>[<span class="type">T</span>: <span class="type">ClassTag</span>](data: <span class="type">RDD</span>[<span class="type">T</span>], partitionNum: <span class="type">Int</span> = <span class="type">Engine</span>.nodeNumber()</span><br><span class="line">  ): <span class="type">DistributedDataSet</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">CachedDistriDataSet</span>[<span class="type">T</span>](</span><br><span class="line">    data.coalesce(partitionNum, <span class="literal">true</span>)</span><br><span class="line">      .mapPartitions(iter =&gt; &#123;</span><br><span class="line">        <span class="type">Iterator</span>.single(iter.toArray)</span><br><span class="line">      &#125;).setName(<span class="string">"cached dataset"</span>)</span><br><span class="line">      .cache()</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>com.intel.analytics.bigdl.dataset.CachedDistriDataSet#CachedDistriDataSet</code>
のコンストラクタ引数に、 <code>org.apache.spark.rdd.RDD#cache</code>
を用いてキャッシュ化することを指定したRDDを渡していることがわかる。</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/11/13/BigDL-memory-usage/" data-id="clmwcnmxt017t1vp2e3n374sq" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Generate-PDF-using-pandoc" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/10/29/Generate-PDF-using-pandoc/">Generate PDF using pandoc</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/10/29/Generate-PDF-using-pandoc/">
            <time datetime="2020-10-29T13:17:31.000Z" itemprop="datePublished">2020-10-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Documentation/">Documentation</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/pandoc/">pandoc</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://texwiki.texjp.org/?Linux#texliveinstall" target="_blank" rel="noopener">TeX
Liveのインストール手順</a></li>
<li><a href="https://github.com/jgm/pandoc-templates/blob/master/default.latex" target="_blank" rel="noopener">default.latex</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<p><a href="https://texwiki.texjp.org/?Linux#texliveinstall" target="_blank" rel="noopener">TeX
Liveのインストール手順</a> の通り、最新版をインストールする。
なお、フルセットでインストールした。</p>
<p>PDFを作成するときは以下のようにする。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pandoc test.md -o test.pdf --pdf-engine=lualatex -V documentclass=bxjsarticle -V classoption=pandoc</span><br></pre></td></tr></table></figure>
<p>ただし、 <a href="https://github.com/jgm/pandoc-templates/blob/master/default.latex" target="_blank" rel="noopener">default.latex</a>
に示すとおり、リンクに色を付けるなどしたいので、
上記マークダウンファイルには先頭部分にYAMLでコンフィグを記載することとした。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: テスト文章</span><br><span class="line">date: 2020-10-30</span><br><span class="line">author: dobachi</span><br><span class="line">colorlinks: yes</span><br><span class="line">numbersections: yes</span><br><span class="line">toc: yes</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section"># test</span></span><br><span class="line"></span><br><span class="line"><span class="section">## これはテスト</span></span><br><span class="line"></span><br><span class="line">[<span class="string">Google</span>](<span class="link">https://www.google.com</span>)</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- vim: set ft=markdown : --&gt;</span></span></span><br></pre></td></tr></table></figure>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/10/29/Generate-PDF-using-pandoc/" data-id="clmwcnmkw00421vp2uilpf07o" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Access-AWS-S3-from-Hadoop3" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/09/14/Access-AWS-S3-from-Hadoop3/">Access AWS S3 from Hadoop3 and Spark3</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/09/14/Access-AWS-S3-from-Hadoop3/">
            <time datetime="2020-09-14T14:01:29.000Z" itemprop="datePublished">2020-09-14</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/">Hadoop</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Hadoop/">Hadoop</a>, <a class="tag-link" href="/memo-blog/tags/Spark/">Spark</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#パッケージインポート" id="toc-パッケージインポート">パッケージインポート</a></li>
<li><a href="#profileを使ったクレデンシャル設定" id="toc-profileを使ったクレデンシャル設定">profileを使ったクレデンシャル設定</a>
<ul>
<li><a href="#補足パラメータと指定するクラスについて" id="toc-補足パラメータと指定するクラスについて">（補足）パラメータと指定するクラスについて</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://hadoop.apache.org/docs/current/hadoop-aws/tools/hadoop-aws/index.html" target="_blank" rel="noopener">Hadoopの公式ドキュメント</a></li>
<li><a href="https://spark.apache.org/docs/latest/cloud-integration.html" target="_blank" rel="noopener">Sparkの公式ドキュメント</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="パッケージインポート">パッケージインポート</span></h2>
<p><a href="https://spark.apache.org/docs/latest/cloud-integration.html" target="_blank" rel="noopener">Sparkの公式ドキュメント</a>
には、org.apache.spark:hadoop-cloud_2.12を利用するよう記載されているが、
このMavenパッケージは見当たらなかった。</p>
<p>そこで、 <a href="https://hadoop.apache.org/docs/current/hadoop-aws/tools/hadoop-aws/index.html" target="_blank" rel="noopener">Hadoopの公式ドキュメント</a>
の通り、hadoop-awsをインポートすると、それに関連した依存関係をインポートすることにした。
spark-shellで試すとしたら以下の通り。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /opt/spark/default/bin/spark-shell --packages org.apache.hadoop:hadoop-aws:3.2.0</span></span><br></pre></td></tr></table></figure>
<h2><span id="profileを使ったクレデンシャル設定">profileを使ったクレデンシャル設定</span></h2>
<p>awscliを利用しているとしたら、profileを設定しながらクレデンシャルを使い分けていることもあると思う。
その場合、起動時の環境変数でプロフィールを指定しながら、以下のようにproviderを指定することで、
profileを利用したクレデンシャル管理の仕組みを利用してアクセスできる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> AWS_PROFILE=s3test /opt/spark/default/bin/spark-shell --packages org.apache.hadoop:hadoop-aws:3.2.0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; spark.sparkContext.hadoopConfiguration.set(<span class="string">"fs.s3a.aws.credentials.provider"</span>, <span class="string">"com.amazonaws.auth.DefaultAWSCredentialsProviderChain"</span>)</span><br></pre></td></tr></table></figure>
<h3><span id="補足パラメータと指定するクラスについて">（補足）パラメータと指定するクラスについて</span></h3>
<p>ちなみに、上記パラメータの説明には、</p>
<blockquote>
<p>If unspecified, then the default list of credential provider classes,
queried in sequence, is: 1.
org.apache.hadoop.fs.s3a.SimpleAWSCredentialsProvider: Uses the values
of fs.s3a.access.key and fs.s3a.secret.key. 2.
com.amazonaws.auth.EnvironmentVariableCredentialsProvider: supports
configuration of AWS access key ID and secret access key in environment
variables named AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY, as
documented in the AWS SDK. 3.
com.amazonaws.auth.InstanceProfileCredentialsProvider: supports use of
instance profile credentials if running in an EC2 VM.</p>
</blockquote>
<p>のように記載されている。</p>
<p>また、「Using Named Profile Credentials with
ProfileCredentialsProvider」の節には、</p>
<blockquote>
<p>Declare com.amazonaws.auth.profile.ProfileCredentialsProvider as the
provider.</p>
</blockquote>
<p>と書かれており、上記Default...でなくても良い。（実際に試したところ動作した）</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/09/14/Access-AWS-S3-from-Hadoop3/" data-id="clmwcnmjj00111vp2n1jzvul1" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-qmk-firmware-202009" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/09/06/qmk-firmware-202009/">qmk_firmware_202009</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/09/06/qmk-firmware-202009/">
            <time datetime="2020-09-05T18:14:27.000Z" itemprop="datePublished">2020-09-06</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/">Keyboard</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/QMK/">QMK</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/QMK/">QMK</a>, <a class="tag-link" href="/memo-blog/tags/keyboard/">keyboard</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://qiita.com/huequica/items/6067d3a022c7cd719ab2" target="_blank" rel="noopener">QMK
Firmwareでファームウェアをビルドしようとしたらavr-gccでコケた話</a></li>
<li><a href="https://docs.qmk.fm/#/newbs_building_firmware" target="_blank" rel="noopener">公式の環境構築手順</a></li>
<li><a href="https://docs.qmk.fm/#/newbs_flashing" target="_blank" rel="noopener">公式のコンパイル手順</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<p>2020/9に久しぶりにコンパイルしようとしたら、だいぶ勝手が変わっていた。</p>
<p><a href="https://docs.qmk.fm/#/newbs_building_firmware" target="_blank" rel="noopener">公式の環境構築手順</a>
に従って環境を構築した。
なお、インストールするよう指定されていたパッケージだけでは足りなかったので、
以下のようにインストールした。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pacman --needed --noconfirm --<span class="built_in">disable</span>-download-timeout -S git mingw-w64-x86_64-toolchain mingw-w64-x86_64-python3-pip python3 python3-pip make diffutils</span></span><br></pre></td></tr></table></figure>
<p>最初、以下を忘れたため、失敗したので注意・・・。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> qmk setup</span></span><br></pre></td></tr></table></figure>
<p><a href="https://docs.qmk.fm/#/newbs_flashing" target="_blank" rel="noopener">公式のコンパイル手順</a>
に従うと、qmkコマンドを利用してコンパイル、フラッシュするようだ。</p>
<p>ただ、 <a href="https://qiita.com/huequica/items/6067d3a022c7cd719ab2" target="_blank" rel="noopener">QMK
Firmwareでファームウェアをビルドしようとしたらavr-gccでコケた話</a>
に記載されているのと同様に、 <code>make git-submodules</code>
が必要だった。</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/09/06/qmk-firmware-202009/" data-id="clmwcnmpo00f11vp2cier6iyd" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Use-GitHub-actions-to-deploy-documents" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/08/09/Use-GitHub-actions-to-deploy-documents/">Use GitHub actions to deploy documents</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/08/09/Use-GitHub-actions-to-deploy-documents/">
            <time datetime="2020-08-09T14:30:38.000Z" itemprop="datePublished">2020-08-09</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Documentation/">Documentation</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/GitHub-Actions/">GitHub Actions</a>, <a class="tag-link" href="/memo-blog/tags/Sphinx/">Sphinx</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#レポジトリのdeploy-key設定" id="toc-レポジトリのdeploy-key設定">レポジトリのDeploy Key設定</a></li>
<li><a href="#github-actionsのワークフローの記述" id="toc-github-actionsのワークフローの記述">GitHub
Actionsのワークフローの記述</a></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://sphinx-users.jp/cookbook/githubaction/index.html" target="_blank" rel="noopener">GitHub
Actionsを用いてGitHub Pagesへのデプロイを自動化する</a></li>
<li><a href="https://github.com/marketplace/actions/sphinx-build" target="_blank" rel="noopener">マーケットプレイスのsphinx-build</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<p><a href="https://sphinx-users.jp/cookbook/githubaction/index.html" target="_blank" rel="noopener">GitHub
Actionsを用いてGitHub Pagesへのデプロイを自動化する</a> がSphinx
JPのユーザ会による記事だったので参考になるが、
依存関係を都度pipインストールしているのが気になった。</p>
<p><a href="https://github.com/marketplace/actions/sphinx-build" target="_blank" rel="noopener">マーケットプレイスのsphinx-build</a>
を利用すると良さそうだが、 この手順ではGITHUB
TOKENを利用してデプロイしているのが気になった。
レポジトリごとに設定できる、Deploy Keyを利用したい。</p>
<p>そこでビルドには <a href="https://github.com/marketplace/actions/sphinx-build" target="_blank" rel="noopener">マーケットプレイスのsphinx-build</a>
を利用し、デプロイには <a href="https://sphinx-users.jp/cookbook/githubaction/index.html" target="_blank" rel="noopener">GitHub
Actionsを用いてGitHub Pagesへのデプロイを自動化する</a>
の手順を利用することにした。</p>
<h2><span id="レポジトリのdeploy-key設定">レポジトリのDeploy Key設定</span></h2>
<p><a href="https://sphinx-users.jp/cookbook/githubaction/index.html" target="_blank" rel="noopener">GitHub
Actionsを用いてGitHub Pagesへのデプロイを自動化する</a> の「Deploy keys
の設定」章を参考に、 当該レポジトリのDeploy Keyを登録する。</p>
<p>任意の環境（ここではWSLのUbuntu18を利用した）で、
以下のコマンドを実行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -b 4096 -C <span class="string">"＜レポジトリで使用しているメールアドレス＞"</span> -f ＜任意の名前＞ -N <span class="string">""</span></span></span><br></pre></td></tr></table></figure>
<p>上記記事の通り、秘密鍵と公開鍵をGitHubのウェブUIで登録する。
なお、「Secrets」タブで登録した名称は、後ほどGitHub
Actionsのワークフロー内で使用する。</p>
<h2><span id="githubactionsのワークフローの記述">GitHub
Actionsのワークフローの記述</span></h2>
<p><a href="https://github.com/marketplace/actions/sphinx-build" target="_blank" rel="noopener">マーケットプレイスのsphinx-build</a>
の例を参考に、 ワークフローを記述する。 なお、最後のデプロイする部分は、
<a href="https://sphinx-users.jp/cookbook/githubaction/index.html" target="_blank" rel="noopener">GitHub
Actionsを用いてGitHub Pagesへのデプロイを自動化する</a> を参考に、
Deploy Keyを利用するよう修正した。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">CI</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 今回はマスタブランチへのPushをトリガとする。</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line"><span class="attr">  push:</span></span><br><span class="line"><span class="attr">    branches:</span>    </span><br><span class="line"><span class="bullet">      -</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line"><span class="attr">  build:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="comment"># 今回はmasterブランチへのpushをトリガとしているので不要だが、gh-pagesへのpushをトリガとする場合など</span></span><br><span class="line">    <span class="comment"># 無限ループを回避する際には以下のように記述する。</span></span><br><span class="line"><span class="attr">    if:</span> <span class="string">"!contains(github.event.head_commit.message, 'Update documentation via GitHub Actions')"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    steps:</span></span><br><span class="line"><span class="attr">    - uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 今回はMakefileを利用するので、makeコマンドを使用するよう元ネタから修正した。</span></span><br><span class="line">    <span class="comment"># またドキュメントのソースが含まれているディレクトリは各自の定義に依存する。</span></span><br><span class="line"><span class="attr">    - uses:</span> <span class="string">ammaraskar/sphinx-action@master</span></span><br><span class="line"><span class="attr">      with:</span></span><br><span class="line"><span class="attr">        build-command:</span> <span class="string">"make html"</span></span><br><span class="line"><span class="attr">        docs-folder:</span> <span class="string">"documents/"</span></span><br><span class="line">    <span class="comment"># 先ほどGitHubのウェブUIで定義した秘密鍵名を使用する。</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">Commit</span> <span class="string">documentation</span> <span class="string">changes</span> <span class="string">and</span> <span class="string">push</span> <span class="string">it</span></span><br><span class="line"><span class="attr">      run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        mkdir ~/.ssh</span></span><br><span class="line"><span class="string">        ssh-keyscan -t rsa github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">        echo "$<span class="template-variable">&#123;&#123; secrets.＜先ほどGitHubウェブUIで定義した秘密鍵名＞ &#125;&#125;</span>" &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">        chmod 400 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">        git clone git@github.com:$&#123;GITHUB_REPOSITORY&#125;.git --branch gh-pages --single-branch gh-pages</span></span><br><span class="line"><span class="string">        cp -r documents/_build/html/* gh-pages/</span></span><br><span class="line"><span class="string">        cd gh-pages</span></span><br><span class="line"><span class="string">        git config --local user.email "action@github.com"</span></span><br><span class="line"><span class="string">        git config --local user.name "GitHub Action"</span></span><br><span class="line"><span class="string">        git add .</span></span><br><span class="line"><span class="string">        git commit -m "Update documentation via GitHub Actions" -a || true</span></span><br><span class="line"><span class="string">        git push origin HEAD:gh-pages</span></span><br><span class="line"><span class="string">        # The above command will fail if no changes were present, so we ignore</span></span><br><span class="line"><span class="string">        # that.</span></span><br><span class="line"><span class="string">    # ===============================</span></span><br></pre></td></tr></table></figure>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/08/09/Use-GitHub-actions-to-deploy-documents/" data-id="clmwcnmnx00bg1vp2mq0jgnl4" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Install-Bigtop-RPMs-using-Yum" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/07/21/Install-Bigtop-RPMs-using-Yum/">Install Bigtop RPMs using Yum</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/07/21/Install-Bigtop-RPMs-using-Yum/">
            <time datetime="2020-07-21T13:50:06.000Z" itemprop="datePublished">2020-07-21</time>
        </a>
    </div>


                        
                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://cwiki.apache.org/confluence/display/BIGTOP/Bigtop+1.4.0+Release" target="_blank" rel="noopener">Apache
Bigtop 1.4.0のパッケージバージョン</a></li>
<li><a href="https://downloads.apache.org/bigtop/" target="_blank" rel="noopener">レポジトリ関連の資材置き場</a></li>
<li><a href="https://downloads.apache.org/bigtop/bigtop-1.4.0/repos/centos7/bigtop.repo" target="_blank" rel="noopener">CentOS7のbigtop.repo</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<p>今回は、2020/7/21時点の最新バージョンである <a href="https://cwiki.apache.org/confluence/display/BIGTOP/Bigtop+1.4.0+Release" target="_blank" rel="noopener">Apache
Bigtop 1.4.0のパッケージバージョン</a> の
Hadoopをインストールできるかどうかを試してみることとする。</p>
<p>Yumのrepoファイルは <a href="https://downloads.apache.org/bigtop/" target="_blank" rel="noopener">レポジトリ関連の資材置き場</a>
以下にある。 例えば、今回はCentOS7を利用することにするので、 <a href="https://downloads.apache.org/bigtop/bigtop-1.4.0/repos/centos7/bigtop.repo" target="_blank" rel="noopener">CentOS7のbigtop.repo</a>
あたりを利用する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /etc/yum.repos.d</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo wget https://downloads.apache.org/bigtop/bigtop-1.4.0/repos/centos7/bigtop.repo</span></span><br></pre></td></tr></table></figure>
<p>ひとまずパッケージが見つかるかどうか、確認。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum search hadoop-conf-pseudo</span></span><br><span class="line">読み込んだプラグイン:fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: d36uatko69830t.cloudfront.net</span><br><span class="line"> * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line"> * extras: d36uatko69830t.cloudfront.net</span><br><span class="line"> * updates: d36uatko69830t.cloudfront.net</span><br><span class="line">=========================================== N/S matched: hadoop-conf-pseudo ============================================</span><br><span class="line">hadoop-conf-pseudo.x86_64 : Pseudo-distributed Hadoop configuration</span><br></pre></td></tr></table></figure>
<p>確認できたので、試しにインストール。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install hadoop-conf-pseudo</span></span><br></pre></td></tr></table></figure>
<p>自分の手元の環境では、依存関係で以下のパッケージがインストールされた。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">========================================================================================================================</span><br><span class="line"> Package                                    アーキテクチャー   バージョン                      リポジトリー        容量</span><br><span class="line">========================================================================================================================</span><br><span class="line">インストール中:</span><br><span class="line"> hadoop-conf-pseudo                         x86_64             2.8.5-1.el7                     bigtop              20 k</span><br><span class="line">依存性関連でのインストールをします:</span><br><span class="line"> at                                         x86_64             3.1.13-24.el7                   base                51 k</span><br><span class="line"> bc                                         x86_64             1.06.95-13.el7                  base               115 k</span><br><span class="line"> bigtop-groovy                              noarch             2.4.10-1.el7                    bigtop             9.8 M</span><br><span class="line"> bigtop-jsvc                                x86_64             1.0.15-1.el7                    bigtop              29 k</span><br><span class="line"> bigtop-utils                               noarch             1.4.0-1.el7                     bigtop              11 k</span><br><span class="line"> cups-client                                x86_64             1:1.6.3-43.el7                  base               152 k</span><br><span class="line"> ed                                         x86_64             1.9-4.el7                       base                72 k</span><br><span class="line"> hadoop                                     x86_64             2.8.5-1.el7                     bigtop              24 M</span><br><span class="line"> hadoop-hdfs                                x86_64             2.8.5-1.el7                     bigtop              24 M</span><br><span class="line"> hadoop-hdfs-datanode                       x86_64             2.8.5-1.el7                     bigtop             5.7 k</span><br><span class="line"> hadoop-hdfs-namenode                       x86_64             2.8.5-1.el7                     bigtop             5.8 k</span><br><span class="line"> hadoop-hdfs-secondarynamenode              x86_64             2.8.5-1.el7                     bigtop             5.8 k</span><br><span class="line"> hadoop-mapreduce                           x86_64             2.8.5-1.el7                     bigtop              34 M</span><br><span class="line"> hadoop-mapreduce-historyserver             x86_64             2.8.5-1.el7                     bigtop             5.8 k</span><br><span class="line"> hadoop-yarn                                x86_64             2.8.5-1.el7                     bigtop              20 M</span><br><span class="line"> hadoop-yarn-nodemanager                    x86_64             2.8.5-1.el7                     bigtop             5.7 k</span><br><span class="line"> hadoop-yarn-resourcemanager                x86_64             2.8.5-1.el7                     bigtop             5.6 k</span><br><span class="line"> libpcap                                    x86_64             14:1.5.3-12.el7                 base               139 k</span><br><span class="line"> m4                                         x86_64             1.4.16-10.el7                   base               256 k</span><br><span class="line"> mailx                                      x86_64             12.5-19.el7                     base               245 k</span><br><span class="line"> nmap-ncat                                  x86_64             2:6.40-19.el7                   base               206 k</span><br><span class="line"> patch                                      x86_64             2.7.1-12.el7_7                  base               111 k</span><br><span class="line"> psmisc                                     x86_64             22.20-16.el7                    base               141 k</span><br><span class="line"> redhat-lsb-core                            x86_64             4.1-27.el7.centos.1             base                38 k</span><br><span class="line"> redhat-lsb-submod-security                 x86_64             4.1-27.el7.centos.1             base                15 k</span><br><span class="line"> spax                                       x86_64             1.5.2-13.el7                    base               260 k</span><br><span class="line"> time                                       x86_64             1.7-45.el7                      base                30 k</span><br><span class="line"> zookeeper                                  x86_64             3.4.6-1.el7                     bigtop             7.0 M</span><br></pre></td></tr></table></figure>
<p>initスクリプトがインストールされていることがわかる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -1 /etc/init.d/</span></span><br><span class="line">README</span><br><span class="line">functions</span><br><span class="line">hadoop-hdfs-datanode</span><br><span class="line">hadoop-hdfs-namenode</span><br><span class="line">hadoop-hdfs-secondarynamenode</span><br><span class="line">hadoop-mapreduce-historyserver</span><br><span class="line">hadoop-yarn-nodemanager</span><br><span class="line">hadoop-yarn-resourcemanager</span><br><span class="line">netconsole</span><br><span class="line">network</span><br></pre></td></tr></table></figure>
<p>ひとまずHDFSをフォーマット。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo -u hdfs hdfs namenode -format</span></span><br></pre></td></tr></table></figure>
<p>あとは、上記の各種Hadoopサービスを立ち上げれば良い。</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/07/21/Install-Bigtop-RPMs-using-Yum/" data-id="clmwcnmll005k1vp2gkm8hbi7" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Delta-Lake-0-7-0" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/06/19/Delta-Lake-0-7-0/">Delta Lake 0.7.0</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/06/19/Delta-Lake-0-7-0/">
            <time datetime="2020-06-19T00:46:13.000Z" itemprop="datePublished">2020-06-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/">Storage Layer</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Delta-Lake/">Delta Lake</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Delta-Lake/">Delta Lake</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#sql-ddlへの対応やhive-メタストアの対応" id="toc-sql-ddlへの対応やhive-メタストアの対応">SQL DDLへの対応やHive
メタストアの対応</a>
<ul>
<li><a href="#起動時のオプション例" id="toc-起動時のオプション例">起動時のオプション例</a></li>
<li><a href="#パーサの呼び出し流れ" id="toc-パーサの呼び出し流れ">パーサの呼び出し流れ</a></li>
<li><a href="#カスタムカタログ" id="toc-カスタムカタログ">カスタムカタログ</a></li>
<li><a href="#scalaやpythonでの例" id="toc-scalaやpythonでの例">ScalaやPythonでの例</a></li>
<li><a href="#sqlでのマージ処理" id="toc-sqlでのマージ処理">SQLでのマージ処理</a></li>
</ul></li>
<li><a href="#presto-athena用のメタデータの自動生成" id="toc-presto-athena用のメタデータの自動生成">Presto /
Athena用のメタデータの自動生成</a></li>
<li><a href="#テーブル履歴の切り詰めの管理" id="toc-テーブル履歴の切り詰めの管理">テーブル履歴の切り詰めの管理</a></li>
<li><a href="#ユーザメタデータ" id="toc-ユーザメタデータ">ユーザメタデータ</a></li>
<li><a href="#azureのdata-lake-storage-gen2" id="toc-azureのdata-lake-storage-gen2">AzureのData Lake Storage
Gen2</a></li>
<li><a href="#ストリーム処理のone-timeトリガの改善" id="toc-ストリーム処理のone-timeトリガの改善">ストリーム処理のone-timeトリガの改善</a></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://github.com/delta-io/delta/releases" target="_blank" rel="noopener">Delta Lake
リリースノート</a></li>
<li><a href="https://docs.delta.io/0.7.0/delta-batch.html" target="_blank" rel="noopener">0.7.0のテーブル読み書き</a></li>
<li><a href="https://docs.delta.io/0.6.1/delta-batch.html" target="_blank" rel="noopener">0.6.1のテーブル読み書き</a></li>
<li><a href="https://github.com/delta-io/delta/issues/307#issuecomment-582186407" target="_blank" rel="noopener">Spark3系でないとHiveメタストアに対応できない理由</a></li>
<li><a href="https://github.com/delta-io/delta/blob/master/examples/scala/src/main/scala/example/QuickstartSQL.scala#L58" target="_blank" rel="noopener">SQLを用いたマージの例</a></li>
<li><a href="https://docs.delta.io/0.7.0/delta-batch.html#table-properties" target="_blank" rel="noopener">Table
Properties</a></li>
<li><a href="https://docs.delta.io/0.7.0/delta-batch.html#table-properties" target="_blank" rel="noopener">Table
Properties</a></li>
<li><a href="https://docs.delta.io/0.7.0/delta-storage.html#azure-data-lake-storage-gen2" target="_blank" rel="noopener">0.7.0で対応したAzure
Data Lake Storage Gen2</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<p>0.7.0が出たので、本リリースの特徴を確認する。</p>
<h2><span id="sql-ddlへの対応やhiveメタストアの対応">SQL DDLへの対応やHive
メタストアの対応</span></h2>
<p>0.6系まではScala、Python APIのみであったが、SQL DDLにも対応した。 <a href="https://docs.delta.io/0.7.0/delta-batch.html" target="_blank" rel="noopener">0.7.0のテーブル読み書き</a>
と <a href="https://docs.delta.io/0.6.1/delta-batch.html" target="_blank" rel="noopener">0.6.1のテーブル読み書き</a>
を見比べると、SQLの例が載っていることがわかる。
対応するSQL構文については
<code>src/main/antlr4/io/delta/sql/parser/DeltaSqlBase.g4</code>
あたりを見ると良い。</p>
<p>なお、 <a href="https://github.com/delta-io/delta/issues/307#issuecomment-582186407" target="_blank" rel="noopener">Spark3系でないとHiveメタストアに対応できない理由</a>
を見る限り、 Spark3系のAPI（や、DataSourceV2も、かな）を使わないと、Data
SourceのカスタムAPIを利用できないため、
これまでHiveメタストアのような外部メタストアと連携したDelta
Lakeのメタデータ管理ができなかった、とのこと。</p>
<p>なお、今回の対応でSparkのカタログ機能を利用することになったので、起動時もしくはSparkSession生成時の
オプション指定が必要になった。
その代わり、ライブラリの明示的なインポートが不要であり、クエリはDelta
Lakeのパーサで解釈された後、
解釈できないようであれば通常のパーサで処理されるようになる。</p>
<h3><span id="起動時のオプション例">起動時のオプション例</span></h3>
<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /opt/spark/default/bin/spark-shell --packages io.delta:delta-core_2.12:0.7.0 --conf <span class="string">"spark.sql.extensions=io.delta.sql.DeltaSparkSessionExtension"</span> --conf <span class="string">"spark.sql.catalog.spark_catalog=org.apache.spark.sql.delta.catalog.DeltaCatalog"</span></span></span><br></pre></td></tr></table></figure>
<p>なお、ここでは <code>SparkSessionExtensions</code>
を利用し、SparkSession生成時にカスタムルール等を挿入している。
この機能は2020/06/19時点でSpark本体側でExperimentalであることに注意。
今後もSpark本体側の仕様変更に引きずられる可能性はある。</p>
<h3><span id="パーサの呼び出し流れ">パーサの呼び出し流れ</span></h3>
<p>セッション拡張機能を利用し、パーサが差し替えられている。</p>
<p>io/delta/sql/DeltaSparkSessionExtension.scala:73</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeltaSparkSessionExtension</span> <span class="keyword">extends</span> (<span class="params"><span class="type">SparkSessionExtensions</span> =&gt; <span class="type">Unit</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(extensions: <span class="type">SparkSessionExtensions</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    extensions.injectParser &#123; (session, parser) =&gt;</span><br><span class="line">      <span class="keyword">new</span> <span class="type">DeltaSqlParser</span>(parser)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p><code>io.delta.sql.parser.DeltaSqlParser</code> クラスでは
デリゲート用のパーサを受け取り、自身のパーサで処理できなかった場合に処理をデリゲートパーサに渡す。</p>
<p>io/delta/sql/parser/DeltaSqlParser.scala:66</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeltaSqlParser</span>(<span class="params">val delegate: <span class="type">ParserInterface</span></span>) <span class="keyword">extends</span> <span class="title">ParserInterface</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> builder = <span class="keyword">new</span> <span class="type">DeltaSqlAstBuilder</span></span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p>例えば、 <code>SparkSession</code> の <code>sql</code>
メソッドを使って呼び出す場合を例にする。 このとき、内部では、
<code>org.apache.spark.sql.catalyst.parser.ParserInterface#parsePlan</code>
メソッドが呼ばれて、 渡されたクエリ文 <code>sqlText</code>
が処理される。</p>
<p>org/apache/spark/sql/SparkSession.scala:601</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sql</span></span>(sqlText: <span class="type">String</span>): <span class="type">DataFrame</span> = withActive &#123;</span><br><span class="line">  <span class="keyword">val</span> tracker = <span class="keyword">new</span> <span class="type">QueryPlanningTracker</span></span><br><span class="line">  <span class="keyword">val</span> plan = tracker.measurePhase(<span class="type">QueryPlanningTracker</span>.<span class="type">PARSING</span>) &#123;</span><br><span class="line">    sessionState.sqlParser.parsePlan(sqlText)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">Dataset</span>.ofRows(self, plan, tracker)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>この <code>parsePlan</code>
がoverrideされており、以下のように定義されている。</p>
<p>io/delta/sql/parser/DeltaSqlParser.scala:69</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">parsePlan</span></span>(sqlText: <span class="type">String</span>): <span class="type">LogicalPlan</span> = parse(sqlText) &#123; parser =&gt;</span><br><span class="line">  builder.visit(parser.singleStatement()) <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> plan: <span class="type">LogicalPlan</span> =&gt; plan</span><br><span class="line">    <span class="keyword">case</span> _ =&gt; delegate.parsePlan(sqlText)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>まずは <code>io.delta.sql.parser.DeltaSqlParser#parse</code>
メソッドを利用してパースがここ見られるが、
LogicalPlanが戻らなかったときは、デリゲート用パーサが呼び出されるようになっている。</p>
<h3><span id="カスタムカタログ">カスタムカタログ</span></h3>
<p>Spark3ではDataSourvV2の中で、プラガブルなカタログに対応した。 Delta
Lake
0.7.0はこれを利用し、カスタムカタログを用いる。（これにより、Hiveメタストアを経由してDelta
Lake形式のデータを読み書きできるようになっている）
使われているカタログは
<code>org.apache.spark.sql.delta.catalog.DeltaCatalog</code> である。
（SparkSessionのインスタンス生成する際、もしくは起動時のオプション指定）</p>
<p>当該カタログ内部では、例えば
<code>org.apache.spark.sql.delta.catalog.DeltaCatalog#createDeltaTable</code>
メソッドが定義されており、
<code>org.apache.spark.sql.delta.catalog.DeltaCatalog#createTable</code>
※ しようとするときなどに呼び出されるようになっている。</p>
<p>※
<code>org.apache.spark.sql.connector.catalog.DelegatingCatalogExtension#createTable</code>
をoverrideしている</p>
<p>なお、このクラスもデリゲート用のカタログを用いるようになっている。
<code>org.apache.spark.sql.delta.catalog.DeltaCatalog#createTable</code>
メソッドは以下のようになっており、 データソースが delta
出ない場合は、親クラスの <code>createTable</code>
（つまり標準的なもの）が呼び出されるようになっている。</p>
<p>org/apache/spark/sql/delta/catalog/DeltaCatalog.scala:149</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">createTable</span></span>(</span><br><span class="line">    ident: <span class="type">Identifier</span>,</span><br><span class="line">    schema: <span class="type">StructType</span>,</span><br><span class="line">    partitions: <span class="type">Array</span>[<span class="type">Transform</span>],</span><br><span class="line">    properties: util.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">String</span>]): <span class="type">Table</span> = &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="type">DeltaSourceUtils</span>.isDeltaDataSourceName(getProvider(properties))) &#123;</span><br><span class="line">    createDeltaTable(</span><br><span class="line">      ident, schema, partitions, properties, sourceQuery = <span class="type">None</span>, <span class="type">TableCreationModes</span>.<span class="type">Create</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.createTable(ident, schema, partitions, properties)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="scalaやpythonでの例">ScalaやPythonでの例</span></h3>
<p>代表的にScalaの例を出す。公式サイトには以下のように載っている。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df.write.format(<span class="string">"delta"</span>).saveAsTable(<span class="string">"events"</span>)      <span class="comment">// create table in the metastore</span></span><br><span class="line"></span><br><span class="line">df.write.format(<span class="string">"delta"</span>).save(<span class="string">"/delta/events"</span>)  <span class="comment">// create table by path</span></span><br></pre></td></tr></table></figure>
<p>Hiveメタストア経由で書き込むケースと、ストレージ上に直接書き出すケースが載っている。</p>
<h3><span id="sqlでのマージ処理">SQLでのマージ処理</span></h3>
<p><a href="https://github.com/delta-io/delta/blob/master/examples/scala/src/main/scala/example/QuickstartSQL.scala#L58" target="_blank" rel="noopener">SQLを用いたマージの例</a>
の通り、Delta Lakeの特徴であるマージ機能もSQLから呼び出させる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spark.sql(<span class="string">s""</span><span class="string">"MERGE INTO $tableName USING newData</span></span><br><span class="line"><span class="string">    ON $&#123;tableName&#125;.id = newData.id</span></span><br><span class="line"><span class="string">    WHEN MATCHED THEN</span></span><br><span class="line"><span class="string">      UPDATE SET $&#123;tableName&#125;.id = newData.id</span></span><br><span class="line"><span class="string">    WHEN NOT MATCHED THEN INSERT *</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<p>Spark SQLのカタログに登録されたDelta
LakeのテーブルからDeltaTableを生成することもできる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> io.delta.tables.<span class="type">DeltaTable</span></span><br><span class="line">scala&gt; <span class="keyword">val</span> tbl = <span class="type">DeltaTable</span>.forName(tableName)</span><br></pre></td></tr></table></figure>
<h2><span id="presto-athena用のメタデータの自動生成">Presto /
Athena用のメタデータの自動生成</span></h2>
<p>Delta
LakeはPresto、Athena用のメタデータを生成できるが、更新があった際にパーティションごとに自動で再生成できるようになった。</p>
<h2><span id="テーブル履歴の切り詰めの管理">テーブル履歴の切り詰めの管理</span></h2>
<p>Delta Lakeは更新の履歴を保持することも特徴の一つだが、
データ本体とログのそれぞれの切り詰め対象期間を指定できる。</p>
<p>CREATEやALTER句内で、TBLPROPERTIESとして指定することになっている。
例えば以下。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spark.sql(<span class="string">s"CREATE TABLE <span class="subst">$tableName</span>(id LONG) USING delta TBLPROPERTIES ('delta.logRetentionDuration' = 'interval 1 day', 'delta.deletedFileRetentionDuration' = 'interval 1 day')"</span>)</span><br><span class="line">spark.sql(<span class="string">s"ALTER TABLE <span class="subst">$tableName</span> SET TBLPROPERTIES ('delta.logRetentionDuration' = 'interval 1 day', 'delta.deletedFileRetentionDuration' = 'interval 1 day')"</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="ユーザメタデータ">ユーザメタデータ</span></h2>
<p>spark.databricks.delta.commitInfo.userMetadata
プロパティを利用して、ユーザメタデータを付与できる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.write.option(<span class="string">"spark.databricks.delta.commitInfo.userMetadata"</span>, <span class="string">"test"</span>).format(<span class="string">"delta"</span>).mode(<span class="string">"append"</span>).save(<span class="string">"/tmp/test"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; spark.sql(<span class="string">"SET spark.databricks.delta.commitInfo.userMetadata=test"</span>)</span><br><span class="line">scala&gt; spark.sql(<span class="string">s"INSERT INTO <span class="subst">$tableName</span> VALUES 0, 1, 2, 3, 4"</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="azureのdata-lake-storagegen2">AzureのData Lake Storage
Gen2</span></h2>
<p>対応した。</p>
<p>しかし、 <a href="https://docs.delta.io/0.7.0/delta-storage.html#azure-data-lake-storage-gen2" target="_blank" rel="noopener">0.7.0で対応したAzure
Data Lake Storage Gen2</a> の通り、
前提となっている各種ソフトウェアバージョンは高め。</p>
<h2><span id="ストリーム処理のone-timeトリガの改善">ストリーム処理のone-timeトリガの改善</span></h2>
<p>DataStreamReaderのオプションでmaxFilesPerTriggerを設定しているとしても、
one-time
triggerでは一度に溜まったすべてのデータを読み込むようになった。（Spark
3系の話）  <!-- vim: set et tw=0 ts=2 sw=2: --></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/06/19/Delta-Lake-0-7-0/" data-id="clmwcnmwl015v1vp2lbel6p35" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-About-tream-table-theory" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/05/20/About-tream-table-theory/">About tream table theory</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/05/20/About-tream-table-theory/">
            <time datetime="2020-05-19T15:12:43.000Z" itemprop="datePublished">2020-05-20</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Messaging-System/">Messaging System</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Messaging-System/Kafka/">Kafka</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Kafka/">Kafka</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#tyler-akidauらによるapache-beamにまつわる情報" id="toc-tyler-akidauらによるapache-beamにまつわる情報">Tyler
AkidauらによるApache Beamにまつわる情報</a></li>
<li><a href="#matthias-j.-saxguozhang-wangらによる論文" id="toc-matthias-j.-saxguozhang-wangらによる論文">Matthias J.
Sax、Guozhang Wangらによる論文</a>
<ul>
<li><a href="#概要" id="toc-概要">概要</a></li>
<li><a href="#introduction" id="toc-introduction">1
Introduction</a></li>
<li><a href="#background" id="toc-background">2 Background</a></li>
<li><a href="#duality-of-streams-and-tables" id="toc-duality-of-streams-and-tables">3 Duality of streams and
tables</a></li>
<li><a href="#stream-processing-operators" id="toc-stream-processing-operators">4 STREAM PROCESSING
OPERATORS</a></li>
<li><a href="#case-study-apache-kafka" id="toc-case-study-apache-kafka">5 CASE STUDY: APACHE KAFKA</a></li>
<li><a href="#related-work" id="toc-related-work">6 RELATED
WORK</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://www.slideshare.net/Hadoop_Summit/foundations-of-streaming-sql-stream-table-theory" target="_blank" rel="noopener">Foundations
of streaming SQL stream &amp; table theory</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="tylerakidauらによるapache-beamにまつわる情報">Tyler
AkidauらによるApache Beamにまつわる情報</span></h2>
<p><a href="https://www.slideshare.net/Hadoop_Summit/foundations-of-streaming-sql-stream-table-theory#43" target="_blank" rel="noopener">Foundations
of streaming SQL stream &amp; table theory (General theory)</a> の通り、
ストリームデータとテーブルデータの関係性を論じたもの。</p>
<p>上記の内容の全体は、 <a href="http://shop.oreilly.com/product/0636920073994.do" target="_blank" rel="noopener">OReillyのStreaming
Systems</a> に記載あり。</p>
<p>これらは、ストリーム・テーブル理論をベースに、Apache
Beamを利用したストリームデータ処理・活用システムについて論じたもの。</p>
<h2><span id="matthias-jsax-guozhang-wangらによる論文">Matthias J.
Sax、Guozhang Wangらによる論文</span></h2>
<p><a href="https://dl.acm.org/doi/10.1145/3242153.3242155" target="_blank" rel="noopener">Streams and
Tables Two Sides of the Same Coin</a></p>
<h3><span id="概要">概要</span></h3>
<p>ストリームデータの処理モデルを提案。
論理・物理の間の一貫性の崩れに対処する。</p>
<h3><span id="1-introduction">1 Introduction</span></h3>
<p>データストリームのチャレンジ</p>
<ul>
<li>物理的なアウト・オブ・オーダへの対応</li>
<li>処理のオペレータがステートフルでないといけない、レイテンシ、正しさ、処理コストなどのトレードオフがある、など</li>
<li>分散処理への対応</li>
</ul>
<p>物理的な並びが保証されない条件下で、
十分に表現力のあるオペレータ（モデル）を立案する。</p>
<h3><span id="2-background">2 Background</span></h3>
<p>ストリームデータのモデル。</p>
<p>ポイント。レコード配下の構成。</p>
<ul>
<li>オフセット：物理の並び</li>
<li>タイムスタンプ：論理の並び（生成時刻）</li>
<li>キー</li>
<li>バリュー</li>
</ul>
<h3><span id="3-duality-of-streams-andtables">3 Duality of streams and
tables</span></h3>
<p>レイテンシは、データストリームの特性に依存する。</p>
<p>論理、物理の並びの差異を解決するため、結果を継続的に更新するモデルを提案した。</p>
<p>Dual Streaming Model</p>
<p>DUality of streams and tables</p>
<p>テーブルは、テーブルのバージョンのコレクションと考えることもできる。</p>
<h3><span id="4-stream-processing-operators">4 STREAM PROCESSING OPERATORS</span></h3>
<p>モデル定義を解説。
フィルターなどのステートレスな処理から、アグリゲーションなどのステートフルな処理まで。</p>
<p>out-of-order
なレコードが届いても、最終的な出力結果テーブルがout-of-orderレコードがないときと同一になるように動くことを期待する。</p>
<p>Watermarkと似たような機構として、「retention time」を導入。
結果テーブル内の「現在時刻 - retention
time」よりも古い結果をメンテナンス対象から外す。</p>
<p>Stream - Table Joinのケースで、「遅れテーブル更新」が生じると、
下流システムに対して結果の上書きデータを出力する必要がある。</p>
<h3><span id="5-case-study-apache-kafka">5 CASE STUDY: APACHE KAFKA</span></h3>
<p>Kafka Streamsの例。</p>
<p>Kafka Streamsの利用企業：The New York Times, Pinterest, LINE,
Trivago, etc</p>
<p>Kafka Streamsのオペレーションはすべてノンブロッキングであり、
レコードを受領次第処理し、KTableにマテリアライズされたり、Topicに書き戻したりされる。</p>
<p>Window集計の例を題材に、retention timeを利用。 retention
timeを長くするほどストレージを利用するが、
out-of-orderレコードに対してロバストになる。 また、retention
timeが長いほど、ウィンドウ結果が確定したと言えるタイミングが遅くなる。</p>
<h3><span id="6-related-work">6 RELATED WORK</span></h3>
<p>Relationを取り扱うモデル、out-of-orderを取り扱うモデル、テーブルバージョン管理を取り扱うモデルなど。</p>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/05/20/About-tream-table-theory/" data-id="clmwcnmjk00131vp2l10ru6mj" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Handle-pictures-in-delta-lake" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/05/12/Handle-pictures-in-delta-lake/">Handle pictures in delta lake and hudi</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/05/12/Handle-pictures-in-delta-lake/">
            <time datetime="2020-05-12T13:58:43.000Z" itemprop="datePublished">2020-05-12</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/">Storage Layer</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Delta-Lake/">Delta Lake</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/Delta-Lake/">Delta Lake</a>, <a class="tag-link" href="/memo-blog/tags/Spark/">Spark</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#delta-lake" id="toc-delta-lake">Delta Lake</a>
<ul>
<li><a href="#まずはjpgをsparkで読み込む" id="toc-まずはjpgをsparkで読み込む">まずはjpgをSparkで読み込む</a></li>
<li><a href="#delta-lakeで扱う" id="toc-delta-lakeで扱う">Delta
Lakeで扱う</a>
<ul>
<li><a href="#書き込み" id="toc-書き込み">書き込み</a></li>
<li><a href="#読み出し" id="toc-読み出し">読み出し</a></li>
<li><a href="#更新" id="toc-更新">更新</a></li>
</ul></li>
<li><a href="#parquetの内容を確認する" id="toc-parquetの内容を確認する">Parquetの内容を確認する</a>
<ul>
<li><a href="#スキーマ" id="toc-スキーマ">スキーマ</a></li>
<li><a href="#メタデータ" id="toc-メタデータ">メタデータ</a></li>
</ul></li>
<li><a href="#pythonで画像処理してみる" id="toc-pythonで画像処理してみる">Pythonで画像処理してみる</a></li>
</ul></li>
<li><a href="#hudi" id="toc-hudi">Hudi</a>
<ul>
<li><a href="#画像読み込み" id="toc-画像読み込み">画像読み込み</a></li>
<li><a href="#書き込み-1" id="toc-書き込み-1">書き込み</a></li>
<li><a href="#読み込み" id="toc-読み込み">読み込み</a></li>
<li><a href="#更新-1" id="toc-更新-1">更新</a></li>
<li><a href="#parquetの内容を確認する-1" id="toc-parquetの内容を確認する-1">Parquetの内容を確認する</a>
<ul>
<li><a href="#スキーマ-1" id="toc-スキーマ-1">スキーマ</a></li>
<li><a href="#メタデータ-1" id="toc-メタデータ-1">メタデータ</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://spark.apache.org/docs/latest/ml-datasource#image-data-source" target="_blank" rel="noopener">Spark公式ドキュメントのImage
data source</a></li>
<li><a href="https://www.kaggle.com/scolianni/mnistasjpg/data" target="_blank" rel="noopener">Kaggleのmnistデータ</a></li>
<li><a href="https://machinelearningmastery.com/how-to-load-and-manipulate-images-for-deep-learning-in-python-with-pil-pillow/" target="_blank" rel="noopener">How
to Load and Manipulate Images for Deep Learning in Python With
PIL/Pillow</a></li>
<li><a href="https://hudi.apache.org/docs/quick-start-guide.html#setup" target="_blank" rel="noopener">Hudiのquick-start-guide</a></li>
<li><a href="https://github.com/apache/parquet-mr" target="_blank" rel="noopener">parquet-mr</a></li>
</ul>
<h1><span id="delta-lake">Delta Lake</span></h1>
<h2><span id="まずはjpgをsparkで読み込む">まずはjpgをSparkで読み込む</span></h2>
<p>予め、Delta Lakeを読み込みながら起動する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /opt/spark/default/bin/spark-shell --packages io.delta:delta-core_2.11:0.6.0</span></span><br></pre></td></tr></table></figure>
<p><a href="https://spark.apache.org/docs/latest/ml-datasource#image-data-source" target="_blank" rel="noopener">Spark公式ドキュメントのImage
data source</a> を利用し、jpgをDataFrameとして読み込んでみる。
データは、 <a href="https://www.kaggle.com/scolianni/mnistasjpg/data" target="_blank" rel="noopener">Kaggleのmnistデータ</a>
を利用。このデータはjpgになっているので便利。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> home = sys.env(<span class="string">"HOME"</span>)</span><br><span class="line">scala&gt; <span class="keyword">val</span> imageDir = <span class="string">"Downloads/mnist_jpg/trainingSet/trainingSet/0"</span></span><br><span class="line">scala&gt; <span class="keyword">val</span> df = spark.read.format(<span class="string">"image"</span>).option(<span class="string">"dropInvalid"</span>, <span class="literal">true</span>).load(home + <span class="string">"/"</span> + imageDir)</span><br></pre></td></tr></table></figure>
<p>データをDataFrameにする定義ができた。 内容は以下の通り。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; df.select(<span class="string">"image.origin"</span>, <span class="string">"image.width"</span>, <span class="string">"image.height"</span>).show(<span class="number">3</span>, truncate=<span class="literal">false</span>)</span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">|origin                                                                         |width|height|</span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">|file:<span class="comment">///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_20188.jpg|28   |28    |</span></span><br><span class="line">|file:<span class="comment">///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_12634.jpg|28   |28    |</span></span><br><span class="line">|file:<span class="comment">///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_26812.jpg|28   |28    |</span></span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br></pre></td></tr></table></figure>
<p>公式ドキュメントのとおりだが、カラムは以下の通り。</p>
<ul>
<li>origin: StringType (represents the file path of the image)</li>
<li>height: IntegerType (height of the image)</li>
<li>width: IntegerType (width of the image)</li>
<li>nChannels: IntegerType (number of image channels)</li>
<li>mode: IntegerType (OpenCV-compatible type)</li>
<li>data: BinaryType (Image bytes in OpenCV-compatible order: row-wise
BGR in most cases)</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; df.printSchema</span><br><span class="line">root</span><br><span class="line"> |-- image: struct (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- origin: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- height: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- width: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- nChannels: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- mode: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- data: binary (nullable = <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<h2><span id="delta-lakeで扱う">Delta Lakeで扱う</span></h2>
<h3><span id="書き込み">書き込み</span></h3>
<p>これをDelta LakeのData Sourceで書き出してみる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> deltaImagePath = <span class="string">"/tmp/delta-lake-image"</span></span><br><span class="line">scala&gt; df.write.format(<span class="string">"delta"</span>).save(deltaImagePath)</span><br></pre></td></tr></table></figure>
<h3><span id="読み出し">読み出し</span></h3>
<p>できた。試しにDeltaTableとして読み出してみる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> io.delta.tables._</span><br><span class="line">scala&gt; <span class="keyword">import</span> org.apache.spark.sql.functions._</span><br><span class="line">scala&gt; <span class="keyword">val</span> deltaTable = <span class="type">DeltaTable</span>.forPath(deltaImagePath)</span><br></pre></td></tr></table></figure>
<h3><span id="更新">更新</span></h3>
<p>mergeを試す。
マージのためにキーを明示的に与えつつデータを準備する。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> targetDf = df.select($<span class="string">"image.origin"</span>, $<span class="string">"image"</span>)</span><br><span class="line">scala&gt; <span class="keyword">val</span> targetImagePath = <span class="string">"/tmp/delta-table"</span></span><br><span class="line">scala&gt; targetDf.write.format(<span class="string">"delta"</span>).save(targetImagePath)</span><br><span class="line">scala&gt; <span class="keyword">val</span> sourcePath = <span class="string">"Downloads/mnist_jpg/trainingSet/trainingSet/1"</span></span><br><span class="line">scala&gt; <span class="keyword">val</span> sourceDf = spark.read.format(<span class="string">"image"</span>).option(<span class="string">"dropInvalid"</span>, <span class="literal">true</span>).load(home + <span class="string">"/"</span> + sourcePath).select($<span class="string">"image.origin"</span>, $<span class="string">"image"</span>)</span><br></pre></td></tr></table></figure>
<p>Delta Tableを定義。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> deltaTable = <span class="type">DeltaTable</span>.forPath(targetImagePath)</span><br><span class="line">scala&gt; deltaTable</span><br><span class="line">        .as(<span class="string">"target"</span>)</span><br><span class="line">        .merge(</span><br><span class="line">          sourceDf.as(<span class="string">"source"</span>),</span><br><span class="line">          <span class="string">"target.origin = source.origin"</span>)</span><br><span class="line">        .whenMatched</span><br><span class="line">        .updateExpr(<span class="type">Map</span>(</span><br><span class="line">          <span class="string">"image"</span> -&gt; <span class="string">"source.image"</span>))</span><br><span class="line">        .whenNotMatched</span><br><span class="line">        .insertExpr(<span class="type">Map</span>(</span><br><span class="line">          <span class="string">"origin"</span> -&gt; <span class="string">"source.origin"</span>,</span><br><span class="line">          <span class="string">"image"</span> -&gt; <span class="string">"source.image"</span>))</span><br><span class="line">        .execute()</span><br></pre></td></tr></table></figure>
<p>実際に、追加データが入っていることが確かめられる。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; deltaTable.toDF.where($<span class="string">"origin"</span> contains <span class="string">"trainingSet/1"</span>).select(<span class="string">"image.origin"</span>, <span class="string">"image.width"</span>, <span class="string">"image.height"</span>).show(<span class="number">3</span>, truncate=<span class="literal">false</span>)</span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">|origin                                                                         |width|height|</span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">|file:<span class="comment">///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/1/img_10266.jpg|28   |28    |</span></span><br><span class="line">|file:<span class="comment">///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/1/img_10665.jpg|28   |28    |</span></span><br><span class="line">|file:<span class="comment">///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/1/img_10772.jpg|28   |28    |</span></span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">only showing top <span class="number">3</span> rows</span><br></pre></td></tr></table></figure>
<p>SparkのImage Data
Sourceは、メタデータと画像本体（バイナリ）を構造で扱っているだけなので、
実は特に工夫することなく扱えた。</p>
<p>公式ドキュメントによると、OpenCV形式バイナリで保持されている。
これから先は、Python使って処理したいので、改めて開き直す。</p>
<h2><span id="parquetの内容を確認する">Parquetの内容を確認する</span></h2>
<p><a href="https://github.com/apache/parquet-mr" target="_blank" rel="noopener">parquet-mr</a> の
<code>parquet-tools</code> を利用して、Parquetの内容を確認する。</p>
<p>なお、Hudi
v0.5.2におけるParquetのバージョンは以下の通り、1.10.1である。</p>
<p>pom.xml:84</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parquet.version</span>&gt;</span>1.10.1<span class="tag">&lt;/<span class="name">parquet.version</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当該バージョンに対応するタグをチェックアウトし、予めparquet-toolsをパッケージしておくこと。</p>
<h3><span id="スキーマ">スキーマ</span></h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> java -jar target/parquet-tools-1.10.1.jar schema /tmp/delta-lake-image/part-00000-c3d03d70-1785-435f-b055-b2a78903e732-c000.snappy.parquet</span></span><br><span class="line">message spark_schema &#123;</span><br><span class="line">  optional group image &#123;</span><br><span class="line">    optional binary origin (UTF8);</span><br><span class="line">    optional int32 height;</span><br><span class="line">    optional int32 width;</span><br><span class="line">    optional int32 nChannels;</span><br><span class="line">    optional int32 mode;</span><br><span class="line">    optional binary data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>シンプルにParquet内に保持されていることがわかる。 Spark
SQLのParquet取扱機能を利用している。</p>
<h3><span id="メタデータ">メタデータ</span></h3>
<p>ファイル名やクリエイタなど。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file:        file:/tmp/delta-lake-image/part-00000-c3d03d70-1785-435f-b055-b2a78903e732-c000.snappy.parquet</span><br><span class="line">creator:     parquet-mr version 1.10.1 (build a89df8f9932b6ef6633d06069e50c9b7970bebd1)</span><br><span class="line">extra:       org.apache.spark.sql.parquet.row.metadata = &#123;&quot;type&quot;:&quot;struct&quot;,&quot;fields&quot;:[&#123;&quot;name&quot;:&quot;image&quot;,&quot;type&quot;:&#123;&quot;type&quot;:&quot;struct&quot;,&quot;fields&quot;:[&#123;&quot;name&quot;:&quot;origin&quot;,&quot;type&quot;:&quot;string&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:&#123;&#125;&#125;,&#123;&quot;name&quot;:&quot;height&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:&#123;&#125;&#125;,&#123;&quot;name&quot;:&quot;width&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:&#123;&#125;&#125;,&#123;&quot;name&quot;:&quot;nChannels&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:&#123;&#125;&#125;,&#123;&quot;name&quot;:&quot;mode&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:&#123;&#125;&#125;,&#123;&quot;name&quot;:&quot;data&quot;,&quot;type&quot;:&quot;binary&quot;,&quot;nullable&quot;:true,&quot;metadata&quot;:&#123;&#125;&#125;]&#125;,&quot;nullable&quot;:true,&quot;metadata&quot;:&#123;&#125;&#125;]&#125;</span><br></pre></td></tr></table></figure>
<p>ファイルスキーマ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">file schema: spark_schema</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">image:       OPTIONAL F:6</span><br><span class="line">.origin:     OPTIONAL BINARY O:UTF8 R:0 D:2</span><br><span class="line">.height:     OPTIONAL INT32 R:0 D:2</span><br><span class="line">.width:      OPTIONAL INT32 R:0 D:2</span><br><span class="line">.nChannels:  OPTIONAL INT32 R:0 D:2</span><br><span class="line">.mode:       OPTIONAL INT32 R:0 D:2</span><br><span class="line">.data:       OPTIONAL BINARY R:0 D:2</span><br></pre></td></tr></table></figure>
<p>Rowグループ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">row group 1: RC:32 TS:29939 OFFSET:4</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">image:</span><br><span class="line">.origin:      BINARY SNAPPY DO:0 FPO:4 SZ:620/2838/4.58 VC:32 ENC:RLE,PLAIN,BIT_PACKED ST:[min: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_10203.jpg, max: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_9098.jpg, num_nulls: 0]</span><br><span class="line">.height:      INT32 SNAPPY DO:0 FPO:624 SZ:74/70/0.95 VC:32 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 28, max: 28, num_nulls: 0]</span><br><span class="line">.width:       INT32 SNAPPY DO:0 FPO:698 SZ:74/70/0.95 VC:32 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 28, max: 28, num_nulls: 0]</span><br><span class="line">.nChannels:   INT32 SNAPPY DO:0 FPO:772 SZ:74/70/0.95 VC:32 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 1, max: 1, num_nulls: 0]</span><br><span class="line">.mode:        INT32 SNAPPY DO:0 FPO:846 SZ:74/70/0.95 VC:32 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 0, max: 0, num_nulls: 0]</span><br><span class="line">.data:        BINARY SNAPPY DO:0 FPO:920 SZ:21175/26821/1.27 VC:32 ENC:RLE,PLAIN,BIT_PACKED ST:[min: 0x00</span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<h2><span id="pythonで画像処理してみる">Pythonで画像処理してみる</span></h2>
<p>とりあえずOpenCVをインストールしたPython環境のJupyterでPySparkを起動。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> PYSPARK_DRIVER_PYTHON_OPTS=<span class="string">"notebook --ip 0.0.0.0"</span> /opt/spark/default/bin/pyspark --packages io.delta:delta-core_2.11:0.6.0 --conf spark.pyspark.driver.python=<span class="variable">$HOME</span>/venv/jupyter/bin/jupyter</span></span><br></pre></td></tr></table></figure>
<p>この後はJupyter内で処理する。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> delta.tables <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> pyspark.sql.functions <span class="keyword">import</span> *</span><br><span class="line">delta_image_path = <span class="string">"/tmp/delta-lake-image"</span></span><br><span class="line">deltaTable = DeltaTable.forPath(spark, delta_image_path)</span><br><span class="line">deltaTable.toDF().select(<span class="string">"image.origin"</span>, <span class="string">"image.width"</span>, <span class="string">"image.height"</span>).show(<span class="number">3</span>, truncate=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>
<p>とりあえず読み込めたことがわかる。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">|origin                                                                         |width|height|</span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">|file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_20188.jpg|28   |28    |</span><br><span class="line">|file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_12634.jpg|28   |28    |</span><br><span class="line">|file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_26812.jpg|28   |28    |</span><br><span class="line">+-------------------------------------------------------------------------------+-----+------+</span><br><span class="line">only showing top 3 rows</span><br></pre></td></tr></table></figure>
<p>中のデータを利用できることを確かめるため、1件だけ取り出して処理してみる。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img = deltaTable.toDF().where(<span class="string">"image.origin == 'file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_1.jpg'"</span>).select(<span class="string">"image.origin"</span>, <span class="string">"image.width"</span>, <span class="string">"image.height"</span>, <span class="string">"image.nChannels"</span>, <span class="string">"image.data"</span>).collect()[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<p>とりあえずエッジ抽出をしてみる。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">nparr = np.frombuffer(img.data, np.uint8).reshape(img.height, img.width, img.nChannels)</span><br><span class="line">edges = cv2.Canny(nparr,<span class="number">100</span>,<span class="number">200</span>)</span><br><span class="line">plt.imshow(edges)</span><br></pre></td></tr></table></figure>
<p>Jupyter上でエッジ抽出されたことが確かめられただろうか。</p>
<figure>
<img src="/memo-blog/images/3LsygT3y9k3jCjbJ-EB945.png" alt="エッジ抽出された様">
<figcaption aria-hidden="true">エッジ抽出された様</figcaption>
</figure>
<p>これをSparkでUDFで実行するようにする。
（とりあえず雑にライブラリをインポート…）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_edge</span><span class="params">(data, h, w, c)</span>:</span></span><br><span class="line">    <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">    <span class="keyword">import</span> cv2</span><br><span class="line">    nparr = np.frombuffer(data, np.uint8).reshape(h, w, c)</span><br><span class="line">    edge = cv2.Canny(nparr,<span class="number">100</span>,<span class="number">200</span>)</span><br><span class="line">    <span class="keyword">return</span> edge.tobytes()</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyspark.sql.functions <span class="keyword">import</span> udf</span><br><span class="line"><span class="keyword">from</span> pyspark.sql.types <span class="keyword">import</span> BinaryType</span><br><span class="line"></span><br><span class="line">get_edge_udf = udf(get_edge, BinaryType())</span><br></pre></td></tr></table></figure>
<p>エッジ抽出されたndarrayをバイト列に変換し、Spark上ではBinaryTypeで扱うように指定した。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with_edge = deltaTable.toDF().select(<span class="string">"image.origin"</span>, <span class="string">"image.width"</span>, <span class="string">"image.height"</span>, <span class="string">"image.nChannels"</span>, get_edge_udf(<span class="string">"image.data"</span>, <span class="string">"image.height"</span>, <span class="string">"image.width"</span>, <span class="string">"image.nChannels"</span>).alias(<span class="string">"edge"</span>), <span class="string">"image.data"</span>)</span><br><span class="line"></span><br><span class="line">with_edge.show(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------------------+-----+------+---------+--------------------+--------------------+</span><br><span class="line">|              origin|width|height|nChannels|                edge|                data|</span><br><span class="line">+--------------------+-----+------+---------+--------------------+--------------------+</span><br><span class="line">|file:///home/cent...|   <span class="number">28</span>|    <span class="number">28</span>|        <span class="number">1</span>|[<span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">0.</span>..|[<span class="number">05</span> <span class="number">00</span> <span class="number">04</span> <span class="number">08</span> <span class="number">00</span> <span class="number">0.</span>..|</span><br><span class="line">|file:///home/cent...|   <span class="number">28</span>|    <span class="number">28</span>|        <span class="number">1</span>|[<span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">0.</span>..|[<span class="number">05</span> <span class="number">00</span> <span class="number">0</span>B <span class="number">00</span> <span class="number">00</span> <span class="number">0.</span>..|</span><br><span class="line">|file:///home/cent...|   <span class="number">28</span>|    <span class="number">28</span>|        <span class="number">1</span>|[<span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">0.</span>..|[<span class="number">06</span> <span class="number">00</span> <span class="number">02</span> <span class="number">00</span> <span class="number">02</span> <span class="number">0.</span>..|</span><br><span class="line">+--------------------+-----+------+---------+--------------------+--------------------+</span><br><span class="line">only showing top <span class="number">3</span> rows</span><br></pre></td></tr></table></figure>
<p>こんな感じで、OpenCVを用いた処理をDataFrameに対して実行できる。</p>
<p>なお、当然ながら処理されたデータを取り出せば、また画像として表示も可能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new_img = with_edge.where(<span class="string">"origin == 'file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_1.jpg'"</span>).select(<span class="string">"origin"</span>, <span class="string">"width"</span>, <span class="string">"height"</span>, <span class="string">"nChannels"</span>, <span class="string">"data"</span>, <span class="string">"edge"</span>).collect()[<span class="number">0</span>]</span><br><span class="line">new_nparr = np.frombuffer(new_img.edge, np.uint8).reshape(new_img.height, new_img.width)</span><br><span class="line">plt.imshow(new_nparr)</span><br></pre></td></tr></table></figure>
<h1><span id="hudi">Hudi</span></h1>
<h2><span id="画像読み込み">画像読み込み</span></h2>
<p><a href="#まずはjpgをsparkで読み込む">まずはjpgをSparkで読み込む</a>
と同様に データを読み込む。</p>
<p><a href="https://hudi.apache.org/docs/quick-start-guide.html#setup" target="_blank" rel="noopener">Hudiのquick-start-guide</a>
を参考にしながら、まずはHudiを読み込みながら、シェルを起動する。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /opt/spark/default/bin/spark-shell --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.1-incubating,org.apache.spark:spark-avro_2.11:2.4.5 \</span></span><br><span class="line">  --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'</span><br></pre></td></tr></table></figure>
<p>ライブラリをインポート。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> org.apache.spark.sql.<span class="type">SaveMode</span>._</span><br><span class="line">scala&gt; <span class="keyword">import</span> org.apache.hudi.<span class="type">DataSourceReadOptions</span>._</span><br><span class="line">scala&gt; <span class="keyword">import</span> org.apache.hudi.<span class="type">DataSourceWriteOptions</span>._</span><br><span class="line">scala&gt; <span class="keyword">import</span> org.apache.hudi.config.<span class="type">HoodieWriteConfig</span>._</span><br></pre></td></tr></table></figure>
<p>画像データを読み込み</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> tableName = <span class="string">"hudi_images"</span></span><br><span class="line">scala&gt; <span class="keyword">val</span> basePath = <span class="string">"file:///tmp/hudi_images"</span></span><br><span class="line">scala&gt; <span class="keyword">val</span> home = sys.env(<span class="string">"HOME"</span>)</span><br><span class="line">scala&gt; <span class="keyword">val</span> imageDir = <span class="string">"Downloads/mnist_jpg/trainingSet/trainingSet/*"</span></span><br><span class="line">scala&gt; <span class="keyword">val</span> df = spark.read.format(<span class="string">"image"</span>).option(<span class="string">"dropInvalid"</span>, <span class="literal">true</span>).load(home + <span class="string">"/"</span> + imageDir)</span><br></pre></td></tr></table></figure>
<p>今回は、Hudiにおけるパーティション構成を確認するため、上記のようにワイルドカード指定した。</p>
<h2><span id="書き込み">書き込み</span></h2>
<p>Hudi書き込み用にデータを変換。パーティション用キーなどを定義する。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> org.apache.spark.sql.functions.&#123;col, udf&#125;</span><br><span class="line">scala&gt; <span class="keyword">val</span> partitionPath = udf((str: <span class="type">String</span>) =&gt; &#123;</span><br><span class="line">         str.split(<span class="string">"/"</span>).takeRight(<span class="number">2</span>).head</span><br><span class="line">       &#125;)</span><br><span class="line">scala&gt; <span class="keyword">val</span> hudiDf = df.select($<span class="string">"image.origin"</span>, partitionPath($<span class="string">"image.origin"</span>) as <span class="string">"partitionpath"</span>, $<span class="string">"*"</span>)</span><br></pre></td></tr></table></figure>
<p>書き込み。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; hudiDf.write.format(<span class="string">"hudi"</span>).</span><br><span class="line">         option(<span class="type">TABLE_NAME</span>, tableName).</span><br><span class="line">         option(<span class="type">PRECOMBINE_FIELD_OPT_KEY</span>, <span class="string">"origin"</span>).</span><br><span class="line">         option(<span class="type">RECORDKEY_FIELD_OPT_KEY</span>, <span class="string">"origin"</span>).</span><br><span class="line">         option(<span class="type">PARTITIONPATH_FIELD_OPT_KEY</span>, <span class="string">"partitionpath"</span>).</span><br><span class="line">         mode(<span class="type">Overwrite</span>).</span><br><span class="line">         save(basePath)</span><br></pre></td></tr></table></figure>
<p>書き込まれたデータは以下のような感じ。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -R /tmp/hudi_images/</span></span><br><span class="line">/tmp/hudi_images/:</span><br><span class="line">0  1  2  3  4  5  6  7  8  9</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/0:</span><br><span class="line">86c74288-e541-4a25-addf-0c00e17ef6bf-0_0-29-14074_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/1:</span><br><span class="line">4912032f-3365-4852-b2ae-91ffb5ea9806-0_1-29-14075_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/2:</span><br><span class="line">0636bb93-dd32-40f1-b5c8-328130386528-0_2-29-14076_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/3:</span><br><span class="line">6f0154cd-4a9f-4001-935b-47d067416797-0_3-29-14077_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/4:</span><br><span class="line">b6f29c2c-7df0-481a-8149-2bbc93e92e2c-0_4-29-14078_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/5:</span><br><span class="line">24115172-10db-4c85-808a-bf4048e0f533-0_5-29-14079_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/6:</span><br><span class="line">64823f4b-26fb-4679-87e8-cd81d01b1181-0_6-29-14080_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/7:</span><br><span class="line">d0c097e3-9ab7-477a-b591-593c6cb7880f-0_7-29-14081_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/8:</span><br><span class="line">13a48b38-cbfb-4076-957d-9c580765bfca-0_8-29-14082_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/9:</span><br><span class="line">5d3ba9ae-8ede-410f-95f3-e8d69e8c0478-0_9-29-14083_20200517135104.parquet</span><br></pre></td></tr></table></figure>
<p>メタデータは以下のような感じ。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -1 /tmp/hudi_images/.hoodie/</span></span><br><span class="line">20200517135104.clean</span><br><span class="line">20200517135104.clean.inflight</span><br><span class="line">20200517135104.clean.requested</span><br><span class="line">20200517135104.commit</span><br><span class="line">20200517135104.commit.requested</span><br><span class="line">20200517135104.inflight</span><br><span class="line">20200517140006.clean</span><br><span class="line">20200517140006.clean.inflight</span><br><span class="line">20200517140006.clean.requested</span><br><span class="line">20200517140006.commit</span><br><span class="line">20200517140006.commit.requested</span><br><span class="line">20200517140006.inflight</span><br><span class="line">archived</span><br><span class="line">hoodie.properties</span><br></pre></td></tr></table></figure>
<h2><span id="読み込み">読み込み</span></h2>
<p>読み込んで見る。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> hudiImageDf = spark.</span><br><span class="line">         read.</span><br><span class="line">         format(<span class="string">"hudi"</span>).</span><br><span class="line">         load(basePath + <span class="string">"/*"</span>)</span><br></pre></td></tr></table></figure>
<p>スキーマは以下の通り。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; hudiImageDf.printSchema</span><br><span class="line">root</span><br><span class="line"> |-- _hoodie_commit_time: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- _hoodie_commit_seqno: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- _hoodie_record_key: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- _hoodie_partition_path: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- _hoodie_file_name: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- origin: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- partitionpath: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- image: struct (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- origin: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- height: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- width: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- nChannels: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- mode: integer (nullable = <span class="literal">true</span>)</span><br><span class="line"> |    |-- data: binary (nullable = <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<p>すべてのただの書き込みAPIを試しただけだが、想定通り書き込み・読み込みできている。</p>
<h2><span id="更新">更新</span></h2>
<p>Hudiといえば、テーブルを更新可能であることも特徴のひとつなので、試しに更新をしてみる。
元は同じデータであるが、「0」の画像データを新しいデータとしてDataFrameを定義し、更新する。
意図的に、一部のデータだけ更新する。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> updateImageDir = <span class="string">"Downloads/mnist_jpg/trainingSet/trainingSet/0"</span></span><br><span class="line">scala&gt; <span class="keyword">val</span> updateDf = spark.read.format(<span class="string">"image"</span>).option(<span class="string">"dropInvalid"</span>, <span class="literal">true</span>).load(home + <span class="string">"/"</span> + updateImageDir)</span><br><span class="line">scala&gt; <span class="keyword">val</span> updateHudiDf = updateDf.select($<span class="string">"image.origin"</span>, partitionPath($<span class="string">"image.origin"</span>) as <span class="string">"partitionpath"</span>, $<span class="string">"*"</span>)</span><br><span class="line">scala&gt; updateHudiDf.write.format(<span class="string">"hudi"</span>).</span><br><span class="line">         option(<span class="type">TABLE_NAME</span>, tableName).</span><br><span class="line">         option(<span class="type">PRECOMBINE_FIELD_OPT_KEY</span>, <span class="string">"origin"</span>).</span><br><span class="line">         option(<span class="type">RECORDKEY_FIELD_OPT_KEY</span>, <span class="string">"origin"</span>).</span><br><span class="line">         option(<span class="type">PARTITIONPATH_FIELD_OPT_KEY</span>, <span class="string">"partitionpath"</span>).</span><br><span class="line">         mode(<span class="type">Append</span>).</span><br><span class="line">         save(basePath)</span><br></pre></td></tr></table></figure>
<p>以下のように、「0」のデータが更新されていることがわかる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -R /tmp/hudi_images/</span></span><br><span class="line">/tmp/hudi_images/:</span><br><span class="line">0  1  2  3  4  5  6  7  8  9</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/0:</span><br><span class="line">86c74288-e541-4a25-addf-0c00e17ef6bf-0_0-29-14074_20200517135104.parquet</span><br><span class="line">86c74288-e541-4a25-addf-0c00e17ef6bf-0_0-60-27759_.parquet</span><br><span class="line"></span><br><span class="line">/tmp/hudi_images/1:</span><br><span class="line">4912032f-3365-4852-b2ae-91ffb5ea9806-0_1-29-14075_20200517135104.parquet</span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p>つづいて、更新されたことを確かめるため、改めて読み込みDataFrameを定義し、</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> updatedHudiImageDf = spark.</span><br><span class="line">         read.</span><br><span class="line">         format(<span class="string">"hudi"</span>).</span><br><span class="line">         load(basePath + <span class="string">"/*"</span>)</span><br></pre></td></tr></table></figure>
<p>試しに、差分がわかるように「1」と「0」のデータをそれぞれ読んで見る。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; updatedHudiImageDf.select($<span class="string">"_hoodie_commit_time"</span>, $<span class="string">"_hoodie_commit_seqno"</span>, $<span class="string">"_hoodie_partition_path"</span>).filter(<span class="string">"partitionpath == 1"</span>).show(<span class="number">3</span>)</span><br><span class="line">+-------------------+--------------------+----------------------+</span><br><span class="line">|_hoodie_commit_time|_hoodie_commit_seqno|_hoodie_partition_path|</span><br><span class="line">+-------------------+--------------------+----------------------+</span><br><span class="line">|     <span class="number">20200517135104</span>|  <span class="number">20200517135104</span>_1_1|                     <span class="number">1</span>|</span><br><span class="line">|     <span class="number">20200517135104</span>| <span class="number">20200517135104</span>_1_12|                     <span class="number">1</span>|</span><br><span class="line">|     <span class="number">20200517135104</span>| <span class="number">20200517135104</span>_1_45|                     <span class="number">1</span>|</span><br><span class="line">+-------------------+--------------------+----------------------+</span><br><span class="line">only showing top <span class="number">3</span> rows</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scala&gt; updatedHudiImageDf.select($<span class="string">"_hoodie_commit_time"</span>, $<span class="string">"_hoodie_commit_seqno"</span>, $<span class="string">"_hoodie_partition_path"</span>).filter(<span class="string">"partitionpath == 0"</span>).show(<span class="number">3</span>)</span><br><span class="line">+-------------------+--------------------+----------------------+</span><br><span class="line">|_hoodie_commit_time|_hoodie_commit_seqno|_hoodie_partition_path|</span><br><span class="line">+-------------------+--------------------+----------------------+</span><br><span class="line">|     <span class="number">20200517140006</span>|<span class="number">20200517140006</span>_0_...|                     <span class="number">0</span>|</span><br><span class="line">|     <span class="number">20200517140006</span>|<span class="number">20200517140006</span>_0_...|                     <span class="number">0</span>|</span><br><span class="line">|     <span class="number">20200517140006</span>|<span class="number">20200517140006</span>_0_...|                     <span class="number">0</span>|</span><br><span class="line">+-------------------+--------------------+----------------------+</span><br><span class="line">only showing top <span class="number">3</span> rows</span><br></pre></td></tr></table></figure>
<p>上記のように、更新されたことがわかる。最新の更新日時は、
<code>2020/05/17 14:00:06UTC</code> である。</p>
<p>ここで読み込まれたデータも、Delta
Lake同様に画像を元にしたベクトルデータとして扱える。 Pythonであれば
<code>ndarray</code> に変換して用いれば良い。</p>
<h2><span id="parquetの内容を確認する">Parquetの内容を確認する</span></h2>
<p><a href="https://github.com/apache/parquet-mr" target="_blank" rel="noopener">parquet-mr</a> の
<code>parquet-tools</code> を利用して、Parquetの内容を確認する。</p>
<p>なお、Hudi
v0.5.2におけるParquetのバージョンは以下の通り、1.10.1である。</p>
<p>pom.xml:84</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parquet.version</span>&gt;</span>1.10.1<span class="tag">&lt;/<span class="name">parquet.version</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当該バージョンに対応するタグをチェックアウトし、予めparquet-toolsをパッケージしておくこと。</p>
<h3><span id="スキーマ">スキーマ</span></h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> java -jar target/parquet-tools-1.10.1.jar schema /tmp/hudi_images/0/86c74288-e541-4a25-addf-0c00e17ef6bf-0_0-60-27759_20200517140006.parquet</span></span><br><span class="line">message hoodie.hudi_images.hudi_images_record &#123;</span><br><span class="line">  optional binary _hoodie_commit_time (UTF8);</span><br><span class="line">  optional binary _hoodie_commit_seqno (UTF8);</span><br><span class="line">  optional binary _hoodie_record_key (UTF8);</span><br><span class="line">  optional binary _hoodie_partition_path (UTF8);</span><br><span class="line">  optional binary _hoodie_file_name (UTF8);</span><br><span class="line">  optional binary origin (UTF8);</span><br><span class="line">  optional binary partitionpath (UTF8);</span><br><span class="line">  optional group image &#123;</span><br><span class="line">    optional binary origin (UTF8);</span><br><span class="line">    optional int32 height;</span><br><span class="line">    optional int32 width;</span><br><span class="line">    optional int32 nChannels;</span><br><span class="line">    optional int32 mode;</span><br><span class="line">    optional binary data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Hudiが独自に付加したカラムが追加されていることが見て取れる。</p>
<h3><span id="メタデータ">メタデータ</span></h3>
<p>つづいて、メタデータを確認する。</p>
<p>ファイル名やクリエイタなど。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file:                   file:/tmp/hudi_images/0/86c74288-e541-4a25-addf-0c00e17ef6bf-0_0-60-27759_20200517140006.parquet</span><br><span class="line">creator:                parquet-mr version 1.10.1 (build a89df8f9932b6ef6633d06069e50c9b7970bebd1)</span><br></pre></td></tr></table></figure>
<p>ブルームフィルタはここでは省略</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">extra:                  org.apache.hudi.bloomfilter = ///</span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p>レコードキーやAvroスキーマ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">extra:                  hoodie_min_record_key = file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_1.jpg</span><br><span class="line">extra:                  parquet.avro.schema = &#123;&quot;type&quot;:&quot;record&quot;,&quot;name&quot;:&quot;hudi_images_record&quot;,&quot;namespace&quot;:&quot;hoodie.hudi_images&quot;,&quot;fields&quot;:[&#123;&quot;name&quot;:&quot;_hoodie_commit_time&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;string&quot;],&quot;doc&quot;:&quot;&quot;,&quot;default&quot;:null&#125;,&#123;&quot;name&quot;:&quot;_hoodie_commit_seqno&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;string&quot;],&quot;doc&quot;:&quot;&quot;,&quot;default&quot;:null&#125;,&#123;&quot;name&quot;:&quot;_hoodie_record_key&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;string&quot;],&quot;doc&quot;:&quot;&quot;,&quot;default&quot;:null&#125;,&#123;&quot;name&quot;:&quot;_hoodie_partition_path&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;string&quot;],&quot;doc&quot;:&quot;&quot;,&quot;default&quot;:null&#125;,&#123;&quot;name&quot;:&quot;_hoodie_file_name&quot;,&quot;type&quot;:[&quot;null&quot;,&quot;string&quot;],&quot;doc&quot;:&quot;&quot;,&quot;default&quot;:null&#125;,&#123;&quot;name&quot;:&quot;origin&quot;,&quot;type&quot;:[&quot;string&quot;,&quot;null&quot;]&#125;,&#123;&quot;name&quot;:&quot;partitionpath&quot;,&quot;type&quot;:[&quot;string&quot;,&quot;null&quot;]&#125;,&#123;&quot;name&quot;:&quot;image&quot;,&quot;type&quot;:[&#123;&quot;type&quot;:&quot;record&quot;,&quot;name&quot;:&quot;image&quot;,&quot;namespace&quot;:&quot;hoodie.hudi_images.hudi_images_record&quot;,&quot;fields&quot;:[&#123;&quot;name&quot;:&quot;origin&quot;,&quot;type&quot;:[&quot;string&quot;,&quot;null&quot;]&#125;,&#123;&quot;name&quot;:&quot;height&quot;,&quot;type&quot;:[&quot;int&quot;,&quot;null&quot;]&#125;,&#123;&quot;name&quot;:&quot;width&quot;,&quot;type&quot;:[&quot;int&quot;,&quot;null&quot;]&#125;,&#123;&quot;name&quot;:&quot;nChannels&quot;,&quot;type&quot;:[&quot;int&quot;,&quot;null&quot;]&#125;,&#123;&quot;name&quot;:&quot;mode&quot;,&quot;type&quot;:[&quot;int&quot;,&quot;null&quot;]&#125;,&#123;&quot;name&quot;:&quot;data&quot;,&quot;type&quot;:[&quot;bytes&quot;,&quot;null&quot;]&#125;]&#125;,&quot;null&quot;]&#125;]&#125;</span><br><span class="line">extra:                  writer.model.name = avro</span><br><span class="line">extra:                  hoodie_max_record_key = file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_9996.jpg</span><br></pre></td></tr></table></figure>
<p>上記の通り、Hudiでは <code>parquet-avro</code>
を利用し、Avro形式でParquet内のデータを保持する。</p>
<p>スキーマ詳細</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">file schema:            hoodie.hudi_images.hudi_images_record</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">_hoodie_commit_time:    OPTIONAL BINARY O:UTF8 R:0 D:1</span><br><span class="line">_hoodie_commit_seqno:   OPTIONAL BINARY O:UTF8 R:0 D:1</span><br><span class="line">_hoodie_record_key:     OPTIONAL BINARY O:UTF8 R:0 D:1</span><br><span class="line">_hoodie_partition_path: OPTIONAL BINARY O:UTF8 R:0 D:1</span><br><span class="line">_hoodie_file_name:      OPTIONAL BINARY O:UTF8 R:0 D:1</span><br><span class="line">origin:                 OPTIONAL BINARY O:UTF8 R:0 D:1</span><br><span class="line">partitionpath:          OPTIONAL BINARY O:UTF8 R:0 D:1</span><br><span class="line">image:                  OPTIONAL F:6</span><br><span class="line">.origin:                OPTIONAL BINARY O:UTF8 R:0 D:2</span><br><span class="line">.height:                OPTIONAL INT32 R:0 D:2</span><br><span class="line">.width:                 OPTIONAL INT32 R:0 D:2</span><br><span class="line">.nChannels:             OPTIONAL INT32 R:0 D:2</span><br><span class="line">.mode:                  OPTIONAL INT32 R:0 D:2</span><br><span class="line">.data:                  OPTIONAL BINARY R:0 D:2</span><br></pre></td></tr></table></figure>
<p>Rowグループ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">row group 1:            RC:4132 TS:4397030 OFFSET:4</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">_hoodie_commit_time:     BINARY GZIP DO:0 FPO:4 SZ:165/127/0.77 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 20200517140006, max: 20200517140006, num_nulls: 0]</span><br><span class="line">_hoodie_commit_seqno:    BINARY GZIP DO:0 FPO:169 SZ:10497/107513/10.24 VC:4132 ENC:RLE,PLAIN,BIT_PACKED ST:[min: 20200517140006_0_42001, max: 20200517140006_0_46132, num_nulls: 0]</span><br><span class="line">_hoodie_record_key:      BINARY GZIP DO:0 FPO:10666 SZ:16200/342036/21.11 VC:4132 ENC:RLE,PLAIN,BIT_PACKED ST:[min: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_1.jpg, max: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_9996.jpg, num_nulls: 0]</span><br><span class="line">_hoodie_partition_path:  BINARY GZIP DO:0 FPO:26866 SZ:100/62/0.62 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 0, max: 0, num_nulls: 0]</span><br><span class="line">_hoodie_file_name:       BINARY GZIP DO:0 FPO:26966 SZ:448/419/0.94 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 86c74288-e541-4a25-addf-0c00e17ef6bf-0_0-60-27759_20200517140006.parquet, max: 86c74288-e541-4a25-addf-0c00e17ef6bf-0_0-60-27759_20200517140006.parquet, num_nulls: 0]</span><br><span class="line">origin:                  BINARY GZIP DO:0 FPO:27414 SZ:16200/342036/21.11 VC:4132 ENC:RLE,PLAIN,BIT_PACKED ST:[min: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_1.jpg, max: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_9996.jpg, num_nulls: 0]</span><br><span class="line">partitionpath:           BINARY GZIP DO:0 FPO:43614 SZ:100/62/0.62 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 0, max: 0, num_nulls: 0]</span><br><span class="line">image:</span><br><span class="line">.origin:                 BINARY GZIP DO:0 FPO:43714 SZ:16200/342036/21.11 VC:4132 ENC:RLE,PLAIN,BIT_PACKED ST:[min: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_1.jpg, max: file:///home/centos/Downloads/mnist_jpg/trainingSet/trainingSet/0/img_9996.jpg, num_nulls: 0]</span><br><span class="line">.height:                 INT32 GZIP DO:0 FPO:59914 SZ:111/73/0.66 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 28, max: 28, num_nulls: 0]</span><br><span class="line">.width:                  INT32 GZIP DO:0 FPO:60025 SZ:111/73/0.66 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 28, max: 28, num_nulls: 0]</span><br><span class="line">.nChannels:              INT32 GZIP DO:0 FPO:60136 SZ:111/73/0.66 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 1, max: 1, num_nulls: 0]</span><br><span class="line">.mode:                   INT32 GZIP DO:0 FPO:60247 SZ:111/73/0.66 VC:4132 ENC:RLE,PLAIN_DICTIONARY,BIT_PACKED ST:[min: 0, max: 0, num_nulls: 0]</span><br><span class="line">.data:                   BINARY GZIP DO:0 FPO:60358 SZ:1609341/3262447/2.03 VC:4132 ENC:RLE,PLAIN,BIT_PACKED ST:[min: 0x00</span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<!-- vim: set et tw=0 ts=2 sw=2: -->

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/05/12/Handle-pictures-in-delta-lake/" data-id="clmwcnn0d01ed1vp21riiwx7e" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <article id="post-Research-about-BigTop" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/memo-blog/2020/04/24/Research-about-BigTop/">Research about BigTop</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/memo-blog/2020/04/24/Research-about-BigTop/">
            <time datetime="2020-04-24T12:51:36.000Z" itemprop="datePublished">2020-04-24</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/">Hadoop</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/BigTop/">BigTop</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/memo-blog/tags/BigTop/">BigTop</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <div id="TOC">
	<ul>
<li><a href="#参考" id="toc-参考">参考</a></li>
<li><a href="#メモ" id="toc-メモ">メモ</a>
<ul>
<li><a href="#trunkのビルド方法" id="toc-trunkのビルド方法">Trunkのビルド方法</a></li>
<li><a href="#デプロイ周りを読み解いてみる" id="toc-デプロイ周りを読み解いてみる">デプロイ周りを読み解いてみる</a>
<ul>
<li><a href="#dockerベースのデプロイを試す" id="toc-dockerベースのデプロイを試す">Dockerベースのデプロイを試す</a></li>
<li><a href="#ambariのモジュールを確認する" id="toc-ambariのモジュールを確認する">Ambariのモジュールを確認する。</a></li>
</ul></li>
<li><a href="#ホットissue" id="toc-ホットissue">ホットIssue</a></li>
</ul></li>
</ul>
</div>
<h1><span id="参考">参考</span></h1>
<ul>
<li><a href="https://cwiki.apache.org/confluence/display/BIGTOP/Index" target="_blank" rel="noopener">公式Wikiトップページ</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/BIGTOP/How+to+build+Bigtop-trunk" target="_blank" rel="noopener">How
to build Bigtop-trunk</a></li>
<li><a href="https://github.com/dobachi/bigtop/tree/reuse_images" target="_blank" rel="noopener">reuse_images</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/BIGTOP/Deployment+and+Integration+Testing" target="_blank" rel="noopener">Deployment
and Integration Testing</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/BIGTOP/Bigtop+Provisioner+User+Guide" target="_blank" rel="noopener">Dockerベースのデプロイ方法</a></li>
<li><a href="https://github.com/apache/bigtop/blob/master/bigtop-deploy/puppet/README.md" target="_blank" rel="noopener">Puppetベースのデプロイ方法</a></li>
</ul>
<h1><span id="メモ">メモ</span></h1>
<h2><span id="trunkのビルド方法">Trunkのビルド方法</span></h2>
<p><a href="https://cwiki.apache.org/confluence/display/BIGTOP/How+to+build+Bigtop-trunk" target="_blank" rel="noopener">How
to build Bigtop-trunk</a>
を見ると、現在ではDocker上でビルドする方法が推奨されているようだ。
ただ、</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./gradlew spark-pkg-ind</span></span><br></pre></td></tr></table></figure>
<p>で実行されるとき、都度Mavenキャッシュのない状態から開始される。
これが待ち時間長いので工夫が必要。</p>
<p>なお、上記コマンドで実行されるタスクは、以下の通り。</p>
<p>packages.gradle:629</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">task</span> <span class="string">"$target-pkg-ind"</span> (</span><br><span class="line">          <span class="keyword">description</span>: <span class="string">"Invoking a native binary packaging for $target in Docker. Usage: \$ ./gradlew "</span> +</span><br><span class="line">                  <span class="string">"-POS=[centos-7|fedora-26|debian-9|ubuntu-16.04|opensuse-42.3] "</span> +</span><br><span class="line">                  <span class="string">"-Pprefix=[trunk|1.2.1|1.2.0|1.1.0|...] $target-pkg-ind "</span> +</span><br><span class="line">                  <span class="string">"-Pnexus=[true|false]"</span>,</span><br><span class="line">          <span class="keyword">group</span>: PACKAGES_GROUP) <span class="keyword">doLast</span> &#123;</span><br><span class="line">    <span class="keyword">def</span> _prefix = <span class="keyword">project</span>.hasProperty(<span class="string">"prefix"</span>) ? prefix : <span class="string">"trunk"</span></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p><code>bigtop-ci/build.sh</code>
がタスク内で実行されるスクリプトである。
この中でDockerが呼び出されてビルドが実行される。</p>
<p>これをいじれば、一応ビルド時に使ったDockerコンテナを残すことができそうではある。</p>
<p>-&gt; <a href="https://github.com/dobachi/bigtop/tree/reuse_images" target="_blank" rel="noopener">reuse_images</a>
というブランチに、コンテナンをリユースする機能をつけた。</p>
<h2><span id="デプロイ周りを読み解いてみる">デプロイ周りを読み解いてみる</span></h2>
<p><a href="https://cwiki.apache.org/confluence/display/BIGTOP/Deployment+and+Integration+Testing" target="_blank" rel="noopener">Deployment
and Integration Testing</a> を見る限り、 <a href="https://cwiki.apache.org/confluence/display/BIGTOP/Bigtop+Provisioner+User+Guide" target="_blank" rel="noopener">Dockerベースのデプロイ方法</a>
と <a href="https://github.com/apache/bigtop/blob/master/bigtop-deploy/puppet/README.md" target="_blank" rel="noopener">Puppetベースのデプロイ方法</a>
があるように見える。</p>
<h3><span id="dockerベースのデプロイを試す">Dockerベースのデプロイを試す</span></h3>
<p><a href="https://cwiki.apache.org/confluence/display/BIGTOP/Bigtop+Provisioner+User+Guide" target="_blank" rel="noopener">Dockerベースのデプロイ方法</a>
に従って、Dockerベースでデプロイしてみる。
ソースコードは20200427時点でのmasterを利用。</p>
<p>Ubuntu16でDocker、Java、Ruby環境を整え、以下を実行した。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo ./gradlew -Pconfig=config_ubuntu-16.04.yaml -Pnum_instances=1 docker-provisioner</span></span><br></pre></td></tr></table></figure>
<p>なお、20200427時点で <a href="https://cwiki.apache.org/confluence/display/BIGTOP/Bigtop+Provisioner+User+Guide" target="_blank" rel="noopener">Dockerベースのデプロイ方法</a>
ではコンフィグファイルが <code>config_ubuntu_xenial.yaml</code>
となっていたが、 BIGTOP-2814 の際に変更されたのに合わせた。</p>
<p>プロビジョニング完了後、コンテナを確認し、接続。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                              COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">7311ae86181a        bigtop/puppet:trunk-ubuntu-16.04   "/sbin/init"        4 minutes ago       Up 4 minutes                            20200426_151302_r30103_bigtop_1</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker <span class="built_in">exec</span> -it 20200426_151302_r30103_bigtop_1 bash</span></span><br></pre></td></tr></table></figure>
<p>以下のように <code>hdfs</code> コマンドを実行できることがわかる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@7311ae86181a:/# hdfs dfs -ls /</span><br><span class="line">Found 7 items</span><br><span class="line">drwxr-xr-x   - hdfs  hadoop          0 2020-04-26 15:15 /apps</span><br><span class="line">drwxrwxrwx   - hdfs  hadoop          0 2020-04-26 15:15 /benchmarks</span><br><span class="line">drwxr-xr-x   - hbase hbase           0 2020-04-26 15:15 /hbase</span><br><span class="line">drwxr-xr-x   - solr  solr            0 2020-04-26 15:15 /solr</span><br><span class="line">drwxrwxrwt   - hdfs  hadoop          0 2020-04-26 15:15 /tmp</span><br><span class="line">drwxr-xr-x   - hdfs  hadoop          0 2020-04-26 15:15 /user</span><br><span class="line">drwxr-xr-x   - hdfs  hadoop          0 2020-04-26 15:15 /var</span><br></pre></td></tr></table></figure>
<p>なお、 <code>-Pnum_instances=1</code>
の値を3に変更すると、コンテナが3個立ち上がる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo ./gradlew -Pconfig=config_ubuntu-16.04.yaml -Pnum_instances=3 docker-provisioner</span></span><br></pre></td></tr></table></figure>
<p>試しに、<code>dfsadmin</code> を実行してみる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">root@53211353deec:/# sudo -u hdfs hdfs dfsadmin -report</span><br><span class="line">Configured Capacity: 374316318720 (348.61 GB)</span><br><span class="line">Present Capacity: 345302486224 (321.59 GB)</span><br><span class="line">DFS Remaining: 345300606976 (321.59 GB)</span><br><span class="line">DFS Used: 1879248 (1.79 MB)</span><br><span class="line">DFS Used%: 0.00%</span><br><span class="line">Under replicated blocks: 0</span><br><span class="line">Blocks with corrupt replicas: 0</span><br><span class="line">Missing blocks: 0</span><br><span class="line">Missing blocks (with replication factor 1): 0</span><br><span class="line">Pending deletion blocks: 0</span><br><span class="line"></span><br><span class="line">-------------------------------------------------</span><br><span class="line">Live datanodes (3):</span><br><span class="line"></span><br><span class="line">Name: 172.17.0.2:50010 (53211353deec.bigtop.apache.org)</span><br><span class="line">Hostname: 53211353deec.bigtop.apache.org</span><br><span class="line">Decommission Status : Normal</span><br><span class="line">Configured Capacity: 124772106240 (116.20 GB)</span><br><span class="line">DFS Used: 626416 (611.73 KB)</span><br><span class="line">Non DFS Used: 9637679376 (8.98 GB)</span><br><span class="line">DFS Remaining: 115100246016 (107.20 GB)</span><br><span class="line">DFS Used%: 0.00%</span><br><span class="line">DFS Remaining%: 92.25%</span><br><span class="line">Configured Cache Capacity: 0 (0 B)</span><br><span class="line">Cache Used: 0 (0 B)</span><br><span class="line">Cache Remaining: 0 (0 B)</span><br><span class="line">Cache Used%: 100.00%</span><br><span class="line">Cache Remaining%: 0.00%</span><br><span class="line">Xceivers: 1</span><br><span class="line">Last contact: Sun Apr 26 15:33:12 UTC 2020</span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p>また、 <code>--stack</code>
オプションを利用し、デプロイするコンポーネントを指定できる。
ここではHadoopに加え、Sparkをプロビジョニングしてみる。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo ./gradlew -Pconfig=config_ubuntu-16.04.yaml -Pstack=hdfs,yarn,spark -Pnum_instances=1 docker-provisioner</span></span><br></pre></td></tr></table></figure>
<p>コンテナに接続し、Sparkを動かす。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                              COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">56e1ff5670be        bigtop/puppet:trunk-ubuntu-16.04   "/sbin/init"        3 minutes ago       Up 3 minutes                            20200426_155010_r21667_bigtop_1</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker <span class="built_in">exec</span> -it 20200426_155010_r21667_bigtop_1 bash</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@56e1ff5670be:/# spark-shell</span><br><span class="line"><span class="meta">scala&gt;</span><span class="bash"> spark.sparkContext.master</span></span><br><span class="line">res1: String = yarn</span><br></pre></td></tr></table></figure>
<p>上記のように、マスタ=YARNで起動していることがわかる。 参考までに、
<code>spark-env.sh</code> は以下の通り。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@56e1ff5670be:/# cat /etc/spark/conf/spark-env.sh</span><br><span class="line">export SPARK_HOME=$&#123;SPARK_HOME:-/usr/lib/spark&#125;</span><br><span class="line">export SPARK_LOG_DIR=$&#123;SPARK_LOG_DIR:-/var/log/spark&#125;</span><br><span class="line">export SPARK_DAEMON_JAVA_OPTS="-Dspark.deploy.recoveryMode=NONE"</span><br><span class="line">export HADOOP_HOME=$&#123;HADOOP_HOME:-/usr/lib/hadoop&#125;</span><br><span class="line">export HADOOP_CONF_DIR=$&#123;HADOOP_CONF_DIR:-/etc/hadoop/conf&#125;</span><br><span class="line">export HIVE_CONF_DIR=$&#123;HIVE_CONF_DIR:-/etc/hive/conf&#125;</span><br><span class="line"></span><br><span class="line">export STANDALONE_SPARK_MASTER_HOST=56e1ff5670be.bigtop.apache.org</span><br><span class="line">export SPARK_MASTER_PORT=7077</span><br><span class="line">export SPARK_MASTER_IP=$STANDALONE_SPARK_MASTER_HOST</span><br><span class="line">export SPARK_MASTER_URL=yarn</span><br><span class="line">export SPARK_MASTER_WEBUI_PORT=8080</span><br><span class="line"></span><br><span class="line">export SPARK_WORKER_DIR=$&#123;SPARK_WORKER_DIR:-/var/run/spark/work&#125;</span><br><span class="line">export SPARK_WORKER_PORT=7078</span><br><span class="line">export SPARK_WORKER_WEBUI_PORT=8081</span><br><span class="line"></span><br><span class="line">export SPARK_DIST_CLASSPATH=$(hadoop classpath)</span><br></pre></td></tr></table></figure>
<p>なお、構築したクラスタを破棄する際には以下の通り。（公式ドキュメントの通り）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo ./gradlew docker-provisioner-destroy</span></span><br></pre></td></tr></table></figure>
<h4><span id="仕様確認">仕様確認</span></h4>
<p>上記のプロビジョナのタスクは、 <code>build.gradle</code>
内にある。</p>
<p>build.gradle:263</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task &quot;docker-provisioner&quot;(type:Exec,</span><br><span class="line"></span><br><span class="line">(snip)</span><br></pre></td></tr></table></figure>
<p>上記の中で、 <code>./docker-hadoop.sh</code> が用いられている。</p>
<p>build.gradle:296</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> command = [</span><br><span class="line">    <span class="string">'./docker-hadoop.sh'</span>,</span><br><span class="line">    <span class="string">'-C'</span>, _config,</span><br><span class="line">    <span class="string">'--create'</span>, _num_instances,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><code>--create</code> オプションが用いられているので、
<code>create</code> 関数が呼ばれる。</p>
<p>provisioner/docker/docker-hadoop.sh:387</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ "$READY_TO_LAUNCH" = true ]; then</span><br><span class="line">    create $NUM_INSTANCES</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p><code>create</code> 内では、以下のように <code>docker-compose</code>
が用いられている。</p>
<p>provisioner/docker/docker-hadoop.sh:78</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -p $PROVISION_ID up -d --scale bigtop=$1 --no-recreate</span><br></pre></td></tr></table></figure>
<p>また、コンポーネントの内容に応じて、Puppetマニフェスト（正確には、hieraファイル）が生成されるようになっている。</p>
<p>provisioner/docker/docker-hadoop.sh:101</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">generate-config "$hadoop_head_node" "$repo" "$components"</span><br></pre></td></tr></table></figure>
<p>また、最終的には、 <code>provision</code> 関数、さらに
<code>bigtop-puppet</code>
関数を通じ、各コンテナ内でpuppetが実行されるようになっている。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bigtop-puppet() &#123;</span><br><span class="line">    <span class="keyword">if</span> docker exec $<span class="number">1</span> bash -c <span class="string">"puppet --version"</span> | <span class="keyword">grep</span> ^<span class="number">3</span> &gt;<span class="regexp">/dev/</span><span class="keyword">null</span> ; then</span><br><span class="line">      future=<span class="string">"--parser future"</span></span><br><span class="line">    fi</span><br><span class="line">    docker exec $<span class="number">1</span> bash -c <span class="string">"puppet apply --detailed-exitcodes $future --modulepath=/bigtop-home/bigtop-deploy/puppet/modules:/etc/puppet/modules:/usr/share/puppet/modules /bigtop-home/bigtop-deploy/puppet/manifests"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="ambariのモジュールを確認する">Ambariのモジュールを確認する。</span></h3>
<p><code>bigtop-deploy/puppet/modules/ambari/manifests/init.pp</code>
にAmbariデプロイ用のモジュールがある。</p>
<p>内容は短い。</p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">ambari</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">class</span> <span class="title">deploy</span> ($<span class="title">roles</span>) &#123;</span><br><span class="line">    if (<span class="string">"ambari-server"</span> in <span class="variable">$roles</span>) &#123;</span><br><span class="line">      include ambari::server</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (<span class="string">"ambari-agent"</span> in <span class="variable">$roles</span>) &#123;</span><br><span class="line">      include ambari::agent</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">class</span> <span class="title">server</span> &#123;</span><br><span class="line">    <span class="keyword">package</span> &#123; <span class="string">"ambari-server"</span>:</span><br><span class="line">      <span class="attr">ensure</span> =&gt; latest,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">exec</span> &#123;</span><br><span class="line">        <span class="string">"mpack install"</span>:</span><br><span class="line">           <span class="attr">command</span> =&gt; <span class="string">"/bin/bash -c 'echo yes | /usr/sbin/ambari-server install-mpack --purge --verbose --mpack=/var/lib/ambari-server/resources/odpi-ambari-mpack-1.0.0.0-SNAPSHOT.tar.gz'"</span>,</span><br><span class="line">           <span class="attr">require</span> =&gt; [ Package[<span class="string">"ambari-server"</span>] ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">exec</span> &#123;</span><br><span class="line">        <span class="string">"server setup"</span>:</span><br><span class="line">           <span class="attr">command</span> =&gt; <span class="string">"/usr/sbin/ambari-server setup -j $(readlink -f /usr/bin/java | sed 's@jre/bin/java@@') -s"</span>,</span><br><span class="line">           <span class="attr">require</span> =&gt; [ Package[<span class="string">"ambari-server"</span>], Package[<span class="string">"jdk"</span>], Exec[<span class="string">"mpack install"</span>] ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">service</span> &#123; <span class="string">"ambari-server"</span>:</span><br><span class="line">        <span class="attr">ensure</span> =&gt; <span class="literal">running</span>,</span><br><span class="line">        <span class="attr">require</span> =&gt; [ Package[<span class="string">"ambari-server"</span>], Exec[<span class="string">"server setup"</span>] ],</span><br><span class="line">        <span class="attr">hasrestart</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="attr">hasstatus</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  class agent($server_host = "localhost") &#123;</span><br><span class="line">    <span class="keyword">package</span> &#123; <span class="string">"ambari-agent"</span>:</span><br><span class="line">      <span class="attr">ensure</span> =&gt; latest,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">file</span> &#123;</span><br><span class="line">      <span class="string">"/etc/ambari-agent/conf/ambari-agent.ini"</span>:</span><br><span class="line">        <span class="attr">content</span> =&gt; template(<span class="string">'ambari/ambari-agent.ini'</span>),</span><br><span class="line">        <span class="attr">require</span> =&gt; [Package[<span class="string">"ambari-agent"</span>]],</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">service</span> &#123; <span class="string">"ambari-agent"</span>:</span><br><span class="line">        <span class="attr">ensure</span> =&gt; <span class="literal">running</span>,</span><br><span class="line">        <span class="attr">require</span> =&gt; [ Package[<span class="string">"ambari-agent"</span>], File[<span class="string">"/etc/ambari-agent/conf/ambari-agent.ini"</span>] ],</span><br><span class="line">        <span class="attr">hasrestart</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="attr">hasstatus</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>なお、上記の通り、サーバとエージェントそれぞれのマニフェストが存在する。
ODPiのMpackをインストールしているのが特徴。</p>
<p>逆にいうと、それをインストールしないと使えるVersionが存在しない。（ベンダ製のVDFを読み込めば使えるが）
また、ODPiのMpackをインストールした上でクラスタを構成しようとしたところ、
ODPiのレポジトリが見当たらなかった。
プライベートレポジトリを立てる必要があるのだろうか。</p>
<p>いったん、公式のAmbariをインストールした上で動作確認することにする。</p>
<h2><span id="ホットissue">ホットIssue</span></h2>
<p><a href="https://issues.apache.org/jira/browse/BIGTOP-3123" target="_blank" rel="noopener">BIGTOP-3123</a>
が1.5リリース向けのIssue</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://dobachi.github.io/memo-blog/2020/04/24/Research-about-BigTop/" data-id="clmwcnmxn017h1vp2devzgvos" class="article-share-link"><i class="fas fa-share"></i>共有</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/memo-blog/page/4/">&laquo; 前</a><a class="page-number" href="/memo-blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/memo-blog/page/3/">3</a><a class="page-number" href="/memo-blog/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/memo-blog/page/6/">6</a><a class="page-number" href="/memo-blog/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/memo-blog/page/21/">21</a><a class="extend next" rel="next" href="/memo-blog/page/6/">次 &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最近の記事</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/">Data Spaces</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/09/20/Dataspace-Protocol-of-EDC/" class="title">Dataspace Protocol of EDC</a></p>
                            <p class="item-date"><time datetime="2023-09-20T14:07:49.000Z" itemprop="datePublished">2023-09-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/">Data Spaces</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/09/09/Generate-OpenAPI-Spec-of-EDC-Connector/" class="title">Generate OpenAPI Spec of EDC Connector</a></p>
                            <p class="item-date"><time datetime="2023-09-09T13:26:58.000Z" itemprop="datePublished">2023-09-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Open-API/">Open API</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/09/07/OpenAPI-Generator-for-Flask/" class="title">OpenAPI Generator for Flask</a></p>
                            <p class="item-date"><time datetime="2023-09-07T13:10:58.000Z" itemprop="datePublished">2023-09-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/">Data Spaces</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/08/31/IDS-Dataspace-Protocol/" class="title">IDS Dataspace Protocol</a></p>
                            <p class="item-date"><time datetime="2023-08-31T06:56:27.000Z" itemprop="datePublished">2023-08-31</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><i class="fas fa-angle-right"></i><a class="article-category-link" href="/memo-blog/categories/Knowledge-Management/SDK/">SDK</a></p>
                            <p class="item-title"><a href="/memo-blog/2023/08/27/How-to-create-SDK/" class="title">How to create SDK (WIP)</a></p>
                            <p class="item-date"><time datetime="2023-08-27T05:11:45.000Z" itemprop="datePublished">2023-08-27</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">カテゴリ</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/">Clipping</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/AI/">AI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Camera/">Camera</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Camera/Lighting/">Lighting</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Cloud/">Cloud</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Database/">Database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Kafka/">Kafka</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/List/">List</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/List/Research/">Research</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Management/">Management</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/PostgreSQL/">PostgreSQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Stream-Processing/">Stream Processing</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Uber/">Uber</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Vim/">Vim</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Clipping/Windows-Tools/">Windows Tools</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/">Home server</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/File-server/">File server</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Hardware/">Hardware</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Nature-Remo/">Nature Remo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Network/">Network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Remote-desktop/">Remote desktop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/">Ubuntu</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/Adobe-Reader/">Adobe Reader</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/Gnome/">Gnome</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/KVM/">KVM</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/OneDrive/">OneDrive</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Ubuntu/vim/">vim</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Home-server/Video-processing/">Video processing</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/">Knowledge Management</a><span class="category-list-count">159</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Alluxio/">Alluxio</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/BaaS/">BaaS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Configuration-Management/">Configuration Management</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Configuration-Management/Ansible/">Ansible</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Catalog/">Data Catalog</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Catalog/CKAN/">CKAN</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/">Data Collaboration</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/Delta-Sharing/">Delta Sharing</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Collaboration/X-Road/">X-Road</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Engineering/">Data Engineering</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Engineering/Data-Lineage/">Data Lineage</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Engineering/Data-Transformation/">Data Transformation</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Mesh/">Data Mesh</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Processing-Engine/">Data Processing Engine</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/">Data Spaces</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/EDC/">EDC</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Data-Spaces/IDS/">IDS</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Documentation/">Documentation</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Flask/">Flask</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/GPD-Pocket/">GPD Pocket</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/GPD-Pocket/Device/">Device</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/GPD-Pocket/Device/Bluetooth/">Bluetooth</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/HBase/">HBase</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/">Hadoop</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/Ambari/">Ambari</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/BigTop/">BigTop</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hadoop/HDP/">HDP</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hexo/">Hexo</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Home-Network/">Home Network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hyper/">Hyper</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hyper/Plugin/">Plugin</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Hyper-V/">Hyper-V</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/">Keyboard</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/Corne-Chocolate/">Corne Chocolate</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Keyboard/QMK/">QMK</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Kubernetes/">Kubernetes</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/">Machine Learning</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Analytics-Zoo/">Analytics Zoo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/AutoML/">AutoML</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Data-Platform/">Data Platform</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Flow-Engine/">Flow Engine</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Kaggle/">Kaggle</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/MLflow/">MLflow</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/">Model</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/Cross-Validation/">Cross Validation</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/Data-Leakage/">Data Leakage</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/Partial-Dependency-Plot/">Partial Dependency Plot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model/XGBoost/">XGBoost</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model-Management/">Model Management</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Model-Management/Clipper/">Clipper</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/OpML/">OpML</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Preparation/">Preparation</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Software-Engineering-Patterns/">Software Engineering Patterns</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Stream-Processing/">Stream Processing</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Visualization/">Visualization</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Visualization/Seaborn/">Seaborn</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Machine-Learning/Word2Vec/">Word2Vec</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Messaging-System/">Messaging System</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Messaging-System/Kafka/">Kafka</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Metadata-Management/">Metadata Management</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Monitering/">Monitering</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-API/">Open API</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-Data/">Open Data</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-Data/Scraping/">Scraping</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Open-Data/Tellus/">Tellus</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Pinot/">Pinot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Power-Grid-Data/">Power Grid Data</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/">Python</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/Jupyter/">Jupyter</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/Pipenv/">Pipenv</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Python/pyenv/">pyenv</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/SDK/">SDK</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/SQLAlchemy/">SQLAlchemy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Scala/">Scala</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Scala/SBT/">SBT</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Spark/">Spark</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Spark/Spark-Summit/">Spark Summit</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/">Storage Layer</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Delta-Lake/">Delta Lake</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Hudi/">Hudi</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Storage-Layer/Minio/">Minio</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/">Stream Processing</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/Apache-Edgent/">Apache Edgent</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/Kappa-Architecture/">Kappa Architecture</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/MillWheel/">MillWheel</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Stream-Processing/Twitter-Heron/">Twitter Heron</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/">Tools</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/Git/">Git</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/Intellij/">Intellij</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/Selenium/">Selenium</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Tools/tmux/">tmux</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/">WSL</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/CentOS/">CentOS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/Docker/">Docker</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/Terminal-tool/">Terminal tool</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/Vagrant/">Vagrant</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/WSL/X-Window/">X Window</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/">Windows</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/Ansible/">Ansible</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/Docker/">Docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Windows/Hyper-V/">Hyper-V</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/Zeppelin/">Zeppelin</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/ZooKeeper/">ZooKeeper</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Knowledge-Management/vim/">vim</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/">Research</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/AWS/">AWS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Conference/">Conference</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Conference/DevSumi/">DevSumi</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Data-Analytics/">Data Analytics</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Data-Analytics/Tools/">Tools</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Machine-Learning/">Machine Learning</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Machine-Learning/BigDL/">BigDL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Machine-Learning/TensorFlow/">TensorFlow</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/NVM/">NVM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/SX-Aurora-Frovedis/">SX-Aurora/Frovedis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Trends/">Trends</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Video-processing/">Video processing</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Video-processing/BlazeIt/">BlazeIt</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Visualization/">Visualization</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/memo-blog/categories/Research/Visualization/Superset/">Superset</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">アーカイブ</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2023/09/">9月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2023/08/">8月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2022/05/">5月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2022/02/">2月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2022/01/">1月 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/10/">10月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/09/">9月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/08/">8月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/07/">7月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/06/">6月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/05/">5月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/04/">4月 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/02/">2月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2021/01/">1月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/12/">12月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/11/">11月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/10/">10月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/09/">9月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/08/">8月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/07/">7月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/06/">6月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/05/">5月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/04/">4月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/03/">3月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/02/">2月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2020/01/">1月 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/12/">12月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/11/">11月 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/10/">10月 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/09/">9月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/08/">8月 2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/07/">7月 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/06/">6月 2019</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/05/">5月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/04/">4月 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/03/">3月 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/02/">2月 2019</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2019/01/">1月 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/12/">12月 2018</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/11/">11月 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/10/">10月 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/memo-blog/archives/2018/09/">9月 2018</a><span class="archive-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">タグ</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/AI/">AI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/AWS/">AWS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Academia/">Academia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Adobe-Reader/">Adobe Reader</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Alluxio/">Alluxio</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Ambari/">Ambari</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Analytics-Zoo/">Analytics Zoo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Ansible/">Ansible</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Edgent/">Apache Edgent</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Hudi/">Apache Hudi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Kafka/">Apache Kafka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apache-Spark/">Apache Spark</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Apple/">Apple</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/AutoML/">AutoML</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Automagica/">Automagica</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Autonomous-Database/">Autonomous Database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BaaS/">BaaS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Behavioral-Economics/">Behavioral Economics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Big-Data/">Big Data</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BigDL/">BigDL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BigTop/">BigTop</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/BlazeIt/">BlazeIt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Blog/">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Bluetooth/">Bluetooth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CDC/">CDC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Camera/">Camera</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CentOS/">CentOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CentOS7/">CentOS7</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/CircleCI/">CircleCI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Clipper/">Clipper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Clipping/">Clipping</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Cloud/">Cloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Comcast/">Comcast</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Computing-resource/">Computing resource</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Conference/">Conference</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Configuration-Management/">Configuration Management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Corne-Chocolate/">Corne Chocolate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Cross-Validation/">Cross Validation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/DB/">DB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Dask/">Dask</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Analysis/">Data Analysis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Analytics/">Data Analytics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Lake/">Data Lake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Leakage/">Data Leakage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Lineage/">Data Lineage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Mesh/">Data Mesh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Platform/">Data Platform</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Processing-Engine/">Data Processing Engine</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Spaces/">Data Spaces</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Data-Transformation/">Data Transformation</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Dataspace-Protocol/">Dataspace Protocol</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Delta-Lake/">Delta Lake</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Delta-Sharing/">Delta Sharing</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/DevSumi/">DevSumi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Docker/">Docker</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Dockerfile/">Dockerfile</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Druid/">Druid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/EDC/">EDC</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Flask/">Flask</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Flow-Engine/">Flow Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Frovedis/">Frovedis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GIS/">GIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GNOME/">GNOME</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GPD-Pocket/">GPD Pocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Git/">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/GitHub-Actions/">GitHub Actions</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Google/">Google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Goverment/">Goverment</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Graceful-Shutdown/">Graceful Shutdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Gradle/">Gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/HBase/">HBase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/HDP/">HDP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/HPC/">HPC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hadoop/">Hadoop</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hexo/">Hexo</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hexo-Plugin/">Hexo Plugin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hyper/">Hyper</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Hyper-V/">Hyper-V</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/IDS/">IDS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/IEEE/">IEEE</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/IPv6/">IPv6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Icarus/">Icarus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Incident/">Incident</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Intel/">Intel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Intellij/">Intellij</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/JSON/">JSON</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Jupyter/">Jupyter</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/KVM/">KVM</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafak-Connect/">Kafak Connect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka/">Kafka</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka-Connect/">Kafka Connect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka-Streams/">Kafka Streams</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kafka-Summit/">Kafka Summit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kaggle/">Kaggle</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kappa-Architecture/">Kappa Architecture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Keyboard/">Keyboard</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kinesis/">Kinesis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Kubernetes/">Kubernetes</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Lambda-Architecture/">Lambda Architecture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Lighthing/">Lighthing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/LinkedIn/">LinkedIn</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/MATE-Desktop/">MATE Desktop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/ML-Model-Management/">ML Model Management</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/ML-Ops/">ML Ops</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/MLflow/">MLflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Machine-Learning/">Machine Learning</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Machine-Learning-Lifecycle/">Machine Learning Lifecycle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Machine-Learning-Lifecycle/">Machine Learning Lifecycle/</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Management/">Management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Map/">Map</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Markdown/">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Messaging-System/">Messaging System</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Metadata-Management/">Metadata Management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/MillWheel/">MillWheel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Minikube/">Minikube</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Minio/">Minio</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Model/">Model</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Model-Management/">Model Management</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Monitering/">Monitering</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Mouse/">Mouse</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/NERDTree/">NERDTree</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/NVM/">NVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Nature-Remo/">Nature Remo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Network/">Network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OLAP/">OLAP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OneDrive/">OneDrive</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OpML/">OpML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Open-API/">Open API</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Open-Data/">Open Data</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Open-Messaging-Benchmark/">Open Messaging Benchmark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OpenAPI/">OpenAPI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/OpenML/">OpenML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Oracle/">Oracle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PAPIDS/">PAPIDS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PDF/">PDF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pandoc/">Pandoc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Paper/">Paper</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Parquet/">Parquet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Partial-Dependency-Plot/">Partial Dependency Plot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pinot/">Pinot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pipenv/">Pipenv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PostgreSQL/">PostgreSQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Power-Grid-Data/">Power Grid Data</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PowerShell/">PowerShell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Preparation/">Preparation</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Profiler/">Profiler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Pulsar/">Pulsar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/PySpark/">PySpark</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Python/">Python</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Python3/">Python3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/QMK/">QMK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Query-Engine/">Query Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/RDBMS/">RDBMS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/RPA/">RPA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Redshift/">Redshift</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Research-later/">Research later</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/S3/">S3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SBT/">SBT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SDK/">SDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SQLAlchemy/">SQLAlchemy</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SQLite/">SQLite</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/SX-Aurora/">SX-Aurora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Samba/">Samba</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Scala/">Scala</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Scraping/">Scraping</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Seaborn/">Seaborn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Security/">Security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Session/">Session</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Slenium/">Slenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Smart-Home/">Smart Home</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Snowflake/">Snowflake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Software-Engineering-Patterns/">Software Engineering Patterns</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Spark/">Spark</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Spark-Summit/">Spark Summit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Sphinx/">Sphinx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Statistic/">Statistic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Stonebraker/">Stonebraker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage/">Storage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage-Engine/">Storage Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage-Layer/">Storage Layer</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Storage-Layer-Software/">Storage Layer Software</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Stream-Processing/">Stream Processing</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Superset/">Superset</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Supervision/">Supervision</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Tellus/">Tellus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/TensorFlow/">TensorFlow</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/TensorFlowOnSpark/">TensorFlowOnSpark</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Tools/">Tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Trends/">Trends</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Troubleshoot/">Troubleshoot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Twitter/">Twitter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Twitter-Heron/">Twitter Heron</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Uber/">Uber</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/VMWare/">VMWare</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vagrant/">Vagrant</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vault/">Vault</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vector-Engine/">Vector Engine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Video-Processing/">Video Processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Vim/">Vim</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Visualization/">Visualization</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WSL/">WSL</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Web/">Web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WhereHows/">WhereHows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WiFi/">WiFi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/WiFi6/">WiFi6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Windows/">Windows</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Windows-Tools/">Windows Tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Word/">Word</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Word2Vec/">Word2Vec</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/X-Window/">X Window</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/X-Road/">X-Road</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/XGBoost/">XGBoost</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/Zeppelin/">Zeppelin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/ZooKeeper/">ZooKeeper</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/bug/">bug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/dein/">dein</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/dstat/">dstat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/fsync/">fsync</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/keyboard/">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/libvirt/">libvirt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/nltk/">nltk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/pandoc/">pandoc</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/pyenv/">pyenv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/tmux/">tmux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/vim/">vim</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/memo-blog/tags/windows/">windows</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">タグクラウド</h3>
        <div class="widget tagcloud">
            <a href="/memo-blog/tags/AI/" style="font-size: 10px;">AI</a> <a href="/memo-blog/tags/AWS/" style="font-size: 10px;">AWS</a> <a href="/memo-blog/tags/Academia/" style="font-size: 10px;">Academia</a> <a href="/memo-blog/tags/Adobe-Reader/" style="font-size: 10px;">Adobe Reader</a> <a href="/memo-blog/tags/Alluxio/" style="font-size: 10.77px;">Alluxio</a> <a href="/memo-blog/tags/Ambari/" style="font-size: 10px;">Ambari</a> <a href="/memo-blog/tags/Analytics-Zoo/" style="font-size: 10px;">Analytics Zoo</a> <a href="/memo-blog/tags/Ansible/" style="font-size: 11.54px;">Ansible</a> <a href="/memo-blog/tags/Apache-Edgent/" style="font-size: 10px;">Apache Edgent</a> <a href="/memo-blog/tags/Apache-Hudi/" style="font-size: 10px;">Apache Hudi</a> <a href="/memo-blog/tags/Apache-Kafka/" style="font-size: 10px;">Apache Kafka</a> <a href="/memo-blog/tags/Apache-Spark/" style="font-size: 11.54px;">Apache Spark</a> <a href="/memo-blog/tags/Apple/" style="font-size: 10px;">Apple</a> <a href="/memo-blog/tags/AutoML/" style="font-size: 10.77px;">AutoML</a> <a href="/memo-blog/tags/Automagica/" style="font-size: 10px;">Automagica</a> <a href="/memo-blog/tags/Autonomous-Database/" style="font-size: 10px;">Autonomous Database</a> <a href="/memo-blog/tags/BaaS/" style="font-size: 10px;">BaaS</a> <a href="/memo-blog/tags/Behavioral-Economics/" style="font-size: 10px;">Behavioral Economics</a> <a href="/memo-blog/tags/Big-Data/" style="font-size: 10px;">Big Data</a> <a href="/memo-blog/tags/BigDL/" style="font-size: 10.77px;">BigDL</a> <a href="/memo-blog/tags/BigTop/" style="font-size: 10.77px;">BigTop</a> <a href="/memo-blog/tags/BlazeIt/" style="font-size: 10px;">BlazeIt</a> <a href="/memo-blog/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/memo-blog/tags/Bluetooth/" style="font-size: 10px;">Bluetooth</a> <a href="/memo-blog/tags/CDC/" style="font-size: 10px;">CDC</a> <a href="/memo-blog/tags/Camera/" style="font-size: 10px;">Camera</a> <a href="/memo-blog/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/memo-blog/tags/CentOS7/" style="font-size: 11.54px;">CentOS7</a> <a href="/memo-blog/tags/CircleCI/" style="font-size: 10px;">CircleCI</a> <a href="/memo-blog/tags/Clipper/" style="font-size: 10px;">Clipper</a> <a href="/memo-blog/tags/Clipping/" style="font-size: 10px;">Clipping</a> <a href="/memo-blog/tags/Cloud/" style="font-size: 10px;">Cloud</a> <a href="/memo-blog/tags/Comcast/" style="font-size: 10px;">Comcast</a> <a href="/memo-blog/tags/Computing-resource/" style="font-size: 10px;">Computing resource</a> <a href="/memo-blog/tags/Conference/" style="font-size: 10px;">Conference</a> <a href="/memo-blog/tags/Configuration-Management/" style="font-size: 10px;">Configuration Management</a> <a href="/memo-blog/tags/Corne-Chocolate/" style="font-size: 10px;">Corne Chocolate</a> <a href="/memo-blog/tags/Cross-Validation/" style="font-size: 10px;">Cross Validation</a> <a href="/memo-blog/tags/DB/" style="font-size: 10px;">DB</a> <a href="/memo-blog/tags/Dask/" style="font-size: 10.77px;">Dask</a> <a href="/memo-blog/tags/Data-Analysis/" style="font-size: 10.77px;">Data Analysis</a> <a href="/memo-blog/tags/Data-Analytics/" style="font-size: 10px;">Data Analytics</a> <a href="/memo-blog/tags/Data-Lake/" style="font-size: 10px;">Data Lake</a> <a href="/memo-blog/tags/Data-Leakage/" style="font-size: 10px;">Data Leakage</a> <a href="/memo-blog/tags/Data-Lineage/" style="font-size: 10px;">Data Lineage</a> <a href="/memo-blog/tags/Data-Mesh/" style="font-size: 10px;">Data Mesh</a> <a href="/memo-blog/tags/Data-Platform/" style="font-size: 10px;">Data Platform</a> <a href="/memo-blog/tags/Data-Processing-Engine/" style="font-size: 10.77px;">Data Processing Engine</a> <a href="/memo-blog/tags/Data-Spaces/" style="font-size: 12.31px;">Data Spaces</a> <a href="/memo-blog/tags/Data-Transformation/" style="font-size: 10.77px;">Data Transformation</a> <a href="/memo-blog/tags/Dataspace-Protocol/" style="font-size: 10px;">Dataspace Protocol</a> <a href="/memo-blog/tags/Delta-Lake/" style="font-size: 16.92px;">Delta Lake</a> <a href="/memo-blog/tags/Delta-Sharing/" style="font-size: 12.31px;">Delta Sharing</a> <a href="/memo-blog/tags/DevSumi/" style="font-size: 10px;">DevSumi</a> <a href="/memo-blog/tags/Docker/" style="font-size: 14.62px;">Docker</a> <a href="/memo-blog/tags/Dockerfile/" style="font-size: 10.77px;">Dockerfile</a> <a href="/memo-blog/tags/Druid/" style="font-size: 10px;">Druid</a> <a href="/memo-blog/tags/EDC/" style="font-size: 11.54px;">EDC</a> <a href="/memo-blog/tags/Flask/" style="font-size: 12.31px;">Flask</a> <a href="/memo-blog/tags/Flow-Engine/" style="font-size: 10px;">Flow Engine</a> <a href="/memo-blog/tags/Frovedis/" style="font-size: 10px;">Frovedis</a> <a href="/memo-blog/tags/GIS/" style="font-size: 10px;">GIS</a> <a href="/memo-blog/tags/GNOME/" style="font-size: 10px;">GNOME</a> <a href="/memo-blog/tags/GPD-Pocket/" style="font-size: 10px;">GPD Pocket</a> <a href="/memo-blog/tags/Git/" style="font-size: 10.77px;">Git</a> <a href="/memo-blog/tags/GitHub-Actions/" style="font-size: 10px;">GitHub Actions</a> <a href="/memo-blog/tags/Google/" style="font-size: 10px;">Google</a> <a href="/memo-blog/tags/Goverment/" style="font-size: 10px;">Goverment</a> <a href="/memo-blog/tags/Graceful-Shutdown/" style="font-size: 10px;">Graceful Shutdown</a> <a href="/memo-blog/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/memo-blog/tags/HBase/" style="font-size: 10px;">HBase</a> <a href="/memo-blog/tags/HDP/" style="font-size: 10px;">HDP</a> <a href="/memo-blog/tags/HPC/" style="font-size: 10px;">HPC</a> <a href="/memo-blog/tags/Hadoop/" style="font-size: 11.54px;">Hadoop</a> <a href="/memo-blog/tags/Hexo/" style="font-size: 16.15px;">Hexo</a> <a href="/memo-blog/tags/Hexo-Plugin/" style="font-size: 10px;">Hexo Plugin</a> <a href="/memo-blog/tags/Hyper/" style="font-size: 10.77px;">Hyper</a> <a href="/memo-blog/tags/Hyper-V/" style="font-size: 10.77px;">Hyper-V</a> <a href="/memo-blog/tags/IDS/" style="font-size: 10px;">IDS</a> <a href="/memo-blog/tags/IEEE/" style="font-size: 10.77px;">IEEE</a> <a href="/memo-blog/tags/IPv6/" style="font-size: 10px;">IPv6</a> <a href="/memo-blog/tags/Icarus/" style="font-size: 10px;">Icarus</a> <a href="/memo-blog/tags/Incident/" style="font-size: 10px;">Incident</a> <a href="/memo-blog/tags/Intel/" style="font-size: 10px;">Intel</a> <a href="/memo-blog/tags/Intellij/" style="font-size: 10.77px;">Intellij</a> <a href="/memo-blog/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/memo-blog/tags/Java/" style="font-size: 10px;">Java</a> <a href="/memo-blog/tags/Jupyter/" style="font-size: 10.77px;">Jupyter</a> <a href="/memo-blog/tags/KVM/" style="font-size: 11.54px;">KVM</a> <a href="/memo-blog/tags/Kafak-Connect/" style="font-size: 10px;">Kafak Connect</a> <a href="/memo-blog/tags/Kafka/" style="font-size: 19.23px;">Kafka</a> <a href="/memo-blog/tags/Kafka-Connect/" style="font-size: 10px;">Kafka Connect</a> <a href="/memo-blog/tags/Kafka-Streams/" style="font-size: 10.77px;">Kafka Streams</a> <a href="/memo-blog/tags/Kafka-Summit/" style="font-size: 10px;">Kafka Summit</a> <a href="/memo-blog/tags/Kaggle/" style="font-size: 14.62px;">Kaggle</a> <a href="/memo-blog/tags/Kappa-Architecture/" style="font-size: 10px;">Kappa Architecture</a> <a href="/memo-blog/tags/Keyboard/" style="font-size: 10.77px;">Keyboard</a> <a href="/memo-blog/tags/Kinesis/" style="font-size: 10px;">Kinesis</a> <a href="/memo-blog/tags/Kubernetes/" style="font-size: 11.54px;">Kubernetes</a> <a href="/memo-blog/tags/Lambda-Architecture/" style="font-size: 10px;">Lambda Architecture</a> <a href="/memo-blog/tags/Lighthing/" style="font-size: 10px;">Lighthing</a> <a href="/memo-blog/tags/LinkedIn/" style="font-size: 12.31px;">LinkedIn</a> <a href="/memo-blog/tags/MATE-Desktop/" style="font-size: 10px;">MATE Desktop</a> <a href="/memo-blog/tags/ML-Model-Management/" style="font-size: 10.77px;">ML Model Management</a> <a href="/memo-blog/tags/ML-Ops/" style="font-size: 10px;">ML Ops</a> <a href="/memo-blog/tags/MLflow/" style="font-size: 10px;">MLflow</a> <a href="/memo-blog/tags/Machine-Learning/" style="font-size: 20px;">Machine Learning</a> <a href="/memo-blog/tags/Machine-Learning-Lifecycle/" style="font-size: 10px;">Machine Learning Lifecycle</a> <a href="/memo-blog/tags/Machine-Learning-Lifecycle/" style="font-size: 10px;">Machine Learning Lifecycle/</a> <a href="/memo-blog/tags/Management/" style="font-size: 10px;">Management</a> <a href="/memo-blog/tags/Map/" style="font-size: 10px;">Map</a> <a href="/memo-blog/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/memo-blog/tags/Messaging-System/" style="font-size: 10px;">Messaging System</a> <a href="/memo-blog/tags/Metadata-Management/" style="font-size: 10px;">Metadata Management</a> <a href="/memo-blog/tags/MillWheel/" style="font-size: 10px;">MillWheel</a> <a href="/memo-blog/tags/Minikube/" style="font-size: 10px;">Minikube</a> <a href="/memo-blog/tags/Minio/" style="font-size: 10.77px;">Minio</a> <a href="/memo-blog/tags/Model/" style="font-size: 12.31px;">Model</a> <a href="/memo-blog/tags/Model-Management/" style="font-size: 12.31px;">Model Management</a> <a href="/memo-blog/tags/Monitering/" style="font-size: 10px;">Monitering</a> <a href="/memo-blog/tags/Mouse/" style="font-size: 10px;">Mouse</a> <a href="/memo-blog/tags/NERDTree/" style="font-size: 10px;">NERDTree</a> <a href="/memo-blog/tags/NVM/" style="font-size: 10px;">NVM</a> <a href="/memo-blog/tags/Nature-Remo/" style="font-size: 10px;">Nature Remo</a> <a href="/memo-blog/tags/Network/" style="font-size: 10px;">Network</a> <a href="/memo-blog/tags/OLAP/" style="font-size: 10px;">OLAP</a> <a href="/memo-blog/tags/OneDrive/" style="font-size: 10px;">OneDrive</a> <a href="/memo-blog/tags/OpML/" style="font-size: 10px;">OpML</a> <a href="/memo-blog/tags/Open-API/" style="font-size: 10px;">Open API</a> <a href="/memo-blog/tags/Open-Data/" style="font-size: 10.77px;">Open Data</a> <a href="/memo-blog/tags/Open-Messaging-Benchmark/" style="font-size: 10px;">Open Messaging Benchmark</a> <a href="/memo-blog/tags/OpenAPI/" style="font-size: 10px;">OpenAPI</a> <a href="/memo-blog/tags/OpenML/" style="font-size: 10px;">OpenML</a> <a href="/memo-blog/tags/Oracle/" style="font-size: 10px;">Oracle</a> <a href="/memo-blog/tags/PAPIDS/" style="font-size: 10px;">PAPIDS</a> <a href="/memo-blog/tags/PDF/" style="font-size: 10px;">PDF</a> <a href="/memo-blog/tags/Pandoc/" style="font-size: 10px;">Pandoc</a> <a href="/memo-blog/tags/Paper/" style="font-size: 18.46px;">Paper</a> <a href="/memo-blog/tags/Parquet/" style="font-size: 10px;">Parquet</a> <a href="/memo-blog/tags/Partial-Dependency-Plot/" style="font-size: 10px;">Partial Dependency Plot</a> <a href="/memo-blog/tags/Pinot/" style="font-size: 10px;">Pinot</a> <a href="/memo-blog/tags/Pipenv/" style="font-size: 10px;">Pipenv</a> <a href="/memo-blog/tags/PostgreSQL/" style="font-size: 10px;">PostgreSQL</a> <a href="/memo-blog/tags/Power-Grid-Data/" style="font-size: 10px;">Power Grid Data</a> <a href="/memo-blog/tags/PowerShell/" style="font-size: 10px;">PowerShell</a> <a href="/memo-blog/tags/Preparation/" style="font-size: 10.77px;">Preparation</a> <a href="/memo-blog/tags/Profiler/" style="font-size: 10px;">Profiler</a> <a href="/memo-blog/tags/Pulsar/" style="font-size: 10px;">Pulsar</a> <a href="/memo-blog/tags/PySpark/" style="font-size: 12.31px;">PySpark</a> <a href="/memo-blog/tags/Python/" style="font-size: 17.69px;">Python</a> <a href="/memo-blog/tags/Python3/" style="font-size: 10px;">Python3</a> <a href="/memo-blog/tags/QMK/" style="font-size: 10px;">QMK</a> <a href="/memo-blog/tags/Query-Engine/" style="font-size: 10px;">Query Engine</a> <a href="/memo-blog/tags/RDBMS/" style="font-size: 10.77px;">RDBMS</a> <a href="/memo-blog/tags/RPA/" style="font-size: 10px;">RPA</a> <a href="/memo-blog/tags/Redshift/" style="font-size: 10px;">Redshift</a> <a href="/memo-blog/tags/Research-later/" style="font-size: 10px;">Research later</a> <a href="/memo-blog/tags/S3/" style="font-size: 10px;">S3</a> <a href="/memo-blog/tags/SBT/" style="font-size: 10px;">SBT</a> <a href="/memo-blog/tags/SDK/" style="font-size: 10px;">SDK</a> <a href="/memo-blog/tags/SQLAlchemy/" style="font-size: 10.77px;">SQLAlchemy</a> <a href="/memo-blog/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/memo-blog/tags/SX-Aurora/" style="font-size: 10px;">SX-Aurora</a> <a href="/memo-blog/tags/Samba/" style="font-size: 10px;">Samba</a> <a href="/memo-blog/tags/Scala/" style="font-size: 10px;">Scala</a> <a href="/memo-blog/tags/Scraping/" style="font-size: 10px;">Scraping</a> <a href="/memo-blog/tags/Seaborn/" style="font-size: 10px;">Seaborn</a> <a href="/memo-blog/tags/Security/" style="font-size: 10px;">Security</a> <a href="/memo-blog/tags/Session/" style="font-size: 10px;">Session</a> <a href="/memo-blog/tags/Slenium/" style="font-size: 10px;">Slenium</a> <a href="/memo-blog/tags/Smart-Home/" style="font-size: 10px;">Smart Home</a> <a href="/memo-blog/tags/Snowflake/" style="font-size: 10px;">Snowflake</a> <a href="/memo-blog/tags/Software-Engineering-Patterns/" style="font-size: 10px;">Software Engineering Patterns</a> <a href="/memo-blog/tags/Spark/" style="font-size: 15.38px;">Spark</a> <a href="/memo-blog/tags/Spark-Summit/" style="font-size: 10px;">Spark Summit</a> <a href="/memo-blog/tags/Sphinx/" style="font-size: 10px;">Sphinx</a> <a href="/memo-blog/tags/Statistic/" style="font-size: 10px;">Statistic</a> <a href="/memo-blog/tags/Stonebraker/" style="font-size: 10px;">Stonebraker</a> <a href="/memo-blog/tags/Storage/" style="font-size: 10px;">Storage</a> <a href="/memo-blog/tags/Storage-Engine/" style="font-size: 10px;">Storage Engine</a> <a href="/memo-blog/tags/Storage-Layer/" style="font-size: 11.54px;">Storage Layer</a> <a href="/memo-blog/tags/Storage-Layer-Software/" style="font-size: 10px;">Storage Layer Software</a> <a href="/memo-blog/tags/Stream-Processing/" style="font-size: 18.46px;">Stream Processing</a> <a href="/memo-blog/tags/Superset/" style="font-size: 10px;">Superset</a> <a href="/memo-blog/tags/Supervision/" style="font-size: 10px;">Supervision</a> <a href="/memo-blog/tags/Tellus/" style="font-size: 10px;">Tellus</a> <a href="/memo-blog/tags/TensorFlow/" style="font-size: 11.54px;">TensorFlow</a> <a href="/memo-blog/tags/TensorFlowOnSpark/" style="font-size: 10.77px;">TensorFlowOnSpark</a> <a href="/memo-blog/tags/Tools/" style="font-size: 10px;">Tools</a> <a href="/memo-blog/tags/Trends/" style="font-size: 10px;">Trends</a> <a href="/memo-blog/tags/Troubleshoot/" style="font-size: 10px;">Troubleshoot</a> <a href="/memo-blog/tags/Twitter/" style="font-size: 10px;">Twitter</a> <a href="/memo-blog/tags/Twitter-Heron/" style="font-size: 10px;">Twitter Heron</a> <a href="/memo-blog/tags/Uber/" style="font-size: 10.77px;">Uber</a> <a href="/memo-blog/tags/Ubuntu/" style="font-size: 14.62px;">Ubuntu</a> <a href="/memo-blog/tags/VMWare/" style="font-size: 10px;">VMWare</a> <a href="/memo-blog/tags/Vagrant/" style="font-size: 10.77px;">Vagrant</a> <a href="/memo-blog/tags/Vault/" style="font-size: 10px;">Vault</a> <a href="/memo-blog/tags/Vector-Engine/" style="font-size: 10px;">Vector Engine</a> <a href="/memo-blog/tags/Video-Processing/" style="font-size: 10px;">Video Processing</a> <a href="/memo-blog/tags/Vim/" style="font-size: 10.77px;">Vim</a> <a href="/memo-blog/tags/Visualization/" style="font-size: 10.77px;">Visualization</a> <a href="/memo-blog/tags/WSL/" style="font-size: 13.85px;">WSL</a> <a href="/memo-blog/tags/Web/" style="font-size: 10px;">Web</a> <a href="/memo-blog/tags/WhereHows/" style="font-size: 10px;">WhereHows</a> <a href="/memo-blog/tags/WiFi/" style="font-size: 10px;">WiFi</a> <a href="/memo-blog/tags/WiFi6/" style="font-size: 10px;">WiFi6</a> <a href="/memo-blog/tags/Windows/" style="font-size: 13.08px;">Windows</a> <a href="/memo-blog/tags/Windows-Tools/" style="font-size: 10px;">Windows Tools</a> <a href="/memo-blog/tags/Word/" style="font-size: 10px;">Word</a> <a href="/memo-blog/tags/Word2Vec/" style="font-size: 10px;">Word2Vec</a> <a href="/memo-blog/tags/X-Window/" style="font-size: 10px;">X Window</a> <a href="/memo-blog/tags/X-Road/" style="font-size: 10px;">X-Road</a> <a href="/memo-blog/tags/XGBoost/" style="font-size: 10px;">XGBoost</a> <a href="/memo-blog/tags/Zeppelin/" style="font-size: 10px;">Zeppelin</a> <a href="/memo-blog/tags/ZooKeeper/" style="font-size: 12.31px;">ZooKeeper</a> <a href="/memo-blog/tags/bug/" style="font-size: 10px;">bug</a> <a href="/memo-blog/tags/dein/" style="font-size: 10px;">dein</a> <a href="/memo-blog/tags/dstat/" style="font-size: 10px;">dstat</a> <a href="/memo-blog/tags/fsync/" style="font-size: 10px;">fsync</a> <a href="/memo-blog/tags/git/" style="font-size: 10px;">git</a> <a href="/memo-blog/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/memo-blog/tags/libvirt/" style="font-size: 10px;">libvirt</a> <a href="/memo-blog/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/memo-blog/tags/nltk/" style="font-size: 10px;">nltk</a> <a href="/memo-blog/tags/pandoc/" style="font-size: 11.54px;">pandoc</a> <a href="/memo-blog/tags/pyenv/" style="font-size: 10px;">pyenv</a> <a href="/memo-blog/tags/tmux/" style="font-size: 10.77px;">tmux</a> <a href="/memo-blog/tags/vim/" style="font-size: 13.85px;">vim</a> <a href="/memo-blog/tags/windows/" style="font-size: 10px;">windows</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">リンク</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2023 dobachi<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        


    
        <script src="/memo-blog/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/memo-blog/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/memo-blog/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/memo-blog/js/main.js"></script>

    </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>